\<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<title>FeedReader</title>
<style>
h1 {color:SteelBlue;font-family:verdana;font-size:19px;font-weight:bold;margin-top:40px;margin-bottom:5px;margin-left:40px;}
h2 {color:Black;font-family:Helvetica;font-size:12.5px;font-weight:normal;margin-top:5px;margin-bottom:5px;margin-left:40px;}
div {color:black;font-family:Helvetica;font-size:13.5px;margin-top:15px;margin-bottom:5px;margin-left:40px;}
a {color:#4682B4;}
</style>
</head>
<body>
<h1>UZABASE Tech Blog</h1>
<h2>[<b>link: </b><a href="http://tech.uzabase.com/">http://tech.uzabase.com/</a>, <b>description: </b>株式会社ユーザベースの技術チームブログです。 主に週次の持ち回りLTやセミナー・イベント情報について書きます。, <b>lastBuildDate: </b>Fri, 15 Apr 2016 14:05:13 +0900, <b>docs: </b><a href="http://blogs.law.harvard.edu/tech/rss">http://blogs.law.harvard.edu/tech/rss</a>, <b>generator: </b>Hatena::Blog]
</h2>
<hr>
<div>

<b>：記事をオススメするLINE BOTをつくってみた</b><br><a href="http://tech.uzabase.com/entry/2016/04/15/140513">http://tech.uzabase.com/entry/2016/04/15/140513</a><br><a data-toggle="collapse" href="#collapse1">View / Hide 'description'</a><br><div id="collapse1" class="panel-collapse collapse"><div class="panel-body"><p>はじめまして。技術チームの井原です。</p>

<p>チャットボット（Bot）という言葉を聞いたことがあるでしょうか。スマホやWebのメッセンジャー上で動く自動会話ロボットで、4/7にLINEが<a href="https://business.line.me/ja/products/4/introduction">BOT API Trial</a>を公開したことでエンジニア界隈で一躍ホットなトピックとなりました。今週にはFacebookが対応を発表し、でも話題になりました。</p>

<p><iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fnewspicks.com%2Fnews%2F1496965" title="FacebookがMessengerのチャットボットのプラットフォームを発表" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://newspicks.com/news/1496965">newspicks.com</a></cite></p>

<p>私もBOT API Trialの公開で大喜びしたクチで、さっそく週末と帰宅後の時間でLINE BOTを作ってみました。</p>

<h1>うま</h1>

<p>こちらが作成したBotです。「うま」（非公式Bot）といいます。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/r/ryoju/20160414/20160414174014.png" alt="f:id:ryoju:20160414174014p:plain" title="f:id:ryoju:20160414174014p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>ユーザーが知りたいことをうまに伝えると、良さそうなの記事を探してお教えします。記事の内容が気になったら、画像をタップするとページが開きます。</p>

<p>さて、うまがどういうふうにできているのかご説明いたしましょう。</p>

<h1>インフラ環境</h1>

<p>うまはAWSで動いています。EC2（w/ Elastic IP） + ELB + CloudFront + Certificate Manager + Route 53という構成です。Certificate Managerを使うためにバージニア北部のリージョンで動かしています。</p>

<p>LINE BOTを動かすために以下の対応が必要でした。</p>

<ul>
<li><p>LINE BOTのコールバックを受けるためにはSSLが必須で、かつ<a href="http://qiita.com/git6_com/items/008404506836011af33b">証明書を選り好みする</a>ため、Certificate Managerの証明書を使っています。私が所有しているドメインに対して作成した証明書をCloudFrontに紐付けて、さらにCloudFrontのエンドポイントをRoute 53のAレコードで設定しています。ここの設定に苦労したので、キャプチャを貼付しておきます。よかったら参考にしてください。</p>

<ul>
<li>Certificate Manager<br>コールバックURLに使いたいドメインで証明書を作成します。ワイルドカードである必要はありません。<Br><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/r/ryoju/20160414/20160414202224.png" alt="f:id:ryoju:20160414202224p:plain:w400" title="f:id:ryoju:20160414202224p:plain:w400" class="hatena-fotolife" style="width:400px" itemprop="image"></span></li>
<li>CloudFront<br>ディストリビューションを作成し、証明書を設定します。CNAMEにもコールバックURLのドメインを設定します。<br><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/r/ryoju/20160414/20160414202227.png" alt="f:id:ryoju:20160414202227p:plain:w400" title="f:id:ryoju:20160414202227p:plain:w400" class="hatena-fotolife" style="width:400px" itemprop="image"></span></li>
<li>Route 53<br>ドメインのAタグにディストリビューションを設定します。<br><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/r/ryoju/20160414/20160414202230.png" alt="f:id:ryoju:20160414202230p:plain:w200" title="f:id:ryoju:20160414202230p:plain:w200" class="hatena-fotolife" style="width:200px" itemprop="image"></span></li>
</ul>
</li>
<li><p>LINE BOTはAPIの呼び出し元のIPアドレスを事前に登録しておく必要があり、固定グローバルIPが必要となります（可変だと突然呼び出しが通らなくなるおそれがある）。そのためにElastic IPをEC2インスタンスに付けています。</p></li>
</ul>


<p>ちなみに、私はさくらのVPSを1台契約しており、最初はそれを使おうとしたのですが、証明書の問題でうまくいきませんでした。仕方なくAWSに環境を作って、開発中のプログラム一式も移したという経緯がありました。おそらくLINE BOT APIのサーバ側でチェックしているのでしょうが、無償で取れるSSL証明書ではこちらの用意したコールバックURLを呼んでくれない（？）ようで、GMO GlobalSignの試用証明書、EcoCertの試用証明書と試したのですが、いずれもうまくいきませんでした。SSL証明書はLINE BOTを作ろうとする趣味プログラマのハードルとなっていて、BOT API Trialの公開から数日は「この証明書なら大丈夫」「これはダメ」みたいな話題が多かったです。</p>

<h1>メッセージの処理と記事推薦</h1>

<p>ユーザーが知りたいことを送信してから、うまが記事を提示するまでの流れは以下のようになっています。</p>

<ol>
<li>形態素解析</li>
<li>特徴語抽出</li>
<li>記事の検索</li>
<li>記事の選択</li>
<li>記事の提示</li>
</ol>


<p>また、大まかなデータのやりとりはこのような形になります。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/r/ryoju/20160414/20160414213825.png" alt="f:id:ryoju:20160414213825p:plain" title="f:id:ryoju:20160414213825p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<h3>1. 形態素解析</h3>

<p>ユーザーがLINEでうまとのトークを開始し、知りたいことを入力すると、LINEのサーバを経由してコールバックURLへ<a href="https://developers.line.me/bot-api/api-reference#receiving_messages">テキストメッセージ</a>がPOSTされます。テキストメッセージからユーザーの入力した知りたいことを取り出して形態素解析を行い、単語に切り分けます。
形態素解析エンジンにはMeCabとIPA辞書（オフィシャルサイトで配布されているもの）を使っています。</p>

<h3>2. 特徴語抽出</h3>

<p>ユーザーは自然な（口語的な）表現で知りたいことを入力するため、検索の前処理として不要な単語を落としています。ここはバリエーションの考えられる処理ですが、現状では単純に名詞だけを残し、それ以外の品詞はすべて落としています。</p>

<p>ただ、ログを見るとやはり適切ではない分割をされているケースが多いです。が経済ニュースアプリであるためか、企業名等の固有名詞をメッセージに含む場合が多いのですが、分割しすぎているケースが頻繁に見られます。提示するニュースの適切さをあげるには、ここの改善が大事だなという印象があります。企業・業界情報プラットフォームである<a href="https://www.uzabase.com/speeda/">SPEEDA</a>の辞書を使えばもっと良くなるかもしれません。</p>

<h3>3. 記事の検索</h3>

<p>抽出された特徴語を用いての記事を検索します。ここではの検索機能は使わず、Google検索を使っています。の検索機能は有料会員にだけ開放されている機能なので、誰にでもオープンなGoogle検索にしました。GoogleのWeb検索で上位10件を取得しています。</p>

<h3>4. 記事の選択</h3>

<p>うまは、1つの知りたいことに対して1件だけ記事を提示するため、検索結果の中から提示する記事を選択する必要があります。画像を合わせて提示したいので、検索結果の上位から画像があるかをチェックしていき、画像があるものが見つかればそれを選択しています。</p>

<p>ここも将来的な改善の余地が大きい箇所です。たとえば、検索結果の記事ごとにPick数を取得して重み付けをする、みたいなことはすぐに思いつきます。ただ、やりだすと終わりがありませんし、記事の内容を判定に使うためにはクローリングやページの処理が必要で、レスポンスタイムがそのぶん伸びてしまうこともあり、このような処理としています。</p>

<h3>5. 記事の提示</h3>

<p><a href="https://developers.line.me/bot-api/api-reference#sending_rich_content_message">リッチメッセージ</a>を作ってLINEサーバにPOSTすると、ユーザーに記事が提示されます。</p>

<p>以上の処理がワンセットで、テキストメッセージを受け付けるたびにこれを実行します。</p>

<h1>社内公開</h1>

<p>だいたい動くようになったところで、社内(ニューズピックス/ユーザベース)のSlackでうまを公開しました。けっこう好評で皆に使ってもらえたのですが、やっぱりユーザーの実際の使い方というのは、開発者に様々な気づきやアイディアを与えてくれるものです。以下はのメンバーがSlackにポストしてくれたキャプチャです。</p>

<h3>時間の指定</h3>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/r/ryoju/20160414/20160414204703.jpg" alt="f:id:ryoju:20160414204703j:plain:w250" title="f:id:ryoju:20160414204703j:plain:w250" class="hatena-fotolife" style="width:250px" itemprop="image"></span></p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/r/ryoju/20160414/20160414204706.png" alt="f:id:ryoju:20160414204706p:plain:w250" title="f:id:ryoju:20160414204706p:plain:w250" class="hatena-fotolife" style="width:250px" itemprop="image"></span></p>

<p>いまの処理方法では、時間（記事の公開時刻）をまったく考慮していません。「今日の」「昨日の」のような時間指定のあるメッセージだと、ユーザーの意図を踏まえないイマイチな答えになってしまいます。改善ポイントですね。</p>

<h3>形容詞の使用</h3>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/r/ryoju/20160414/20160414204734.png" alt="f:id:ryoju:20160414204734p:plain:w250" title="f:id:ryoju:20160414204734p:plain:w250" class="hatena-fotolife" style="width:250px" itemprop="image"></span></p>

<p>現在の処理方式では特徴語抽出で名詞だけを残しており、「盛り上がった」は形容詞なので、検索結果に何ら反映されません。この場合は「ニュース」だけで検索した結果を返すことになっています。</p>

<p>まあ、うまは生まれたばかりだからね……。開発者としてはがんばって賢くしてやりたいものです。</p>

<h1>ソースコード</h1>

<p><a href="https://github.com/ryoju/newspicks_bot">現状のソースコードをGithubに上げた</a>ので、よろしければご覧ください。まだα版くらいの感じなので、ごちゃごちゃ弄っている最中でコメントも皆無と、綺麗とは言いがたいのですが。そのうち整理されてくるはず……たぶん。</p>

<p>実装にはPythonを使っています。フレームワークはDjango(w/ Django REST Framework)です。 どこかで動かしてみる時には、newspicks/settings_line.pyにあなたのLINE BOTのChannel ID, Channel Secret, MIDを記載してください。</p>
</div></div>(Published: Fri, 15 Apr 2016 14:05:13 +0900)<br><br>
<b>Slackを全社導入したので、社内向け利用マニュアルを公開してみた</b><br><a href="http://tech.uzabase.com/entry/2016/03/17/145415">http://tech.uzabase.com/entry/2016/03/17/145415</a><br><a data-toggle="collapse" href="#collapse2">View / Hide 'description'</a><br><div id="collapse2" class="panel-collapse collapse"><div class="panel-body"><p>はじめまして。ユーザベース Cultureチームの木村です。先月、インターンとして入社し、就職活動と二足の草鞋でやっています。
<br>
<br>
今回、ユーザベース全体として「Slack」の全面導入が決まりました！
これまで、社内でのチャットコミュニケーションはチームごとにLINE・チャットワーク・Skypeを使用し混在していましたが、今後はSlackに統一をしていきます。
<br>
<br>
全社導入時に使用した<span style="color: #F5A2A2">Slackのご紹介</span>と<span style="color: #F5A2A2">簡易マニュアル</span>を公開します。Slackが気になっていた方や初めて知る方に、他のコミュニケーションツールと違う点についてお伝えしたいと思います。
<br>
<br></p>

<h3>What’s Slack？</h3>

<p><br>
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20160316/20160316161207.png" alt="f:id:uzabase:20160316161207p:plain" title="f:id:uzabase:20160316161207p:plain" class="hatena-fotolife" itemprop="image"></span>>
<br></p>

<blockquote><p>Slack（スラック）は、スチュワート・バターフィールドによって開発された、チームコミュニケーションツール。2013年8月に公開され、公開から24時間以内に8000の顧客にサインアップされた。現在Slackは世界中で急速に普及しており、1日に利用するアクティブユーザー数は125万人で、有料会員が37万人(2015年9月時点)。利用者数は90日ごとに倍増するペースで伸び続けている。</p></blockquote>

<p><u><b>ざっくり言えば、「ビジネス用途のLINE」です。</b></u>
<br>メールで堅苦しくやり取りをするよりも、チャットツールで簡単にコミュニケーションをとる方が、精神的にも楽ですし、効率的ですよね。LINEはプライベートと混同されてしまうし・・というわけで、Slackになりました。
<br>
ですが、チャットワークを始め、数ある企業向けコミュニケーションツールの中から、どうしてSlackが選ばれたのか？
<br>
ということで、以下にSlackを利用する5つのメリットをあげてみました！
<br>
<br></p>

<h4>Slackのイケてる点</h4>

<ol>
<li><b>情報の抽出が簡単＆網羅的</b>
<br>
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20160316/20160316163128.png" alt="f:id:uzabase:20160316163128p:plain" title="f:id:uzabase:20160316163128p:plain" class="hatena-fotolife" itemprop="image"></span>
<br>
検索機能で、チャンネル(LINEのグループチャットの概念)をまたいで、過去ログ全ての検索ができます。
<br>また、ファイルやまとまった文章を投稿するPost機能は、それ自体にコメントをつけることができるので、返答や意見が一か所にまとまりやすいです。Postは複数人での共同編集にも対応しています。
<br>
<br></li>
<li><b>連携できる外部サービスが豊富</b>
<br>
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20160316/20160316163143.png" alt="f:id:uzabase:20160316163143p:plain" title="f:id:uzabase:20160316163143p:plain" class="hatena-fotolife" itemprop="image"></span>
<br>
Slackと言えば拡張性。例えばGmailからメールが来たらSlackに通知され、そのままSlack上で内容の確認ができるなど、あらゆる通知や情報がSlackを見るだけで確認ができるようになります。TwitterやRSS、Google Calendarといった一般的なサービスから、GitHubなどエンジニア向けのサービスまで、幅広く連携することができます。
<br>
<br></li>
<li><b>UIがシンプルでスタイリッシュ</b>
<br>
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20160316/20160316170627.png" alt="f:id:uzabase:20160316170627p:plain" title="f:id:uzabase:20160316170627p:plain" class="hatena-fotolife" itemprop="image"></span>
<br>
個人的な好みにはなりますが、とにかくお洒落でシンプル。洗練されたUIは、SPEEDAと共通する部分があるように思えます。コミュニケーションツールは毎日使うものですので、やはりごちゃごちゃしたUIよりも、シンプルで分かり易いものの方が捗ります。
<br>
<br></li>
<li><b>各端末用のアプリがある</b>
<br>
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20160316/20160316162310.jpg" alt="f:id:uzabase:20160316162310j:plain" title="f:id:uzabase:20160316162310j:plain" class="hatena-fotolife" itemprop="image"></span>
<br>
ブラウザ版の他、Mac、Windowsのデスクトップ版、iOS、Androidのアプリ版もあり、いつでもどこでも使うことができます。
<br>
<br></li>
<li><b>各種コードをアップロードできるsnippet機能がある。</b>
<br>
この点が、とりわけエンジニアライクな設計になっています。Tech Blogということで、少し詳しくご説明します。
<br>
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20160316/20160316163202.png" alt="f:id:uzabase:20160316163202p:plain" title="f:id:uzabase:20160316163202p:plain" class="hatena-fotolife" itemprop="image"></span>
<br>
左上の入力画面にコードの名前を打ち込み、右上のプルダウンでコードの言語種類を選ぶと、中央のプログラムコードが色付けされたり、自動でインデントがつけられます。
<br>
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20160316/20160316163221.png" alt="f:id:uzabase:20160316163221p:plain" title="f:id:uzabase:20160316163221p:plain" class="hatena-fotolife" itemprop="image"></span>
<br>
実際に投稿すると、このように見えます。これまで、他のチャットサービスでコードをベタ貼りしていた時と比べて、かなり見違えると思います。色付け、インデントに加えて行番号も書いてあるため、他のエンジニアとのコミュニケーションもとりやすくなっています。
<br>
<br>
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20160316/20160316163243.png" alt="f:id:uzabase:20160316163243p:plain" title="f:id:uzabase:20160316163243p:plain" class="hatena-fotolife" itemprop="image"></span>
<br>
投稿されたSnippetには、Post機能と同じようにコメントを付けられるだけではなく、検索でコードやコメントの中身まで引っかかります！
<br>
<br>
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20160316/20160316163304.png" alt="f:id:uzabase:20160316163304p:plain" title="f:id:uzabase:20160316163304p:plain" class="hatena-fotolife" itemprop="image"></span>
<br>
ちなみに、これは「in:helloslack during:2016 helloWorld」と検索しており、『「helloslack」チャンネルの2016年に投稿された中で、helloWorldの文字列が存在する』メッセージもしくはファイルを抽出しています。
<br></li>
</ol>


<h3>How to Slack</h3>

<h4>1.コミュニケーション</h4>

<p>Slackでのコミュニケーション方法は、以下の3通りです。
<br>
・メンバー全体に特定の情報を送信する「チャンネル」
<br>
・個々のメンバーに向けた「ダイレクトメッセージ」
<br>
・特定のメンバーのみが閲覧できる「プライベートグループ」
<br></p>

<h5>1-1.チャンネル</h5>

<p>チャンネルとは、関連する話題を部屋別に分ける機能で、LINEのグループチャットと同じようなものです。ただし、このチャンネルに表示している内容は、Slack全体に共有されるので、チャンネルに参加していない人でも自由に閲覧することが可能です。(チャンネルに参加していないメンバーは、発言することはできません。)
<br>
<br>
【新規チャンネル作成】
<br>
新規チャンネルは「CHANNELS」の「＋ボタン」をクリックして作成をします。お好みのチャンネル名と招待したいメンバー(後からでも追加可能)、チャンネルの説明をいれたら、「Create channel」をクリックしてください。
<br>
 <span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20160316/20160316163337.png" alt="f:id:uzabase:20160316163337p:plain" title="f:id:uzabase:20160316163337p:plain" class="hatena-fotolife" itemprop="image"></span>
<br>
＋ボタンの左にある「CHANNELS」からは既存のCHANNELを検索することができます。
<br>
<br>
【チャット】
<br>
通常の会話は、チャットツールと同様でテキストを入力し、Enterで送ることができます。編集したい場合には、テキスト入力欄の右に「･･･」がでますので、そこから「Edit message」で編集してください。
<br>
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20160316/20160316163821.png" alt="f:id:uzabase:20160316163821p:plain" title="f:id:uzabase:20160316163821p:plain" class="hatena-fotolife" itemprop="image"></span>
<br>
コメントにPinやStarを付けて、後から見やすくすることもできます。
<br>
<br>
【メンション】
<br>
投稿時に、以下のコマンドを入力すると、特定のユーザー名を記載したメッセージが送れるようになります。初期設定では、メンションのみがポップアップ通知されるようになっているため、これを使うことで相手にメッセージが伝わりやすくなります。
<br>
@username → 特定の個人へのメンションは、@を入れて一覧の予測変換より選択出来ます。
<br>
@everyone or @group → チャンネル関係なく、全てのメンバーへのメンション
<br>
@here → オンラインのメンバーへのメンション
<br>
@channel → チャンネルのメンバー全員へのメンション
<br>
<br>
【ファイル共有】
<br>
テキスト入力欄左部の＋ボタンから、「Upload a file」、もしくはドラッグアンドドロップで、テキスト入力エリアに画像やファイルを持ってくると、アップロードが可能です。gif・jpg・png・pdf・textなど、どんなファイルでも送ることができます。
<br>
<br></p>

<h5>1-2.ダイレクトメッセージ</h5>

<p>ダイレクトメッセージは、名前の通り直接連絡のやり取りができます。
一対一の会話なので、他の参加者が内容を確認することはできません。
<br>
 <span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20160316/20160316163348.png" alt="f:id:uzabase:20160316163348p:plain" title="f:id:uzabase:20160316163348p:plain" class="hatena-fotolife" itemprop="image"></span>
<br>
画面左部「DIRECT MESSAGES」からユーザーの検索ができます。
<br>
<br></p>

<h5>1-3.プライベートグループ</h5>

<p>プライベートグループは、チャンネルとほぼ同じ機能ですが、このチャンネルに書かれた内容は参加メンバーのみに共有され、同じチーム内でも閲覧はできません。クローズドな環境なのでサプライズ等の計画に使えそうです！
<br>
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20160316/20160316163925.png" alt="f:id:uzabase:20160316163925p:plain" title="f:id:uzabase:20160316163925p:plain" class="hatena-fotolife" itemprop="image"></span>
<br>
通常のチャンネル作成と同様、「CHANNNELS」の「＋ボタン」から作成画面へ
→上部の「Public」タブをクリックすると「Private」となります。
<br>
<br></p>

<h4>2.別アプリとの連携</h4>

<p>【Google Driveとの連携】
Google DriveとSlackを連携しておくと、Google DriveのファイルURLをSlackに貼り付けた際に、Slack上にファイルとして認識される（検索対象になる） ようになります。スプレッドシートなどを頻繁に触る方は設定しておくと、Slack内から検索できたり、直にファイルが開けたりしてとても便利になります。
<br>
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20160316/20160316164158.png" alt="f:id:uzabase:20160316164158p:plain" title="f:id:uzabase:20160316164158p:plain" class="hatena-fotolife" itemprop="image"></span>
<br>
画面左部の自分のユーザーネームをクリック
<br>
→右部「Account」をクリック
<br>
→左部「Configure Apps」をクリック
<br>
→一覧から「Google Drive」をクリック
<br>
→「Authenticate」から連携許可
<br>
<br>
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20160316/20160316173141.png" alt="f:id:uzabase:20160316173141p:plain" title="f:id:uzabase:20160316173141p:plain" class="hatena-fotolife" itemprop="image"></span>
<br>
URLではなく、ファイル形式で表示されるようになった上、Slack上でコメントを付けられるようになりました！
<br></p>

<h3>感想</h3>

<p>長々と書いてしまいましたが、何か一つでもご参考になるものがあれば幸いです。スラッシュコマンドやPin機能など、Slackにはまだまだ可能性が秘められております。皆さまもぜひお試しください。<br>
私個人としても、全社へのSlack導入のお仕事をいただいてから、半信半疑で使い始めたのですが、今はすっかりSlackの虜です。連携サービスやチャンネルの運用を駆使して<span style="color: #F5A2A2">「社内のコミュニケーション全てをSlackで完結させる」</span>と考えはじめたら、もうワクワクの極みです。<br>
そして就活生である身としては、Slackを全社的に有効活用させて<b>「はい！私は、インターン先の企業において、社内コミュニケーションの活性化に尽力しました！」</b>的なことを言えるようになりたいものです。</p>
</div></div>(Published: Thu, 17 Mar 2016 14:54:15 +0900)<br><br>
<b>Hinemos5.0.1移行記（その１：理想と現実の葛藤）</b><br><a href="http://tech.uzabase.com/entry/2016/03/11/155758">http://tech.uzabase.com/entry/2016/03/11/155758</a><br><a data-toggle="collapse" href="#collapse3">View / Hide 'description'</a><br><div id="collapse3" class="panel-collapse collapse"><div class="panel-body"><p>ユーザベース インフラチームの小林です。</p>

<p><a href="http://tech.uzabase.com/entry/2016/02/18/165541">前回の記事</a>から引き続き、今回からHinemos5.0.1への移行のお話です。</p>

<h2>が、その前に1箇所訂正があります</h2>

<p><a href="http://tech.uzabase.com/entry/2016/02/18/165541">前回のブログで書いた</a>ジョブスケジュール日跨ぎの件ですが、<br>
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/m/manabu-kobayashi/20160226/20160226221222.jpg" alt="f:id:manabu-kobayashi:20160226221222j:plain" title="f:id:manabu-kobayashi:20160226221222j:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>0:00～48:00に設定する事で、日跨ぎができました！<br>
先日Hinemosセミナーに出た際に、NTTデータさんに教えてもらいました。ありがとうございます。<br>
（けれど、日付の指定が年・月・日をいちいち選ばないといけないので、やっぱり不便です。
日付選択を、カレンダーから選択できる機能もつけてしてほしい・・・と思ってます。）
<br>
<br></p>

<h2>移行の流れ</h2>

<p>さて、話を本題に。
<br>
弊社のHinemos環境をバージョンアップするにあたり、おおざっぱに以下の流れで行いました。</p>

<ol>
<li>Hinemos5Managerを新規構築 、動作検証</li>
<li>Hinemos3のデータをHinemos5に移行</li>
<li>Hinemos3からHinemos5への順次切り替え</li>
</ol>


<p>（正確にはHinemos3.1.2とHinemos5.0.1ですが、省略します。）</p>

<h2>では、動作検証の話</h2>

<p>新規構築は、マニュアル通りに行えば特に問題はありません。
動作検証においては、Hinemos3ではあまり高度な機能を使っていなかったこともあり、<br>
ジョブスケジューラとして、以下のような基本的な部分だけの検証で十分でした。(新機能は移行後に順次追加。)</p>

<ul>
<li>指定した通りにコマンド実行ができるか</li>
<li>きちんと先行条件が効くか</li>
<li>スケジューラが機能するか</li>
</ul>


<p>上の部分について全然問題はなかったのですが、Hinemos3と違うところがあったので、思いついた部分を列挙します。<br>
<br>
<b>先行条件が自動で変わって便利！</b><br>
Himemos3の時、ジョブIDを変更したいと思っても、後続のジョブの先行条件も変更しなければならず、すごく億劫でした。<br>
ところが、今回のバージョンアップで試してみたところ、下記のようにジョブIDを変更すると、それに紐付く後続ジョブの先行条件が自動で変わってくれます！<br>
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/m/manabu-kobayashi/20160229/20160229170138.jpg" alt="f:id:manabu-kobayashi:20160229170138j:plain" title="f:id:manabu-kobayashi:20160229170138j:plain" class="hatena-fotolife" itemprop="image"></span><br>
<b>デフォルトのチェックが余計？</b><br>
新規ジョブ作成時、デフォルトで【条件を満たさなければ終了する】にチェックが入っているのですが、これにチェックが入っていると、前のジョブが異常終了した際などに終了してしまうので、弊社の環境では不便でした。<br>
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/m/manabu-kobayashi/20160229/20160229170136.jpg" alt="f:id:manabu-kobayashi:20160229170136j:plain" title="f:id:manabu-kobayashi:20160229170136j:plain" class="hatena-fotolife" itemprop="image"></span><br></p>

<p>また、<b>ジョブをコピーして追加したい時に、うまくコピーができる場合と、できない場合（実行コマンド等が空になる）があるので、その謎を解きたいと思ってます。</b><br><br></p>

<h2>データ移行は、<A Href="http://atomitech.jp/">アトミテック</A>さんに依頼</h2>

<p>次に、2点目の「Hinemos3のデータをHinemos5に移行」では、弊社の環境でノード数は約70、ジョブの登録数は約3000とありました。
これを人力で、ミスなく再設定する自信がない・・・<br>
という事で、Hinemosのデータ変換は、Hinemosソリューションパートナーの<A Href="http://atomitech.jp/">アトミテック</A>さんに依頼をさせていただきました。
今回はデータの変換だけではなく、Hinemos5移行後のサポートも含めて契約をさせていただき、
後々それが大きな助けとなりました。</p>

<p>ちなみに、アトミテックさんは、<a href="http://atomitech.jp/hinemos/blog/:title">ブログ</a>でHinemosの情報発信をしており、いろいろな機能の検証をされてます。<br></p>

<p>Hinemos3->5へのデータ変換は、アトミテックさんにお願いしたことで、
弊社側での残作業は3つ目の「Hinemos3からHinemos5への順次切り替え」になります。</p>

<h2>目指す移行方法</h2>

<p>「順次切り替え」と書かせていただきましたが、
以下の要因から、一括切り替えではなく、順次確認をしながらの切り替えが可能でした。</p>

<ul>
<li>Hinemos3とHinemos5のエージェントは同居可能(Windows環境は除く)</li>
<li>ジョブの組み方を単純にしているため、機能検証をする項目が少ない</li>
</ul>


<p>後者について、もう少し詳しく説明します。<br>
一般的なジョブの組み方としては、以下のようにジョブネット間を先行条件で繋ぐことが多いと思います。（Hinemosに限らず）<br>
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/m/manabu-kobayashi/20160227/20160227013446.jpg" alt="f:id:manabu-kobayashi:20160227013446j:plain" title="f:id:manabu-kobayashi:20160227013446j:plain" class="hatena-fotolife" itemprop="image"></span>
ところが、弊社環境では、ジョブネット間の連携において、先行条件で繋いでいませんでした。
どういうことかというと、各ジョブネットの最後にファイルを作成させて、
次のジョブは、そのファイルがあると動くようにしており、ファイルの作成・監視もshellで動かしています。
こんな感じです。
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/m/manabu-kobayashi/20160227/20160227013915.jpg" alt="f:id:manabu-kobayashi:20160227013915j:plain" title="f:id:manabu-kobayashi:20160227013915j:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>このおかげで、こんなことが可能になります。
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/m/manabu-kobayashi/20160227/20160227013500.jpg" alt="f:id:manabu-kobayashi:20160227013500j:plain" title="f:id:manabu-kobayashi:20160227013500j:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>こうする事で、<span style="color: #ff5252"><b>一度に全部を切り替えるのではなく、ジョブネット一つずつの動作確認をしながら切り替えができるので、
スケジュールに余裕を持たせた移行が可能な状況でした。
</b></span><br></p>

<h2>と思ったら単純にはAgentが同居できなかったよ！</h2>

<p>Agentで使うJavaをマニュアルから抜粋すると、</p>

<pre class="code lang-sh" data-lang="sh" data-unlink> Hinemosエージェントを利用する場合
 以下のいずれかのopenjdkをインストールしてください。
   java-1.7.0-openjdk
   java-1.6.0-openjdk
</pre>


<p>という事になっているのですが、弊社ではOracleJDK1.8を使ってました。<br>
Agentにいれるために、既存のサービスに影響が出そうなことをしたくない。<br></p>

<p>そしてもう一つ。
インストールディレクトリ
/opt/hinemos
って、バージョンが違ってもインストール先が一緒だということ。<br>
（rpmコマンドでのインストールなので、オプションを付ければ変更もできるかもしれませんが、デフォルトはこのまま）<br>
<br>
つまり、異なるバージョンが同居できるといっても、インストール先をデフォルトから変更をしないといけないのです。</p>

<h2>状況の整理</h2>

<p>状況を整理すると、</p>

<ul>
<li>Agent用にサポート対象バージョンのOpenJDKを入れるか、OracleJDK1.8を使い続けるか。</li>
<li>Hinemos3とHinemos5のAgentが同居できるといっても、どちらかのインストールディレクトリを変えないといけない。</li>
</ul>


<p>という問題にぶつかりました。</p>

<p>前者ですが、当初は簡単に考えていて、
OpenJDKのバイナリファイルをダウンロードして、Agentのインストールディレクトリに展開をすればいいのでは、と思っていましたが、
<a href="http://openjdk.java.net/">http://openjdk.java.net/</a>をみると、yumからしかインストールができないようです。
yumでインストールした場合、万が一環境変数に変更があったりすると、既存のジョブに影響が出てしまう。
うーん、困った。</p>

<p>そこで、後者。<br>
新規でインストールをするHinemos5のAgentのインストールディレクトリを変える<br>
or<br>
既存サービスで利用をしているHinemos3のAgentのインストールディレクトリを変える<br>
<br>
という２択ですが、これから使う方を大事にしたいと思い、Hinemos3の方を変えることにしました。</p>

<p>ここで登場をするのが、やはり<A Href="http://atomitech.jp/">アトミテック</A>さんなのでした。
意外と長くなったので次回へ続く。</p>

<p><br>
<br></p>

<h2>新機能のジョブのリトライ間隔の検証</h2>

<p>ちょっと話題を変えまして、小ネタを一つ。<br>
<br>
ジョブのリトライ機能が追加されましたが、<br></p>

<ul>
<li>リトライ間隔ってどれくらいなんだろう？</li>
<li>それは変更ができるか？</li>
</ul>


<p>というのが気になり、検証をしてみました。
管理者マニュアルには、他のリトライに関する説明はあったのですが、上の点については書いてないんだもの。。。。<br></p>

<p>では、検証開始。<br></p>

<p>1．エラーになるジョブを作る
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/m/manabu-kobayashi/20160304/20160304212735.png" alt="f:id:manabu-kobayashi:20160304212735p:plain" title="f:id:manabu-kobayashi:20160304212735p:plain" class="hatena-fotolife" itemprop="image"></span><br>
2．あたりまえだけどすぐ終わる。
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/m/manabu-kobayashi/20160304/20160304210055.png" alt="f:id:manabu-kobayashi:20160304210055p:plain" title="f:id:manabu-kobayashi:20160304210055p:plain" class="hatena-fotolife" itemprop="image"></span>
3．リトライ回数を2で設定してみたら、落ちるまで20秒かかった。
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/m/manabu-kobayashi/20160304/20160304210103.png" alt="f:id:manabu-kobayashi:20160304210103p:plain" title="f:id:manabu-kobayashi:20160304210103p:plain" class="hatena-fotolife" itemprop="image"></span>
4．ソースを見てみた。<br>
というか、retryって言葉でgrepをかけてみて探してみた。そして、下の情報にたどり着く。<br>
どうやら、「job.retry.interval」という値で管理ができる。デフォルトは10*1000で、実際は10秒なので、msで設定しているっぽい。
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/m/manabu-kobayashi/20160304/20160304210111.png" alt="f:id:manabu-kobayashi:20160304210111p:plain" title="f:id:manabu-kobayashi:20160304210111p:plain" class="hatena-fotolife" itemprop="image"></span>
5．プロパティ画面で、job.retry.intervalを60000で設定してみた。
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/m/manabu-kobayashi/20160304/20160304210115.png" alt="f:id:manabu-kobayashi:20160304210115p:plain" title="f:id:manabu-kobayashi:20160304210115p:plain" class="hatena-fotolife" itemprop="image"></span>
6．ちゃんと2分伸びた！
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/m/manabu-kobayashi/20160304/20160304210125.png" alt="f:id:manabu-kobayashi:20160304210125p:plain" title="f:id:manabu-kobayashi:20160304210125p:plain" class="hatena-fotolife" itemprop="image"></span>
<br>
<br>
というわけで、<br></p>

<ul>
<li>リトライ間隔のデフォルトは10秒</li>
<li>job.retry.intervalで変更可能</li>
</ul>


<p>というお話でした。
<br></p>
</div></div>(Published: Fri, 11 Mar 2016 15:57:58 +0900)<br><br>
<b>RxJava + Vert.x + jOOλ で Microservice 的な何かを作ってみた</b><br><a href="http://tech.uzabase.com/entry/2016/03/08/140142">http://tech.uzabase.com/entry/2016/03/08/140142</a><br><a data-toggle="collapse" href="#collapse4">View / Hide 'description'</a><br><div id="collapse4" class="panel-collapse collapse"><div class="panel-body"><p>技術チームの竹内(@chimerast)です。</p>

<p>先日、<a href="http://connpass.com/event/25532/">Rx Ja Night 2016 #1</a>という勉強会で、「RxJava + Vert.x + jOOλ で Microservice 的な何かを作ってみた」という題でLTしてきたので内容を少し書いてみようと思います。</p>

<p>当日は自分以外基本Android勢の発表で、サーバサイドの自分にとっては、とてもアウェイな雰囲気でしたがめげずに発表してきました。RxJavaっていうとサーバサイドでは普通は使う機会がないですからね。</p>

<script async class="speakerdeck-embed" data-id="2745f52212ba4e678b9d37f172c9ebdb" data-ratio="1.77777777777778" src="//speakerdeck.com/assets/embed.js"></script>


<h2>今回作ったものとその問題点</h2>

<p>ブラウザでチャートを描画するための元データとなるJSONを返すREST APIを作りました。</p>

<p>現在UZABASEではマイクロサービスアーキテクチャ的な何かのように、複数のREST APIを提供するサービスをぽこぽこ立ち上げており、その中の一つという位置づけです。</p>

<p>今回作ったChart APIの裏では、企業情報を扱う「Companies API」、統計情報を扱う「Stats API」、チャートそれぞれの線のデータ指定情報を管理する「Media API」という3つのAPIが動いています。これらにリクエストを投げて得たデータを元に最終的なチャートのJSONを構築します。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/c/chimerast/20160227/20160227154832.jpg" alt="f:id:chimerast:20160227154832j:plain" title="f:id:chimerast:20160227154832j:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>今回作る前から問題点として上がっていたのは、</p>

<ul>
<li>Chart APIだけがAWS上に配置され、それ以外がオンプレのデータセンター上にありデータセンター間通信となってしまうこと</li>
<li>最終的なレスポンスを返すまでに複数回（多いときには20回以上）バックエンドのAPIにリクエストを投げる必要があるということ</li>
</ul>


<p>という二点です。</p>

<p>この状態で最速でレスポンスを返すためには、並列でバックエンドのAPIにリクエストを投げる必要がありますが、それを普通にブロッキングI/Oでやろうとすると、Chart APIへの1リクエストが10スレッド以上立ち上げてバックエンドAPIの返りを待つ必要があるという残念な状態になってしまします。</p>

<h2>使ったもの</h2>

<h3>Vert.x <a href="http://vertx.io/">http://vertx.io/</a></h3>

<p>Nettyの上に作られ、ノンブロッキングI/Oで通信を行う事のできる高レベルAPI群です。サブプロジェクトがたくさんありDBとの通信を行うことの出来るモジュールなんかもあります。</p>

<p>これのサブプロジェクトの一つである、Vert.x-WebをつかってRESTなAPIをつくりつつ、バックエンドAPIに対して１スレッドからノンブロッキングで複数リクエストを投げるみたいな使い方をしました。</p>

<p>Vert.xの問題点として、全てがコールバックで返る非同期APIなため、例えば単純なDBのSELECT&amp;UPDATEをするだけでも何段ものインデントが必要な書き方になります。メソッドを分けるという単純な解決法もありますが宣言的に書けるところは宣言的に書きたいです。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/c/chimerast/20160227/20160227160730.jpg" alt="f:id:chimerast:20160227160730j:plain" title="f:id:chimerast:20160227160730j:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>これを解決するためにRxJavaを使います。</p>

<h3>RxJava <a href="https://github.com/ReactiveX/RxJava">https://github.com/ReactiveX/RxJava</a></h3>

<p>RxJavaは、Streamとしての側面とPromiseとしての側面を併せ持ったライブラリです。いろいろな使い方ができ自分も全てのメソッドの使い道をうまく把握出来ていません。Android勢はJava8がまだ使えないためStreamの代わりとして使っていたり、非同期処理も多いのでPromiseとしての使い方をしたり色々しているようです。</p>

<p>今回のサーバサイドの開発では、Promiseとしての側面しか使っていません。コールバック地獄から抜け出すため(flatMap)、そして、複数の非同期処理をひとまとめにするため(zip)に主に使っています。</p>

<p>最終的には組み合わせて以下みたいなコードになっています。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/c/chimerast/20160229/20160229075644.jpg" alt="f:id:chimerast:20160229075644j:plain" title="f:id:chimerast:20160229075644j:plain" class="hatena-fotolife" itemprop="image"></span></p>

<h2>感想</h2>

<p>あまり長い文を書いても読みづらくなるだけなので、あとの細かい所はスライドを見てみてください。</p>

<p>Vert.xは巨大なモノリシックなサービスを作るのにはあまり向いていない気がしていますが、今回のように小さいサービスを作るには軽くて向いていると思えました。特に並列でバックエンドのAPIに丸投げして待つみたいなものを作る時にはスレッドの数を考える必要が無いという大きな利点があると思います。</p>

<p>RxJavaは非同期処理を気持ちよく書けるライブラリです。Vert.x、RxJavaともにJava8に対応しているためラムダ式でがしがし書くことができます。</p>

<h2>エンジニア募集</h2>

<p>株式会社ユーザベース、および、株式会社ニューズピックスではエンジニアを募集しています。ご興味があればお気軽にご連絡ください。</p>

<p><iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.wantedly.com%2Fcompanies%2Fuzabase-inc%2Fprojects" title="株式会社ユーザベースの採用/求人一覧 - Wantedly" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://www.wantedly.com/companies/uzabase-inc/projects">www.wantedly.com</a></cite></p>

<p><iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.wantedly.com%2Fcompanies%2Fnewspicks%2Fprojects" title="株式会社ニューズピックスの採用/求人一覧 - Wantedly" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://www.wantedly.com/companies/newspicks/projects">www.wantedly.com</a></cite></p>
</div></div>(Published: Tue, 08 Mar 2016 14:01:42 +0900)<br><br>
<b>Hinemos3.1.2→Hinemos5.0.1に移行しました</b><br><a href="http://tech.uzabase.com/entry/2016/02/18/165541">http://tech.uzabase.com/entry/2016/02/18/165541</a><br><a data-toggle="collapse" href="#collapse5">View / Hide 'description'</a><br><div id="collapse5" class="panel-collapse collapse"><div class="panel-body"><p><a href="http://tech.uzabase.com/entry/2015/01/29/102935">前回の投稿</a>から約1年と、だいぶ時間が空いてしまいました。<br>
ご無沙汰しておりますユーザベース インフラチームの小林です。</p>

<p>当時海外留学していたメンバーも無事帰国し、新メンバーも増え、インフラチームはだいぶにぎやかになっております。</p>

<h2>Hinemos3.1.2→Hinemos5.0.1に移行！</h2>

<p>さて、本題なのですが、昨年5月にHinemos5が発表されました。<br>
すぐに導入したかったのですが、昨年9月の5.0.1の公開を待って、満を持してHinemos3.1.2→Hinemos5.0.1への移行を行いました。
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/m/manabu-kobayashi/20160215/20160215231044.png" alt="f:id:manabu-kobayashi:20160215231044p:plain" title="f:id:manabu-kobayashi:20160215231044p:plain" class="hatena-fotolife" itemprop="image"></span>
<br><br><br>
この移行時の顛末については、次回にさせていただくとして、今回はHinemos5にしてみて、実際どうだったかというところを紹介させていただきます。</p>

<h2>Hinemos5.0.1で大幅な運用改善を実現！</h2>

<p>おさらいですが、Hinemos3の運用での困っていた点は以下の通りです。</p>

<ul>
<li>Hinemosエージェントが、Windows8だと動かない<br>

<ul>
<li>⇒そもそもWindows対応のみで、Mac作業者が作業できない。</li>
</ul>
</li>
<li>画面を開くの重い、ジョブの登録はもっと重い<br>

<ul>
<li>⇒あまりに重くて、常時PC開きっぱなし。</li>
</ul>
</li>
</ul>


<p>ジョブ管理ツールとしては問題なく動いてくれていたのですが、パフォーマンス面でどうしても運用メンバーの負荷が上がっている状態でした。</p>

<p>では、これらが、Hinemos5になって解決されたかというと、、<br>
<span style="color: #000000"><b>はい、ばっちりです！</b></span></p>

<p><br>
Webクライアントについては、下のブログで詳しく紹介されているのでそちらをご確認いただきたいですが、リッチクライアントと遜色ない仕上がりで、<br>
<b>ようやくジョブ監視のWindows縛りから解放されたのであります！</b><br>
<iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Ftech-sketch.jp%2F2015%2F09%2Fhinemos5-0_part1.html" title="Hinemos5.0新機能紹介Part1「Webクライアント」 | Tech-Sketch" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://tech-sketch.jp/2015/09/hinemos5-0_part1.html">tech-sketch.jp</a></cite></p>

<p><br>
次に、画面が開くまで時間ですが、僕の実測ベースで、<br></p>

<ul>
<li>Hinemos3の時

<ul>
<li>ログインするまで：2分7秒（そのあとに、ジョブ履歴の画面を開くのにまた待ち時間）</li>
<li>ジョブの登録時の待ち時間：2分30秒</li>
</ul>
</li>
<li>Hinemos5の時

<ul>
<li>ログインするまで：30秒（更にジョブ履歴の画面まで開いてる！！）</li>
<li>ジョブの登録時の待ち時間：10秒位</li>
</ul>
</li>
</ul>


<p>と大幅改善されていて、<b>常時画面を開いている状態からも解放されました。</b><br>
毎日Hinemos開いていたので、待ち時間だけで1年で約10時間の削減効果です(笑</p>

<p><br>
それ以外にも、<br></p>

<ul>
<li><b>ジョブのスケジュール予定がわかるようになった</b>り、<br>（新規でスケジュールしたときに想定通り動くか確認できて超便利！）
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/m/manabu-kobayashi/20160217/20160217225235.png" alt="f:id:manabu-kobayashi:20160217225235p:plain" title="f:id:manabu-kobayashi:20160217225235p:plain" class="hatena-fotolife" itemprop="image"></span></li>
<li><b>祝日のパターンなどを複数のカレンダで共有できた</b>り（デフォルトで祝日入ってるし！）<br></li>
<li><b>ジョブのエラー時にSlackに通知出るようにした</b>り
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/m/manabu-kobayashi/20160215/20160215215536.png" alt="f:id:manabu-kobayashi:20160215215536p:plain" title="f:id:manabu-kobayashi:20160215215536p:plain" class="hatena-fotolife" itemprop="image"></span></li>
</ul>


<p>と、いろいろと運用負荷が下がっています。（通知の機能は、Hinemos3からあった機能を使ってます。）</p>

<h2>Hinemos5.0.1のちょっといけていない点</h2>

<p>で、いいことばかりでもなく、ちょっといけてない点もあったりしてます。<br></p>

<ul>
<li>Hinemos5.0.1でも若干不安定。

<ul>
<li>→なんかメモリリークしてそうな感じ。月に何回かサービス再起動してます。</li>
</ul>
</li>
<li>ジョブスケジュールを臨時で停止したい時、日跨ぎしたいとき不便。（例えば、今日の12時から、明日の12時まで止めたい時とかは2度登録必要。）<br><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/m/manabu-kobayashi/20160215/20160215225823.png" alt="f:id:manabu-kobayashi:20160215225823p:plain" title="f:id:manabu-kobayashi:20160215225823p:plain" class="hatena-fotolife" itemprop="image"></span></li>
<li>ジョブ履歴画面から落ちたジョブのコマンド確認したい時に、グレーアウトされてて見れない。<br>（下の例だと短いコマンドですが、長いコマンドだと途中で切れる。）<br><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/m/manabu-kobayashi/20160215/20160215225116.png" alt="f:id:manabu-kobayashi:20160215225116p:plain" title="f:id:manabu-kobayashi:20160215225116p:plain" class="hatena-fotolife" itemprop="image"></span><br></li>
</ul>


<p>下の２つは、Hinemos3とHinemos5で操作が違って慣れてないだけの気もしますが・・・</p>

<p><br><br></p>

<h2>HInemos5.0.0→5.0.1へのアップグレード手順</h2>

<p>最後に、開発環境にあった、5.0.0環境を5.0.1にアップグレードしてみましたので、簡単に手順を載せておきます。
（そんな難しいことはしてませんが。。）<br></p>

<h3>1. DBのバックアップを取得</h3>

<p>念のため、jvmを停止後バックアップを取得します。</p>

<pre class="code lang-sh" data-lang="sh" data-unlink><span class="synComment"># /opt/hinemos/bin/jvm_stop.sh</span>
<span class="synComment"># /opt/hinemos/sbin/mng/hinemos_backup.sh</span>
<span class="synComment"># /opt/hinemos/bin/jvm_start.sh</span>
</pre>


<h3>2. それぞれサービス停止</h3>

<p>弊社環境では、ManagerとWebクライアントが同居しています。</p>

<pre class="code lang-sh" data-lang="sh" data-unlink><span class="synComment"># service hinemos_web stop</span>
<span class="synComment"># service hinemos_manager stop</span>
</pre>


<h3>3. さらに念をおしてHinemosマネージャver.5.0.0のバックアップを取得</h3>

<pre class="code lang-sh" data-lang="sh" data-unlink><span class="synComment"># cp -rp /opt/hinemos /tmp/hinemos_500_backup</span>
<span class="synComment"># cp -rp /opt/hinemos_web /tmp/hinemos_web_500_backup</span>
</pre>


<h3>4. rpmコマンドでUpdate</h3>

<pre class="code lang-sh" data-lang="sh" data-unlink><span class="synComment"># rpm -Uvh hinemos-manager-5.0.1-1.el7.x86_64.rpm</span>
<span class="synComment"># rpm -Uvh hinemos-web-5.0.1-1.el7.x86_64.rpm</span>
</pre>


<h3>5. serviceファイルをリロードする</h3>

<pre class="code lang-sh" data-lang="sh" data-unlink><span class="synComment"># systemctl daemon-reload</span>
</pre>


<h3>6. それぞれサービス起動</h3>

<pre class="code lang-sh" data-lang="sh" data-unlink><span class="synComment"># service hinemos_manager start</span>
<span class="synComment"># service hinemos_web start</span>
</pre>


<p>って、この記事準備してたら、2016/2/15にHinemos5.0.2が公開されたので、さっそくもう一度試す羽目に。。</p>

<p>Hinemos5への移行記は今後も続きますので楽しみにお待ちください！</p>
</div></div>(Published: Thu, 18 Feb 2016 16:55:41 +0900)<br><br>
<b>えびスタ！#3 特別編「ウェブ版リニューアルの裏側」を開催します</b><br><a href="http://tech.uzabase.com/entry/2015/08/07/123741">http://tech.uzabase.com/entry/2015/08/07/123741</a><br><a data-toggle="collapse" href="#collapse6">View / Hide 'description'</a><br><div id="collapse6" class="panel-collapse collapse"><div class="panel-body"><p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150807/20150807105606.png" alt="f:id:uzabase:20150807105606p:plain" title="f:id:uzabase:20150807105606p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>皆さまこんにちは。</p>

<p>恵比寿のイケてるスタートアップが集まるエンジニア向けの技術勉強会「えびスタ！」の第3回を開催します。
第3回は特別編として1社での単独開催です。先日リニューアルしたばかりのウェブ版の開発の裏側についてお届けします。</p>

<p>もちろん今回もLT枠を用意しています。自社の技術についてアピールしたいという方はぜひLT枠でご参加ください！懇親会ではエビスビールとピザも用意してお待ちしています！</p>

<p>エビスビールを飲みながら、テクノロジーとデザインの未来について語り合いましょう！</p>

<p><iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Febista.connpass.com%2Fevent%2F18581%2F" title="えびスタ！#3 特別編「ウェブ版リニューアルの裏側」 (2015/08/24 19:00〜)" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="http://ebista.connpass.com/event/18581/">えびスタ！#3 特別編「ウェブ版リニューアルの裏側」 (2015/08/24 19:00〜)</a></iframe><cite class="hatena-citation"><a href="http://ebista.connpass.com/event/18581/">ebista.connpass.com</a></cite>
<iframe src="http://blog.newspicks.com/embed/2015web_renewal" title=" ウェブ版リニューアルのお知らせ -  Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"><a href="http://blog.newspicks.com/entry/2015web_renewal"> ウェブ版リニューアルのお知らせ -  Blog</a></iframe><cite class="hatena-citation"><a href="http://blog.newspicks.com/entry/2015web_renewal">blog.newspicks.com</a></cite></p>

<h2>イベント情報</h2>

<ul>
<li>日時：8/24（月）19:00（18:30 開場）</li>
<li>場所：株式会社ニューズピックス（東京都渋谷区恵比寿 1-18-14 恵比寿ファーストスクエア 10 階）</li>
</ul>


<table>
<thead>
<tr>
<th style="text-align:left;">時間</th>
<th style="text-align:left;">発表者</th>
<th style="text-align:left;">内容</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">18:30 ~ 19:00</td>
<td style="text-align:left;">-</td>
<td style="text-align:left;">開場</td>
</tr>
<tr>
<td style="text-align:left;">19:00</td>
<td style="text-align:left;">-</td>
<td style="text-align:left;">乾杯（エビスビールで）</td>
</tr>
<tr>
<td style="text-align:left;">19:00 ~ 19:30</td>
<td style="text-align:left;">甲斐 琢巳（ エクスペリエンスエディター）</td>
<td style="text-align:left;">が目指す新しいニュース体験について</td>
</tr>
<tr>
<td style="text-align:left;">19:30 ~ 20:00</td>
<td style="text-align:left;">戸辺 淳一郎（ ウェブリニューアルプロジェクトリーダー）</td>
<td style="text-align:left;">ウェブリニューアルを成功させたチーム体制「Holacracy（ホラクラシー）」、およびエンジニアとデザイナーの協業について</td>
</tr>
<tr>
<td style="text-align:left;">20:00 ~ 20:20</td>
<td style="text-align:left;">発表者募集中！</td>
<td style="text-align:left;">LTタイム（5分×4人）</td>
</tr>
<tr>
<td style="text-align:left;">20:20 - 21:30</td>
<td style="text-align:left;">-</td>
<td style="text-align:left;">懇親会（エビスビールとピザを用意しています！）</td>
</tr>
</tbody>
</table>


<p><iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Febista.connpass.com%2Fevent%2F18581%2F" title="えびスタ！#3 特別編「ウェブ版リニューアルの裏側」 (2015/08/24 19:00〜)" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="http://ebista.connpass.com/event/18581/">えびスタ！#3 特別編「ウェブ版リニューアルの裏側」 (2015/08/24 19:00〜)</a></iframe><cite class="hatena-citation"><a href="http://ebista.connpass.com/event/18581/">ebista.connpass.com</a></cite></p>
</div></div>(Published: Fri, 07 Aug 2015 12:37:41 +0900)<br><br>
<b>「日本の夏は高温化しているか？」について可視化して確かめてみた。</b><br><a href="http://tech.uzabase.com/entry/2015/08/05/185131">http://tech.uzabase.com/entry/2015/08/05/185131</a><br><a data-toggle="collapse" href="#collapse7">View / Hide 'description'</a><br><div id="collapse7" class="panel-collapse collapse"><div class="panel-body"><p>技術チーム竹内(@<a class="twitter-user-screen-name" href="http://twitter.com/chimerast">chimerast</a>)です。</p>

<p>最近暑いですね。東京では猛暑日の連続が新記録だそうです。</p>

<p><iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Fwww.tenki.jp%2Fforecaster%2Fdiary%2Fdeskpart%2F2015%2F08%2F05%2F29061-summary.html" title="猛暑日　東京新記録　仙台25年ぶり(日直予報士) - tenki.jp" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="http://www.tenki.jp/forecaster/diary/deskpart/2015/08/05/29061-summary.html">猛暑日　東京新記録　仙台25年ぶり(日直予報士) - tenki.jp</a></iframe><cite class="hatena-citation"><a href="http://www.tenki.jp/forecaster/diary/deskpart/2015/08/05/29061-summary.html">www.tenki.jp</a></cite></p>

<p>Twitter上でも最近暑くなったことについて、データを見つつ色々話題になっていたようです。</p>

<ul>
<li><a href="http://togetter.com/li/856042">&#x65E5;&#x672C;&#x306E;&#x590F;&#x306F;&#x9AD8;&#x6E29;&#x5316;&#x3057;&#x3066;&#x308B;&#x304B;&#xFF1F; - Togetter&#x307E;&#x3068;&#x3081;</a></li>
<li><a href="http://togetter.com/li/855995">&#xFF13;&#xFF10;&#x5E74;&#x524D;&#x3068;&#x6BD4;&#x3079;&#x6691;&#x304F;&#x306A;&#x3063;&#x305F;&#x3068;&#x805E;&#x304D;&#x590F;&#x306E;&#x6C17;&#x6E29;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x30B0;&#x30E9;&#x30D5;&#x306B;&#x3057;&#x3066;&#x307F;&#x305F;&rarr;&#x69D8;&#x3005;&#x306A;&#x610F;&#x898B;&#x96C6;&#x307E;&#x308B; - Togetter&#x307E;&#x3068;&#x3081;</a></li>
</ul>


<p>で、せっかくなんで自分でも最近どうなっているのか確かめてみました。</p>

<h3>使ったデータ</h3>

<p><iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Fwww.data.jma.go.jp%2Fgmd%2Frisk%2Fobsdl%2F" title="気象庁|過去の気象データ・ダウンロード" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="http://www.data.jma.go.jp/gmd/risk/obsdl/">気象庁|過去の気象データ・ダウンロード</a></iframe><cite class="hatena-citation"><a href="http://www.data.jma.go.jp/gmd/risk/obsdl/">www.data.jma.go.jp</a></cite></p>

<p>気象庁から東京都の1986年1月から2015年8月4日時点までの月次データを取得してきてみました。</p>

<p>項目は、</p>

<ul>
<li>平均気温(℃)</li>
<li>降水量の合計(mm)</li>
<li>平均湿度(％)</li>
<li>日照時間(時間)</li>
<li>日最高気温の平均(℃)</li>
<li>日最低気温の平均(℃)</li>
</ul>


<p>をとりあえずとってきてみました。</p>

<h3>使ったもの</h3>

<ul>
<li><a href="http://e2d3.org/ja/">E2D3</a></li>
<li><a href="http://dc-js.github.io/dc.js/">dc.js - Dimensional Charting Javascript Library</a></li>
</ul>


<p>Excelでセルにデータを入力するとモダンな感じにビジュアライズ出来るE2D3で、データを多角的に見られるdc.jsを使える「dcjs-example」というテンプレートを使って(作って)可視化してみました。</p>

<p><a href="http://e2d3.org/ja/">E2D3</a>は、Excelから気軽にデータビジュアライズできるようにしようと、現在絶賛開発中のオープンソースソフトウェアです。Excel2013以降もしくは、Excel OnlineのOfficeストアから探せるので使ってみてください。</p>

<h3>できたもの</h3>

<p>こんな感じです(残念ですが、スマホでは表示されません)。マウスで下のグラフを選択すると、選択した範囲でデータがフィルタリングされます。</p>

<p>下の方の青いグラフの縦軸はデータの個数です。</p>

<p><a href="https://s.e2d3.org/e5f3bff/be9fe63b4e1b14e8c644d62e67e9ba2e" target="_blank">別画面で大きく表示する</a></p>

<p><strong>画像ではなくマウスクリックで動かせますよ！</strong></p>

<script type="text/javascript">
if (document.getElementsByTagName("html")[0].getAttribute("data-globalheader-type") === 'pc') {
  document.open();
  document.write('<iframe src="https://s.e2d3.org/e5f3bff/be9fe63b4e1b14e8c644d62e67e9ba2e" width="100%" height="1250" frameborder="0" scrolling="no"></iframe>');
  documnet.close();
}
</script>


<h3>考察</h3>

<p>実際に自分でいろいろ触って見てもらうのが一番ですが、例えば、8月の最低気温の平均を25度以上でフィルタリングしてみると明らかに近年(緑色)の年だけが出てきてしまいますね。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/c/chimerast/20150805/20150805174130.png" alt="f:id:chimerast:20150805174130p:plain" title="f:id:chimerast:20150805174130p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<h3>まとめ</h3>

<p>データを触って見ると色々気づきがあります。</p>

<p><a href="http://e2d3.org/ja/">E2D3</a>を使うとExcelでデータを簡単に入れ替えてデータ可視化を行うことが出来ます(たぶん)。</p>

<p>東京だけでなくいろんな地点のデータを入れてみると面白いと思います。</p>

<h3>いろいろ</h3>

<p><a href="http://www.uzabase.com/">株式会社ユーザベース</a>では、企業・業界・統計データやニュース記事・コメント等データを大量に抱えています。そんなデータをなんとかしてみたいエンジニアを募集しています。</p>

<p><iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.wantedly.com%2Fcompanies%2Fuzabase-inc%2Fprojects" title="株式会社ユーザベースの募集一覧 - Wantedly" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="https://www.wantedly.com/companies/uzabase-inc/projects">株式会社ユーザベースの募集一覧 - Wantedly</a></iframe><cite class="hatena-citation"><a href="https://www.wantedly.com/companies/uzabase-inc/projects">www.wantedly.com</a></cite></p>

<p>あと、OSSで開発している<a href="http://e2d3.org/ja/">E2D3</a>プロジェクトでは、可視化テンプレートを作成してくれるエンジニアや、基盤システムを開発してくれるエンジニアを探しています。</p>

<p><iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fe2d3%2Fe2d3" title="e2d3/e2d3" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="https://github.com/e2d3/e2d3">e2d3/e2d3</a></iframe><cite class="hatena-citation"><a href="https://github.com/e2d3/e2d3">github.com</a></cite></p>
</div></div>(Published: Wed, 05 Aug 2015 18:51:31 +0900)<br><br>
<b>ウェブサービスの品質保証をお弁当作りに例えたら</b><br><a href="http://tech.uzabase.com/entry/2015/07/02/200356">http://tech.uzabase.com/entry/2015/07/02/200356</a><br><a data-toggle="collapse" href="#collapse8">View / Hide 'description'</a><br><div id="collapse8" class="panel-collapse collapse"><div class="panel-body"><p>初めまして。QA（Quality Assurance）を担当しております、えがさ（仮名）と申します。<br />
QAエンジニアとして、主にBtoC向けWebサービスサイトや、プリンタ、<br />
携帯電話などのテスティングや、雑誌の原稿作成のお手伝いなどをしておりました。<br />
ユーザベースに参加してからだいたい半年になります。<br />
<br />
<br />
<span style="font-size: 150%"><b>SPEEDAの簡単な概要</b><br /></span>
<br />
私は、SPEEDAのWebサイト部分がメインの担当ですが、SPEEDAとは。<br />
一言で表すと、「企業情報などを多角的に取り出せるデータベース」です。<br />
お客様がSPEEDAを活用して新たな価値を生み出すための<br />
ベースを支えるのがミッションです。<br />
<br />
<br />
<span style="font-size: 150%"><b>SPEEDAって・・・。</b><br /></span>
<br />
このお仕事をして製品を触るうちに、私はあることを思いつきました。<br />
SPEEDAって・・・まるでお弁当みたいだな、と。<br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150630/20150630113418.png" alt="f:id:uzabase:20150630113418p:plain" title="f:id:uzabase:20150630113418p:plain" class="hatena-fotolife" itemprop="image"></span><br />
<span style="color: #00cc00">
お客様にお出しするためのお弁当箱：インフラ　があり<br />
お客様にコアバリューを提供するデータ：主食　があり<br />
データをおいしく加工するためのおかず：Webサイト　があり。<br />
</span>
全部がそろって活用できる。<br />
<br />
しかしお弁当は温かいほうがよりおいしくいただけます。<br />
ホットな情報には賞味期限もあります。<br />
そのためにアジャイルでの開発が行われています。<br />
<br />
<br />
<span style="font-size: 150%"><b>と　こ　ろ　が</b><br /></span>
<br />
アジャイルのQAはウォーターフォールの開発とは<br />
発想が真逆になることもあり。<br />
最初は目が点になることも多々ありました。<br />
<br />
見る間にリリースされるスケジュール感。<br />
クライテリアの基準。<br />
<br />
IEEE829?　ISO9001?<br />
既存のモデルはアジャイルにそのまま適用できません。<br />
<br />
できればテストケースも使いまわしたい。<br />
漏れなく効率よくまわしたい。<br />
<br />
しかし納期と品質という相反する要素をどうやって折り合いを付けるのか？<br />
のんびりしていると冷めたおいしくないお弁当になってしまいます。<br />
<br />
<br />
<span style="font-size: 150%"><b>残念なお弁当の一例</b><br /></span><br /></p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150623/20150623124057.png" alt="f:id:uzabase:20150623124057p:plain" title="f:id:uzabase:20150623124057p:plain" class="hatena-fotolife" itemprop="image"></span>ケンカでもしましたか？<br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150623/20150623124258.png" alt="f:id:uzabase:20150623124258p:plain" title="f:id:uzabase:20150623124258p:plain" class="hatena-fotolife" itemprop="image"></span>お弁当にする意味が・・・。<br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150623/20150623124520.png" alt="f:id:uzabase:20150623124520p:plain" title="f:id:uzabase:20150623124520p:plain" class="hatena-fotolife" itemprop="image"></span>ゼリーを弁当と言い張る弱さ。<br />
<br />
・・・こんなお弁当を出荷するわけにはいきません。<br />
<br />
そこで、まだ和書では少ないアジャイルQAの本や各種勉強会などで勉強を進めつつ<br />
（KindlePCが日本でも使えるようになったので洋書の<br />
　QA本が買いやすくなりました！これは嬉しい。）<br />
既存のモデルをSPEEDA向けにアレンジして以下のセットを<br />
作りおきすることにしました。<br />
<br />
<br />
<span style="font-size: 150%"><b>お弁当作り置き</b><br /></span></p>

<p><b><span style="color: #286f2c">基礎（下ごしらえ）</span></b></p>

<ul>
<li>要求分析→既存製品でしたので簡素化しました。</li>
<li>ユースケース</li>
<li>機能分析</li>
<li>問題分析（魚の骨）
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150623/20150623144912.png" alt="f:id:uzabase:20150623144912p:plain" title="f:id:uzabase:20150623144912p:plain" class="hatena-fotolife" itemprop="image"></span><br />
SPEEDAの冷蔵庫です<br />
<br />
機能の影響範囲をチェックリストにしたがって見ていけば<br />
基本的なテストケースまでができあがります。<br /></li>
</ul>


<p><br />
<b><span style="color: #286f2c">案件毎のテストセット作成（おかずづくり）</span><br /></b></p>

<p>基礎をベースに、プロジェクト毎のテスト要件定義は、<br /></p>

<ul>
<li>マインドマップ:テスト観点の洗い出し
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150623/20150623141643.png" alt="f:id:uzabase:20150623141643p:plain" title="f:id:uzabase:20150623141643p:plain" class="hatena-fotolife" itemprop="image"></span>ブラウザのマインドマップ<br /></li>
<li>ユースケース：テスト範囲・開発範囲、影響の見積もり</li>
<li>シーケンス図：実務の考慮漏れ対策</li>
<li>状態遷移図：シナリオテストのヒントにする</li>
<li>デシジョンテーブル：パターン洗い出し</li>
</ul>


<p>などを用意してテストセットに落としています。<br />
どれも目新しいものではありませんが、<br />
再利用もしやすく時間もかからず重宝しています。<br />
<br /></p>

<p><b><span style="color: #286f2c">盛り付け（テストラン）</span><br /></b></p>

<ul>
<li>テスト（お弁当を詰める）<br />
　　UT：単体テスト<br />
　　SIT：結合テスト　直交表やシナリオなど<br /></li>
<li>体制（料理人の皆様）<br /></li>
</ul>


<p>こうして、温かいうちに召し上がっていただけるように<br />
こつこつ資産化しています。<br /></p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150623/20150623143617.png" alt="f:id:uzabase:20150623143617p:plain" title="f:id:uzabase:20150623143617p:plain" class="hatena-fotolife" itemprop="image"></span>召し上がれ！<br />
<br />
お弁当QAを体験してみたいエンジニアの皆さん、おいでませ＾－＾<br />
<br /></p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4817192283/hatena-blog-22/"><img src="http://ecx.images-amazon.com/images/I/41VcxPXKoYL._SL160_.jpg" class="hatena-asin-detail-image" alt="ソフトウェアテストHAYST法入門 品質と生産性がアップする直交表の使い方" title="ソフトウェアテストHAYST法入門 品質と生産性がアップする直交表の使い方"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4817192283/hatena-blog-22/">ソフトウェアテストHAYST法入門 品質と生産性がアップする直交表の使い方</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> 吉澤正孝/秋山浩一/仙石太郎</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> 日科技連出版社</li><li><span class="hatena-asin-detail-label">発売日:</span> 2007/07/26</li><li><span class="hatena-asin-detail-label">メディア:</span> 単行本</li><li><span class="hatena-asin-detail-label">購入</span>: 3人 <span class="hatena-asin-detail-label">クリック</span>: 86回</li><li><a href="http://d.hatena.ne.jp/asin/4817192283/hatena-blog-22" target="_blank">この商品を含むブログ (20件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div> サイン本もってます:-D</p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4048672347/hatena-blog-22/"><img src="http://ecx.images-amazon.com/images/I/51Vxllc4BBL._SL160_.jpg" class="hatena-asin-detail-image" alt="ペンとノートで発想を広げる“お絵描き”ノート術 マインドマップ(R)が本当に使いこなせる本 (アスキームック)" title="ペンとノートで発想を広げる“お絵描き”ノート術 マインドマップ(R)が本当に使いこなせる本 (アスキームック)"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4048672347/hatena-blog-22/">ペンとノートで発想を広げる“お絵描き”ノート術 マインドマップ(R)が本当に使いこなせる本 (アスキームック)</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> 遠竹智寿子,月刊アスキー編集部,ブザン・ワールドワイド・ジャパン、ブザン教育協会</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> アスキー・メディアワークス</li><li><span class="hatena-asin-detail-label">発売日:</span> 2008/06/30</li><li><span class="hatena-asin-detail-label">メディア:</span> ムック</li><li><span class="hatena-asin-detail-label">購入</span>: 40人 <span class="hatena-asin-detail-label">クリック</span>: 957回</li><li><a href="http://d.hatena.ne.jp/asin/4048672347/hatena-blog-22" target="_blank">この商品を含むブログ (66件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div>　さらっと読んですぐ使いこなしたい方に</p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4798118443/hatena-blog-22/"><img src="http://ecx.images-amazon.com/images/I/51hcs7og2fL._SL160_.jpg" class="hatena-asin-detail-image" alt="ダイアグラム別UML徹底活用 第2版 (DB Magazine SELECTION)" title="ダイアグラム別UML徹底活用 第2版 (DB Magazine SELECTION)"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4798118443/hatena-blog-22/">ダイアグラム別UML徹底活用 第2版 (DB Magazine SELECTION)</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> 井上樹</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> 翔泳社</li><li><span class="hatena-asin-detail-label">発売日:</span> 2011/02/25</li><li><span class="hatena-asin-detail-label">メディア:</span> 大型本</li><li><span class="hatena-asin-detail-label">購入</span>: 1人 <span class="hatena-asin-detail-label">クリック</span>: 5回</li><li><a href="http://d.hatena.ne.jp/asin/4798118443/hatena-blog-22" target="_blank">この商品を含むブログ (2件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div>　Kindle版もあります</p>
</div></div>(Published: Thu, 02 Jul 2015 20:03:56 +0900)<br><br>
<b>たのしいフォントえらび 〜 GoogleやDEAN & DELUCA、SPEEDAの事例から 〜</b><br><a href="http://tech.uzabase.com/entry/2015/06/11/164718">http://tech.uzabase.com/entry/2015/06/11/164718</a><br><a data-toggle="collapse" href="#collapse9">View / Hide 'description'</a><br><div id="collapse9" class="panel-collapse collapse"><div class="panel-body"><p>こんにちは。ユーザベースのデザイナー、広田です。企業・業界情報サービス「SPEEDA」を担当しています。</p>

<p>とうとう、ブログの順番が回ってきました。
UZABASE Tech Blogの記事ネタは、ユーザベースのエンジニアが一堂に集まる週一のミーティング、そこで話す持ち回りのライトニングトークが元になっています。もちろん、それがすべてではありませんが、記事を書く順番としてはそんな感じです。
そして、2月に入社した私にも、ライトニングトークの順番、すなわちブログを書く順番が回ってきたというわけです。</p>

<p>テックミーティングの参加者は、当然ですが、エンジニアばかり。
なので、私にとってはチンプンカンプンのエンジニア用語が並ぶわけですが、そんな中で私が話せることってなんだろう？と（一応、真剣に）考えた結果、エンジニアにとっても身近であろうフォントについて話すことにしました。</p>

<p>というのも、入社以来、ずっと気になっていたSPEEDAのロゴのルーツ。その答えを見つけた良いタイミングでもあったので。</p>

<p>・・・と、ちょっと前置きが長くなってしまいましたが、テーマは「たのしいフォントえらび 〜 GoogleやDEAN &amp; DELUCA、SPEEDAの事例から 〜」に決定しました。</p>

<h3>目次</h3>

<p>・<a href="#section1">SPEEDAのロゴのルーツ</a><br>
・<a href="#section2">SPEEDAのお仲間さがし</a><br>
・<a href="#section3">有名ブランドのロゴは何のフォントを使ってる？</a><br>
・<a href="#section4">もしもユーザベースが第3の事業を始めたら...</a></p>

<h3><a name="section1"></a>SPEEDAのロゴのルーツ</h3>

<p>さて、本題のSPEEDAのロゴですが、残念ながらこのロゴの成り立ちを語れる人を見つけることはできませんでした。それで、ずっとモヤモヤした毎日を過ごしていたわけです。これに似たフォントはなんだろう、、、と。そうやってSPEEDAのロゴのフォントのことをずっと想っていたら、とうとう出会ってしまったんです。</p>

<p>それは、ある日、突然。まるで天から降ってきたかのように。久しぶりに見たフォント本の中にいました。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150531/20150531104840.jpg" alt="f:id:uzabase:20150531104840j:plain" title="f:id:uzabase:20150531104840j:plain" class="hatena-fotolife" itemprop="image"></span>
2013年発行の「<a href="http://www.graphicsha.co.jp/shosai.php?snumber3=1305">TYPOGRAPHY03</a>」（グラフィック社）</p>

<p>このムックのここに。ほら。SPEEDAのロゴにそっくりでしょ？
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150531/20150531105845.jpg" alt="f:id:uzabase:20150531105845j:plain" title="f:id:uzabase:20150531105845j:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>そう「BANK GOTHIC」というフォントです。
（ムックには「 BANNK GOTHIC」とありますが、これは誤植ですね。）</p>

<p>このフォントに出会った瞬間、もうね、なんとも言えない晴れ晴れした気持ちになったんですよ。出会うべくして出会った赤い糸＝運命の人？みたいな。それはおおげさですが。。。しかも、フォント名にBANK（銀行）とあるなんて。さまざまな企業の財務情報や業界の動向を提供するSPEEDAにぴったりのフォントですね。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150531/20150531111126.png" alt="f:id:uzabase:20150531111126p:plain" title="f:id:uzabase:20150531111126p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>BANK GOTHICはサンセリフ、ウロコのない書体です。その中でも幾何学的図形のような骨格を持つジオメトリック・サンセリフです。
ほら、見てください。ほぼ正方形の形をしていますよね？（青枠に注目）</p>

<p>BANK GOTHICの特徴を他にも挙げると、GやO、Cに見られる正方形部分、この内側部分が直角になっているのに対して、外側が丸みを帯びている点ですね（赤の丸に注目）</p>

<p>参考までに、<a href="http://www.fonts.com/ja/browse/designers/morris-fuller-benton">fonts.com</a> から引用したBANK GOTHICの生みの親、Morris Fuller Bentonについて記しておきます。</p>

<blockquote><p>Morris Fuller Benton – born 1872 in Milwaukee, USA, died 1948 in Morristown, USA – engineer, type designer. After training as a mechanic and engineer, Benton jointed the ATF, where he became type designer and in-house designer with ATF.</p></blockquote>

<p>フォント名が明らかになったところで、SPEEDAのロゴの検証をしていきましょう。</p>

<p>まずは現在のロゴ。これが最終形です。
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150531/20150531112457.png" alt="f:id:uzabase:20150531112457p:plain" title="f:id:uzabase:20150531112457p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>そしてこれが一世代前のロゴ。いつまで使われていたのか、正確なところはわかりません。
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150531/20150531112712.png" alt="f:id:uzabase:20150531112712p:plain" title="f:id:uzabase:20150531112712p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>今のロゴと比較すると一世代前のロゴは少しスリムでしたね。今のロゴのほうが骨太です。その他にも、PとDに変化が見られますね。現在のロゴのほうが尖った印象になっているとと同時に、より堂々とした感じが伝わってきます。そして男性的。</p>

<p>ここからは想像ですが、こんな流れでSPEEDAのロゴができあがったのではないかと。
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150603/20150603195800.png" alt="f:id:uzabase:20150603195800p:plain" title="f:id:uzabase:20150603195800p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<ol>
<li>BANK GOTHICでSPEEDAを組む …（ A）</li>
<li>（A）をベースに文字の横幅を少しスリムにする（正方形から長方形に）...（B）</li>
<li>微調整（特にSやE）を繰り返して、一世代前のロゴが完成…（C）</li>
<li>さらに微調整を繰り返して、今のロゴが完成…（D）</li>
</ol>


<h3><a name="section2"></a>SPEEDAのお仲間さがし</h3>

<p>SPEEDAのロゴのルーツを知り、俄然、BANK GOTHICが身近になった私。そこで、BANK GOTHICを使ったロゴのお仲間を探してみました。</p>

<p>Googleで検索してみると、いろいろ見つかります。
いずれもロゴの形を見ての想像でしかありませんが、<a href="http://www.nintendo.co.jp/ds/">NINTENDO DS</a>のNINTENDOやER緊急救命室のER、浅草にあるホテル<a href="http://www.agoraplace-asakusa.com/">AGOLA PLACE</a>などはBANK GOTHICではないかと思います。</p>

<p>そして、私たちのオフィス近くにもBANK GOTHICを見つけました。
恵比寿駅からオフィスに向かう途中にある恵比寿ビジネスタワー。下の写真をご覧ください。この欧文ロゴがBANK GOTHICっぽいんです。
昨年12月、ユーザベースは外苑前からここ恵比寿に移転しましたが、もしかしたら引っ越し先はこのビルにすべきだったかもしれませんね、、、なんて思ったり。
<span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150531/20150531115149.jpg" alt="f:id:uzabase:20150531115149j:plain" title="f:id:uzabase:20150531115149j:plain" class="hatena-fotolife" itemprop="image"></span></p>

<h3><a name="section3"></a>Google、VOGUE、Dean &amp; Delucaなどのブランドロゴはどのフォントを使ってる？</h3>

<p>ロゴとフォントのことをいろいろ調べていたら、有名ブランドのロゴのフォントも気になってきました。そこで、書籍やインターネットなどで調べてみました。</p>

<h4>LOUIS VUITTON</h4>

<p>多くの人の憧れのファッションブランド <a href="http://jp.louisvuitton.com/">LOUIS VUITTON</a>。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150602/20150602000621.png" alt="f:id:uzabase:20150602000621p:plain" title="f:id:uzabase:20150602000621p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>これはMacにも標準で搭載されているFutura（フツラ、フーツラ）で組まれたフォントです。字と字の間を調整している以外は、ほぼ原型のまま使っているっぽいです。実は、ユーザベースのロゴもFuturaなんですね。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150602/20150602224304.png" alt="f:id:uzabase:20150602224304p:plain" title="f:id:uzabase:20150602224304p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<h4>VOGUE</h4>

<p>続いて老舗の女性ファッション誌 <a href="http://www.vogue.co.jp/">VOGUE</a>。このロゴで使われているのは、Didot（ディド）です。こちらもMacをお使いの方は持っているんじゃないでしょうか？</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150602/20150602002309.jpg" alt="f:id:uzabase:20150602002309j:plain" title="f:id:uzabase:20150602002309j:plain" class="hatena-fotolife" itemprop="image"></span>
<a href="http://(http://www.vogue.co.jp/">http://www.vogue.co.jp/</a></p>

<p>あらためて書店で平積みされている女性ファッション誌を見てみると、Didotのように、細いところと太いところの差がはっきりしているロゴが多いですね。特に大人の女性向けファッション誌に。まるで女性の理想的なプロポーション、華奢に見えるのに出ているところは出ている、、、みたいな。そんな印象を受けるフォントです。Didotはそれに加えて丸みもあるので、女性らしいしなやかさも感じます。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150602/20150602224332.png" alt="f:id:uzabase:20150602224332p:plain" title="f:id:uzabase:20150602224332p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<h4>DEAN &amp; DELUCA</h4>

<p>NY生まれのフード＆カフェのお店。見たことのないオシャレなパッケージの食材が並んでいて、本当に楽しいお店です。このロゴはCopperplate Gothicですね。いろんなところで目にする人気のフォントです。こちらも私のMacにはインストールされています。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150602/20150602003156.jpg" alt="f:id:uzabase:20150602003156j:plain" title="f:id:uzabase:20150602003156j:plain" class="hatena-fotolife" itemprop="image"></span>
<a href="http://www.deandeluca.com/">http://www.deandeluca.com/</a></p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150602/20150602224348.png" alt="f:id:uzabase:20150602224348p:plain" title="f:id:uzabase:20150602224348p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<h4>Google</h4>

<p>そして、いつもお世話になっているGoogle。このロゴで使われているのはCatull BQです。ほぼ手を加えず原型のまま使っているっぽいです。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150602/20150602003639.jpg" alt="f:id:uzabase:20150602003639j:plain" title="f:id:uzabase:20150602003639j:plain" class="hatena-fotolife" itemprop="image"></span>
<a href="http://www.google.co.jp/">http://www.google.co.jp/</a></p>

<p><iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.myfonts.com%2Ffonts%2Fberthold%2Fcatull-bq%2F" title="Catull® BQ - Desktop font « MyFonts" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="https://www.myfonts.com/fonts/berthold/catull-bq/">Catull® BQ - Desktop font « MyFonts</a></iframe><cite class="hatena-citation"><a href="https://www.myfonts.com/fonts/berthold/catull-bq/">www.myfonts.com</a></cite></p>

<h3><a name="section4"></a>もしもユーザベースが第3の事業を始めたら...</h3>

<p>さて、ここからは私の妄想です。「もしもユーザベースが第3の事業を始めたら…」を妄想して、こんなときにはこんなフォントが合うんじゃ？という視点で、フォントを探してみました。</p>

<blockquote><p>ユーザベースは、法人向け業界分析情報データベース「SPEEDA」と、経済情報に特化したニュース共有サービス「」という2つのプロダクトの開発・運営を行っています。</p></blockquote>

<h4>もしもユーザベースが「ホラー映画」を作ったら...</h4>

<p>そこで、こわーいフォントを探してみました。</p>

<p>さて、どうでしょう？　これはAdobe Creative CloudのTypekitにもあるAdobeのIronwoodというフォントです。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150603/20150603232308.jpg" alt="f:id:uzabase:20150603232308j:plain" title="f:id:uzabase:20150603232308j:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p><a href="https://www.fontshop.com/families/ironwood">https://www.fontshop.com/families/ironwood</a></p>

<p>こうやってみるとそんなに怖そうに見えませんが、少し色を工夫すると、イギリスあたりの誰も住んでいない古い館っぽっく見えてきませんか？　まるでドラキュラの棲家のような。また、不安定な 3本のラインがなかなか良い効果が出ているようで、「裏切り」や「壊れる」といったサスペンス映画の要素も見えてきます。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150604/20150604002217.jpg" alt="f:id:uzabase:20150604002217j:plain" title="f:id:uzabase:20150604002217j:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>dafont.comを探せば、それはそれは怖いフォントも他にもたくさん見つかるんですが、お勧めしてもいいものとそうでないものの選別が難しいので、ここで紹介するのはやめました。</p>

<h4>もしもユーザベースが「自然派化粧品」を売り出したら...</h4>

<p>続いて、同じくAdobe Creative CloudのTypekitにもあるBlakely というフォントを使って、自然派化粧品のロゴを作ってみました。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150604/20150604225039.jpg" alt="f:id:uzabase:20150604225039j:plain" title="f:id:uzabase:20150604225039j:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p><a href="https://www.fontshop.com/families/blakely">https://www.fontshop.com/families/blakely</a></p>

<p>上の図はBoldですが、一番細いLightを使うと印象がぐっと変わります。このLightを使って、今度はNewsPIcksでロゴを作ってみました。</p>

<p>ターゲットは20代女性くらい？　「いつまでもみずみずしいお肌をキープしたい女性へ」「敏感肌のあなたへ」といったところかな。とても涼しげな感じに仕上がったので、今のこの暑い季節に売り出したいところですね。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150604/20150604225617.png" alt="f:id:uzabase:20150604225617p:plain" title="f:id:uzabase:20150604225617p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<h4>もしもユーザベースが「子ども服ブランド」を立ち上げたら…</h4>

<p>最後に、もしもユーザベースが「子ども服ブランド」を立ち上げたら…と題して、楽しくてやさしいフォントを探してみました。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150603/20150603221133.jpg" alt="f:id:uzabase:20150603221133j:plain" title="f:id:uzabase:20150603221133j:plain" class="hatena-fotolife" itemprop="image"></span>
<a href="https://www.fontshop.com/families/scruff">https://www.fontshop.com/families/scruff</a></p>

<p>どうでしょうか？ これは scruff というフォントです。
おもちゃ箱をひっくり返したように、とっても楽しそうですよね。</p>

<p>「S」なんて、おもちゃの電車を走らせる線路に見えてくるし、「f」が2つ並んでいるところは双子の兄弟がひげダンスしているように見えてくる。ほら、他の文字も全部楽しそうですよね。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150603/20150603224352.jpg" alt="f:id:uzabase:20150603224352j:plain" title="f:id:uzabase:20150603224352j:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>このフォントは、元気な子ども服ブランドや知育の玩具メーカーのロゴにきっと似合うはず。例えば、こんな感じでね。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150604/20150604220204.png" alt="f:id:uzabase:20150604220204p:plain" title="f:id:uzabase:20150604220204p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>ちなみに、キャッチコピーで使用したフォントは「<a href="https://www.fontshop.com/families/blakely">やさしさゴシック</a>」というフリーのフォントです。日本語のフリーフォントでこれだけ文字の種類が揃っているのは珍しいのでとても貴重です。</p>

<p>長々とフォントについて書きましたが、最後に、敬愛する日本人フォントデザイナー、小林章さんの言葉を載せて、締めくくりたいと思います。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150531/20150531130901.png" alt="f:id:uzabase:20150531130901p:plain" title="f:id:uzabase:20150531130901p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>ユーザベースではエンジニアを募集しています！</p>

<ul>
<li>大規模で多種多様なデータを扱うことに興味がある方</li>
<li>とにかく技術が好きな方</li>
<li>様々なバックグラウンドを持つ人材と働いてみたい方</li>
</ul>


<p>以上に一つでも当てはまる方は、一度オフィスに遊びに来てください！</p>

<p><iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.wantedly.com%2Fprojects%2F11497" title="巨大金融メディアに打ち勝つサービスをつくりたいエンジニアWanted! by 株式会社ユーザベース" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="https://www.wantedly.com/projects/11497">巨大金融メディアに打ち勝つサービスをつくりたいエンジニアWanted! by 株式会社ユーザベース</a></iframe><cite class="hatena-citation"><a href="https://www.wantedly.com/projects/11497">www.wantedly.com</a></cite></p>

<p><b>【参考サイト・書籍】</b></p>

<p><iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Fmatome.naver.jp%2Fodai%2F2133151854135573901" title="有名企業やサイトのロゴに使用されているフォントまとめ - NAVER まとめ" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="http://matome.naver.jp/odai/2133151854135573901">有名企業やサイトのロゴに使用されているフォントまとめ - NAVER まとめ</a></iframe><cite class="hatena-citation"><a href="http://matome.naver.jp/odai/2133151854135573901">matome.naver.jp</a></cite></p>

<p><iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Fmatome.naver.jp%2Fodai%2F2135168573243723001" title="名作フォントと有名ロゴのおいしい関係 - NAVER まとめ" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="http://matome.naver.jp/odai/2135168573243723001">名作フォントと有名ロゴのおいしい関係 - NAVER まとめ</a></iframe><cite class="hatena-citation"><a href="http://matome.naver.jp/odai/2135168573243723001">matome.naver.jp</a></cite></p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4766124758/hatena-blog-22/"><img src="http://ecx.images-amazon.com/images/I/51fM19fMW2L._SL160_.jpg" class="hatena-asin-detail-image" alt="TYPOGRAPHY(タイポグラフィ)03  デザイナーなら覚えておくべき 厳選フォント350" title="TYPOGRAPHY(タイポグラフィ)03  デザイナーなら覚えておくべき 厳選フォント350"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4766124758/hatena-blog-22/">TYPOGRAPHY(タイポグラフィ)03  デザイナーなら覚えておくべき 厳選フォント350</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> グラフィック社編集部</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> グラフィック社</li><li><span class="hatena-asin-detail-label">発売日:</span> 2013/05/07</li><li><span class="hatena-asin-detail-label">メディア:</span> 大型本</li><li><a href="http://d.hatena.ne.jp/asin/4766124758/hatena-blog-22" target="_blank">この商品を含むブログ (4件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4568504287/hatena-blog-22/"><img src="http://ecx.images-amazon.com/images/I/51Dtxr9LBSL._SL160_.jpg" class="hatena-asin-detail-image" alt="フォントのふしぎ  ブランドのロゴはなぜ高そうに見えるのか？" title="フォントのふしぎ  ブランドのロゴはなぜ高そうに見えるのか？"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4568504287/hatena-blog-22/">フォントのふしぎ  ブランドのロゴはなぜ高そうに見えるのか？</a></p><ul><li><span class="hatena-asin-detail-label">作者:</span> 小林章</li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> 美術出版社</li><li><span class="hatena-asin-detail-label">発売日:</span> 2011/01/17</li><li><span class="hatena-asin-detail-label">メディア:</span> 単行本（ソフトカバー）</li><li><span class="hatena-asin-detail-label">購入</span>: 11人 <span class="hatena-asin-detail-label">クリック</span>: 235回</li><li><a href="http://d.hatena.ne.jp/asin/4568504287/hatena-blog-22" target="_blank">この商品を含むブログ (33件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4756245676/hatena-blog-22/"><img src="http://ecx.images-amazon.com/images/I/51CbPBYN4VL._SL160_.jpg" class="hatena-asin-detail-image" alt="新しい価値を生み出すためのブランディングプロセス" title="新しい価値を生み出すためのブランディングプロセス"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4756245676/hatena-blog-22/">新しい価値を生み出すためのブランディングプロセス</a></p><ul><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> パイインターナショナル</li><li><span class="hatena-asin-detail-label">発売日:</span> 2015/01/20</li><li><span class="hatena-asin-detail-label">メディア:</span> 単行本</li><li><a href="http://d.hatena.ne.jp/asin/4756245676/hatena-blog-22" target="_blank">この商品を含むブログを見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>
</div></div>(Published: Thu, 11 Jun 2015 16:47:18 +0900)<br><br>
<b>ユーザベースの自由な社風を支える「みんなの会」のつくり方（動画環境編）</b><br><a href="http://tech.uzabase.com/entry/2015/06/02/183335">http://tech.uzabase.com/entry/2015/06/02/183335</a><br><a data-toggle="collapse" href="#collapse10">View / Hide 'description'</a><br><div id="collapse10" class="panel-collapse collapse"><div class="panel-body"><p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150526/20150526122646.jpg" alt="f:id:uzabase:20150526122646j:plain" title="f:id:uzabase:20150526122646j:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>企業・業界情報データベース<a href="http://www.uzabase.com/speeda/">「SPEEDA」</a>の開発チームに所属している川口と申します。</p>

<p>ユーザベースで大事にしている価値観として、「<strong>自由主義で行こう</strong>」があります。きちんと仕事の結果を出せば、出社時間や服装は自由で、出社の義務もないというものです。</p>

<p>一方、自由に対する責任の一つとして、毎週一回の全社会議だけは全員出席する必要があります。この全社会議が「<strong>みんなの会（Town Hall Meeting）</strong>」です。ここでは各チームの進捗報告やリリースされた機能の発表、事務連絡や新メンバーの紹介などを行っています。（以前は「全体進捗会議」という名前でしたが、社内投票の結果、この名前になりました。）</p>

<p>私が入社した2011年当時、オフィスは東京だけで、全体会議の出席メンバーも20人ぐらいでしたので、会議室に全員入り切るぐらいでした。それからオフィスも2回移転して、上海、シンガポール、香港と海外にも拠点も広がり、全体で160人前後のメンバーになりました。今でも全員が出席するスタイルでの会議は続いているのですが、各海外拠点への生中継を毎回行うようになり、海外メンバーからの発表や質問なども可能にしています。</p>

<p>このシステムの構築やオペレーションには私もかかわっており、試行錯誤を続けながらバージョンアップしてきました。この記事では、そんな「みんなの会」を支えている現在のシステムについて少しご紹介したいと思います。</p>

<p>なお、「みんなの会」については、先日公開されたSELECKの記事や、本ブログの竹内（当社チーフテクノロジスト）の記事でもご紹介しています。</p>

<p><iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fseleck.cc%2Farticle%2F11" title="ベンチャーからグローバル企業へ　ユーザベースCTOが作った「ニコ動」式の全社会議 | SELECK" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="https://seleck.cc/article/11">ベンチャーからグローバル企業へ　ユーザベースCTOが作った「ニコ動」式の全社会議 | SELECK</a></iframe><cite class="hatena-citation"><a href="https://seleck.cc/article/11">seleck.cc</a></cite>
<iframe src="http://tech.uzabase.com/embed/2015/06/01/143202" title="ニコニコメソッドプレゼンを全社会議に取り入れてみたら会議が面白くなった - UZABASE Tech Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"><a href="http://tech.uzabase.com/entry/2015/06/01/143202">ニコニコメソッドプレゼンを全社会議に取り入れてみたら会議が面白くなった - UZABASE Tech Blog</a></iframe><cite class="hatena-citation"><a href="http://tech.uzabase.com/entry/2015/06/01/143202">tech.uzabase.com</a></cite></p>

<h3>目次</h3>

<ul>
<li><a href="#1">Zoomを使って全世界と中継</a></li>
<li><a href="#2">スライドの配信もZoomの画面共有で</a></li>
<li><a href="#3">「参加者の顔が見えること」が何より重要</a></li>
<li><a href="#4">Wii Uのマイクも使って音声環境を改善</a></li>
<li><a href="#5">有志メンバーによる同時通訳</a></li>
<li><a href="#6">ニコニコメソッドプレゼンで一体感のあるコミュニケーション</a></li>
<li><a href="#7">まとめ</a></li>
</ul>


<h2><a name="1"></a>Zoomを使って全世界と中継</h2>

<p>「みんなの会」の中心となるWeb会議システムですが、<a href="http://zoom.us/">「Zoom」</a>という製品を使用しています。いろいろな製品がある中で、「Zoom」では最大100ユーザまで同時接続可能というところが大きな特長です。</p>

<p>ユーザベースで現在使用しているのは25ユーザまでのプランで、海外拠点の各メンバーが接続するだけでなく、在宅や出張先からのリモートでの参加も出来ています。</p>

<p>なお、Zoomの無料アカウントでは最大40分で会議が切れてしまうという制限があるため、長時間会議を行う場合はProアカウント（$9.99/Month）が必要になります。</p>

<p>会議への参加は、主催者からの招待メール中のリンクをクリックすることで行いますが、初めて参加する場合はアプリのインストールも自動的に行われます。</p>

<p>Windows、Macはもちろん、iPad・iPhoneやAndroid用のアプリも公開されていて、スマートフォンでも後述の画面共有やチャットを含めた一通りの機能が可能です。</p>

<p>「Zoom」はなかなか高機能でよく出来ていると思うのですが、「Skype」などに比べると若干取っつきにくいためか、日本ではあまり知られていなさそうです。これからの普及に期待しています。</p>

<p><iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Fzoom.us%2F" title="Video Conferencing, Web Conferencing, Online Meetings, Screen Sharing" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="http://zoom.us/">Video Conferencing, Web Conferencing, Online Meetings, Screen Sharing</a></iframe><cite class="hatena-citation"><a href="http://zoom.us/">zoom.us</a></cite></p>

<h2><a name="2"></a>スライドの配信もZoomの画面共有で</h2>

<p>「みんなの会」では、東京オフィスのプロジェクター画面に、発表内容をまとめたプレゼンテーションファイルを映します。同時に、「Zoom」の画面共有機能によって、海外やリモートでの参加者にも同じ画面が表示できます。</p>

<p>リモート表示ではレスポンスが気になるところですが、スライド切り替え時の反映もスムーズですし、画質がオリジナルより大きく劣ることもありませんので、十分実用的だと思います。</p>

<p>「Zoom」の画面共有では、共有対象のウィンドウをアプリ単位もしくはデスクトップ全体で指定します。「みんなの会」のプレゼンテーションファイルはGoogle Driveのスライド形式（Googleスライド）で作成しており、ブラウザにてプレゼンテーションを行いますので、Google Chromeのウィンドウを共有しています。ケースバイケースですが、他の会議では、お手軽にデスクトップ全体を共有することも多いです。</p>

<p>ところで、スライドを開いて、メニューから「プレゼンテーションを開始」を実行すると、プレゼンテーションが全画面で表示されますが、Zoomでブラウザウィンドウを共有している場合は、全画面表示は共有対象外となるので、他のユーザにスライド画面が映らなくなってしまいます。</p>

<p>そこで、Google Chromeを使用する場合のみですが、「スピーカーノートを使って開始」のメニューを実行すると、ブラウザのタブ内にプレゼンテーション画面が表示されます。少しマニアックな話ですが、Zoomを使ってGoogleスライドの画面共有を行う場合はこの方法がおすめです。</p>

<p>ちなみにGoogleスライドですが、PowerPoint等と比較すると凝ったデザインや動きのものは作成しにくいですが、一つのファイルを複数人で同時に編集することが可能で、マージや差し替えの手間が省けるので、こういった会議の資料作成には非常に便利です。</p>

<p>なお、PowerPoint等のプレゼンテーションファイルからの変換も可能ですが、レイアウトが崩れることが多いので、注意が必要です。</p>

<p><iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.google.com%2Fintl%2Fja_jp%2Fdrive%2F" title="Google ドライブ - 写真やドキュメントなど、ファイルのクラウド ストレージとバックアップ" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="https://www.google.com/intl/ja_jp/drive/">Google ドライブ - 写真やドキュメントなど、ファイルのクラウド ストレージとバックアップ</a></iframe><cite class="hatena-citation"><a href="https://www.google.com/intl/ja_jp/drive/">www.google.com</a></cite></p>

<h2><a name="3"></a>「参加者の顔が見えること」が何より重要</h2>

<p>「Zoom」では、会議の参加者の映像を画面に映すことが可能です。参加者がカメラを持っている場合に限定されますが、やはり声だけ聞こえるよりも、顔の表情も一緒に見えるのは重要なポイントだと思います。</p>

<p>なお、東京オフィスの場合は会議室に何十人ものメンバーが集まるので、通常のWebカメラでは全員を1つの画面に映すことは困難です。そこでいろいろ試しているので、少し紹介します。</p>

<ul>
<li>BUFFALOの<a href="http://buffalo.jp/product/multimedia/web-camera/bsw180abk/">「BSW180ABK」</a>というWebカメラは、180°の広角レンズで会議室全体の様子を映すことが出来て便利です。
ただし、ズーム機能も無いため、細かい部分を映すのには向いていません。</li>
<li>発表者の表情が見えなかったり、質問者が誰か分からないという意見が挙がっていたので、私物のDVビデオカメラを持ち込んでみました。カメラマンが発表者や質問者にズームしたり、会議室全体を映したりと工夫出来るし、映りが良いと好評なようです。</li>
</ul>


<p>しばらくはDVビデオカメラを使用してみたいと思いますが、段々と設備が大がかりになってきました。</p>

<p>なお、MacへのDVビデオカメラの接続ですが、<a href="http://store.apple.com/jp/product/MD464ZM">「Thunderbolt - FireWireアダプタ」</a>と9pin-4pinのFireWireケーブルを使用しています。これで、MacからはWebカメラと同様のビデオデバイスとして認識されますので、Zoomの設定画面にて選択することが可能になります。</p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B00E0D1RWI/hatena-blog-22/"><img src="http://ecx.images-amazon.com/images/I/31kRCg1Rh-L._SL160_.jpg" class="hatena-asin-detail-image" alt="iBUFFALO マイク内蔵60万画素WEBカメラ 180°広角モデル BSW180ABK" title="iBUFFALO マイク内蔵60万画素WEBカメラ 180°広角モデル BSW180ABK"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B00E0D1RWI/hatena-blog-22/">iBUFFALO マイク内蔵60万画素WEBカメラ 180°広角モデル BSW180ABK</a></p><ul><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> バッファロー</li><li><span class="hatena-asin-detail-label">発売日:</span> 2013/08/25</li><li><span class="hatena-asin-detail-label">メディア:</span> Personal Computers</li><li><a href="http://d.hatena.ne.jp/asin/B00E0D1RWI/hatena-blog-22" target="_blank">この商品を含むブログを見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div>
<div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B008RXYOKY/hatena-blog-22/"><img src="http://ecx.images-amazon.com/images/I/21sRgqMdUKL._SL160_.jpg" class="hatena-asin-detail-image" alt="アップル Thunderbolt - FireWireアダプタ MD464ZM/A" title="アップル Thunderbolt - FireWireアダプタ MD464ZM/A"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B008RXYOKY/hatena-blog-22/">アップル Thunderbolt - FireWireアダプタ MD464ZM/A</a></p><ul><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> アップル</li><li><span class="hatena-asin-detail-label">メディア:</span> Personal Computers</li><li><a href="http://d.hatena.ne.jp/asin/B008RXYOKY/hatena-blog-22" target="_blank">この商品を含むブログを見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<h2><a name="4"></a>Wii Uのマイクも使って音声環境を改善</h2>

<p>「みんなの会」では、海外を含めて、毎回20台ぐらいのPCがWeb会議に参加しています。</p>

<p>インターネットを使用しているので、一時的に音声が途切れたりする時もありますが、音声の品質や遅延はあまり気にならないため、その点でもZoomは高評価です。</p>

<p>ところで、会議室に複数の人が集まってWeb会議に参加する場合、通常ではマイクは一つだけ設置すると思いますが、マイクから離れた場所にいる人の声が聞き取りづらく、聞く側にとってストレスになることがしばしばあります。</p>

<p>そこで、マイクについてもいろいろ試しているので、少し紹介いたします。</p>

<ul>
<li>SANWA DIRECTの<a href="http://direct.sanwa.co.jp/ItemPage/400-MC001">「400-MC001」</a>というUSB接続のスタンドマイクは、高集音かつ全指向性の本格的な製品です。
声の大きさにもよりますが、10mぐらい離れた場所に座っている人の発言でもちゃんと拾ってくれるので、なかなか優秀です。</li>
<li><a href="http://www.nintendo.co.jp/wiiu/hardware/accessories/index.html">Nitendo Wii U</a>のワイヤレスマイク「WUP-019」ですが、実はWindowsやMacでも使用することが出来ます。マイクのレシーバーをUSB端子に差すだけで、Macから音声入力デバイスと認識されるので、とても簡単です。音声も非常にクリアに聞こえるので、大いに活用しています。</li>
<li>Wii Uでは2本同時に使用出来るそうなので、Macにワイヤレスマイク「WUP-019」を2台繋いでみましたが、残念ながら1つしか認識しないようです。</li>
</ul>


<p>ワイヤレスマイクとスタンドマイクを同時に使用することが出来れば最高なのですが、Zoomではマイク、スピーカーとも1つのデバイスしか設定出来ません。</p>

<p>そこで、何か手は無いかと探したところ、Macでは以下のソフトウェアを組み合わせることで可能ということが分かりました。</p>

<ul>
<li><a href="https://code.google.com/p/soundflower/">Soundflower</a>

<ul>
<li>「仮想サウンドデバイス」で、例えばMacでインターネット中継を行う時に、同じMacで再生した音楽ファイルを配信するような場合に使用出来ます。</li>
</ul>
</li>
<li><a href="http://blog.kawauso.com/ladiocast">LadioCast</a>

<ul>
<li>複数デバイスからの音声入力をミックスしたり、複数デバイスに出力することの出来るミキサーです。</li>
</ul>
</li>
</ul>


<p>LadioCastでワイヤレスマイクと集音マイクをミキシングしてSoundflowerに出力し、Zoomの音声入力デバイスとしてSoundflowerを指定することで、両方のマイクの音声がWeb会議の参加者に聞こえるという仕組みです。</p>

<p>これによって、発表者がワイヤレスマイクで話しながら、聴衆の拍手や笑い声を集音マイクで同時に拾うことが出来ています。さらに、LadioCastで発表者の声に合わせて音量を調整することで、より聞き取りやすくなっていると思います。</p>

<p>また、現在のオフィスでは、HDMI出力のプロジェクタにスピーカーが付いており、東京オフィス以外のメンバーの発言はこのプロジェクターから聞こえます。</p>

<p>ハウリングを避けるため、通常ではマイクの音はスピーカーから聞こえないのですが、LadioCastの設定を工夫して、ワイヤレスマイクの音声のみ、プロジェクターに出すようにしています。東京オフィスのように広い部屋では、発表者の声が聞こえにくいこともあるので、この簡易拡声器機能がとても便利です。</p>

<p>なお、「Zoom」に参加している各メンバーは、基本的にマイクはミュート状態で、発言時のみマイクをオンにするようにしています。そのままでは、キーボードの操作音や周囲の会話などを拾ってしまうためです。</p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B008F1S3PU/hatena-blog-22/"><img src="http://ecx.images-amazon.com/images/I/41GPhvAFODL._SL160_.jpg" class="hatena-asin-detail-image" alt="サンワダイレクト WEB会議マイク USBマイク PCマイク 高集音 全指向性&単一指向性 400-MC001" title="サンワダイレクト WEB会議マイク USBマイク PCマイク 高集音 全指向性&単一指向性 400-MC001"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B008F1S3PU/hatena-blog-22/">サンワダイレクト WEB会議マイク USBマイク PCマイク 高集音 全指向性&単一指向性 400-MC001</a></p><ul><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> サンワダイレクト</li><li><span class="hatena-asin-detail-label">メディア:</span> Personal Computers</li><li><a href="http://d.hatena.ne.jp/asin/B008F1S3PU/hatena-blog-22" target="_blank">この商品を含むブログを見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div>
<div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B00FKSWGVI/hatena-blog-22/"><img src="http://ecx.images-amazon.com/images/I/41DTcM%2BHU5L._SL160_.jpg" class="hatena-asin-detail-image" alt="Wii U ワイヤレスマイク" title="Wii U ワイヤレスマイク"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B00FKSWGVI/hatena-blog-22/">Wii U ワイヤレスマイク</a></p><ul><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> 任天堂</li><li><span class="hatena-asin-detail-label">発売日:</span> 2013/12/12</li><li><span class="hatena-asin-detail-label">メディア:</span> Video Game</li><li><a href="http://d.hatena.ne.jp/asin/B00FKSWGVI/hatena-blog-22" target="_blank">この商品を含むブログを見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div>
<a href="https://code.google.com/p/soundflower/">https://code.google.com/p/soundflower/</a><cite class="hatena-citation"><a href="https://code.google.com/p/soundflower/">code.google.com</a></cite>
<a href="http://blog.kawauso.com/ladiocast">http://blog.kawauso.com/ladiocast</a><cite class="hatena-citation"><a href="http://blog.kawauso.com/ladiocast">blog.kawauso.com</a></cite></p>

<h2><a name="5"></a>有志メンバーによる同時通訳</h2>

<p>海外のオフィスも繋いで会議を行う場合に避けられない問題として、言語の壁があります。これについても、様々なトライアルを行ってきました。</p>

<p>例えば、「みんなの会」を資料・発表とも英語で行っていた時期もありました。ユーザベースには英語の得意なメンバーも多いので、各チームとも流暢な英語にて発表が行われていましたが、もちろん全員そうではありません。私は英語が得意ではないので、事前に英訳した原稿を用意して臨んだのですが、ちゃんと伝わっていたのか怪しく、申し訳なかったです。</p>

<p>現在は、日本語版の資料と英語版の資料を用意して、2画面あるプロジェクターに片方ずつ映すようにしています。なお、Zoomで共有するのは英語版のみで、日本語版の画面はそれ専用のPCで映しています。ページ送りはそれぞれ手動で進めていますが、自動的に同期する仕組みも構想中です。</p>

<p>発表は当人の得意な言語で行われますが、Zoomのチャットで、有志メンバーによる同時翻訳が行われています。このため、プロジェクター画面に、プレゼンテーション資料とチャット画面を並べて映しています。翻訳を行うメンバーは、会議室に持ち込んだPCからZoomの会議に参加して、日本語の発表や質問は英語に、英語の発表や質問は日本語に訳して、リアルタイムにチャットに投稿しています。</p>

<p>また、チャットによる文字の通訳だけでは思いが伝わりにくいということで、さらに有志の方に立候補していただき、発表の同時通訳にもチャレンジしています。発表と通訳を交互に行う逐次通訳では倍の時間が必要なので、同時通訳で行うのが理想ですが、システム面での難易度も上がります。</p>

<p>そもそも、Web会議システムで二カ国語の音声に対応しているものはあまり無いようで、Zoomもサポートしていません。そこで、Zoomとは別の、通訳音声用の独立した会議システムにて配信しています。具体的には、各オフィスの専用PCをSkypeで繋いでおり、海外オフィス側でもSkype用のPCで通訳の音声を受信しています。通訳の音声はオフィス全体にスピーカーで流しており、各メンバーは必要に応じてZoomの音声と聞き分けています。</p>

<p>このような構成にしている理由は、当初は1台でZoomとSkypeを両方配信しようとしたのですが、配信側も受信側も準備にも時間がかかるし、PCの動作も不安定になってしまったためです。「みんなの会」は全社で行う会議ですので、トラブルが起きた場合でもすぐ復旧出来るように、なるべくシンプルな構成を心がけています。</p>

<p>なお、資料に沿った発表だけとは限らないし、専門用語が多く出てくる内容もあるので、翻訳を引き受けていただいている方々にはとても感謝しています。当社代表・新野による「白熱教室」という、その場でのディスカッションが主体となることもあるのですが、そういう会では翻訳がかなりハードだそうです。</p>

<h2><a name="6"></a>ニコニコメソッドプレゼンで一体感のあるコミュニケーション</h2>

<p>「みんなの会」に社員がもっと参加するための仕組みとして、当社オリジナルの“字幕コメントシステム”を取り入れました。これは、Google Chromeの機能拡張を使って、発表内容についての参加者からのコメントを、ニコニコ動画のようにプレゼンテーション画面上に字幕で流すものです。本記事の冒頭に示した画像が、スライドに字幕コメントがつけられている様子です。（ブログで紹介用に弾幕を貼ってもらいました。）</p>

<p>このシステムは、当社チーフテクノロジストの竹内が一晩で作成したそうです。これについては、当ブログにて竹内から技術背景についてご紹介しました。</p>

<p><iframe src="http://tech.uzabase.com/embed/2015/06/01/143202" title="ニコニコメソッドプレゼンを全社会議に取り入れてみたら会議が面白くなった - UZABASE Tech Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"><a href="http://tech.uzabase.com/entry/2015/06/01/143202">ニコニコメソッドプレゼンを全社会議に取り入れてみたら会議が面白くなった - UZABASE Tech Blog</a></iframe><cite class="hatena-citation"><a href="http://tech.uzabase.com/entry/2015/06/01/143202">tech.uzabase.com</a></cite>
<iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2Fchimerast%2Fniconico-speenya" title="chimerast/niconico-speenya" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="https://github.com/chimerast/niconico-speenya">chimerast/niconico-speenya</a></iframe><cite class="hatena-citation"><a href="https://github.com/chimerast/niconico-speenya">github.com</a></cite></p>

<p>全社会議というと真面目で少し堅いイメージがありますので、当初はこのようなコンテンツが受け入れられるのか不安でした。ところが、いざ始めて見ると予想以上に好評で、もはや「みんなの会」に無くてはならないツールになりました。</p>

<p>例えば、SPEEDAやの新機能のリリースについての報告では、「いいね！」のマークが画面を埋め尽くしたり、バックオフィスからの経費精算手順の説明では、いつも間違っていた人から「すみませんでした」というコメントがあったり…。今までよりもリアクションが遙かにしやすくなり、会議に参加しているという意識が強くなって、「みんなの会」の雰囲気もかなり変わったと思います。</p>

<h2><a name="7"></a>まとめ</h2>

<p>今回の記事では、「みんなの会」のシステムについて、一通りご紹介いたしました。まだまだ完成形とは言えず、課題も多いのですが、その一方でかなり複雑になってしまっているので、よりシンプルにしていきたいと思います。機会があれば、さらに細かい部分についても、詳しく説明してみたいと思います。</p>

<p>ユーザベースの「世界一の経済メディアをつくる」というミッション実現のため、今後さらに社員数も増え、新しいオフィスも開設されていくと思います。物理的な距離があっても、「みんなの会」には全てのメンバーが同じように参加出来るべきです。完全な実現は難しいかもしれませんが、メンバーのアイデアとテクノロジーの力で、少しでも理想に近付けられればと思います。</p>

<p>ユーザベースでは、SPEEDAやに携わっていただくエンジニアを募集中です。こういったシステム構築や、企業カルチャーをつくる「みんなの会」などの取り組みに興味のある方も、採用ページやWantedlyからお気軽にご連絡ください。</p>

<p><iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Fwww.uzabase.com%2Fcareer%2F%23career-sec1" title="CAREER | 株式会社ユーザベース | UZABASE, Inc." class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="http://www.uzabase.com/career/#career-sec1">CAREER | 株式会社ユーザベース | UZABASE, Inc.</a></iframe><cite class="hatena-citation"><a href="http://www.uzabase.com/career/#career-sec1">www.uzabase.com</a></cite>
<iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.wantedly.com%2Fprojects%2F11448" title="100年に一度のメディア変革期！世界一のニュースプラットフォームを創ろう by 株式会社ユーザベース" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="https://www.wantedly.com/projects/11448">100年に一度のメディア変革期！世界一のニュースプラットフォームを創ろう by 株式会社ユーザベース</a></iframe><cite class="hatena-citation"><a href="https://www.wantedly.com/projects/11448">www.wantedly.com</a></cite>
<iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.wantedly.com%2Fprojects%2F11497" title="巨大金融メディアに打ち勝つサービスをつくりたいエンジニアWanted! by 株式会社ユーザベース" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="https://www.wantedly.com/projects/11497">巨大金融メディアに打ち勝つサービスをつくりたいエンジニアWanted! by 株式会社ユーザベース</a></iframe><cite class="hatena-citation"><a href="https://www.wantedly.com/projects/11497">www.wantedly.com</a></cite>
<iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.wantedly.com%2Fprojects%2F19575" title="情報社会にイノベーションを起こせ！エンジニアインターン募集 by 株式会社ユーザベース" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="https://www.wantedly.com/projects/19575">情報社会にイノベーションを起こせ！エンジニアインターン募集 by 株式会社ユーザベース</a></iframe><cite class="hatena-citation"><a href="https://www.wantedly.com/projects/19575">www.wantedly.com</a></cite></p>
</div></div>(Published: Tue, 02 Jun 2015 18:33:35 +0900)<br><br>
<b>ニコニコメソッドプレゼンを全社会議に取り入れてみたら会議が面白くなった</b><br><a href="http://tech.uzabase.com/entry/2015/06/01/143202">http://tech.uzabase.com/entry/2015/06/01/143202</a><br><a data-toggle="collapse" href="#collapse11">View / Hide 'description'</a><br><div id="collapse11" class="panel-collapse collapse"><div class="panel-body"><p>技術チーム竹内(@<a class="twitter-user-screen-name" href="http://twitter.com/chimerast">chimerast</a>)です。</p>

<p>作ったものが知らない間に<a href="https://seleck.cc/article/11">記事</a>のネタにされていたので、どんな仕組みで動いているか技術的なところについて書いてみます。どう使われているかの細かい話は、後日ブログ内に別の記事が上がる予定です。</p>

<p><i>（6/2 追記：「みんなの会」の動画配信システムについて記事を投稿しました。</i>）
<iframe src="http://tech.uzabase.com/embed/2015/06/02/183335" title="ユーザベースの自由な社風を支える「みんなの会」のつくり方（動画環境編） - UZABASE Tech Blog" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"><a href="http://tech.uzabase.com/entry/2015/06/02/183335">ユーザベースの自由な社風を支える「みんなの会」のつくり方（動画環境編） - UZABASE Tech Blog</a></iframe><cite class="hatena-citation"><a href="http://tech.uzabase.com/entry/2015/06/02/183335">tech.uzabase.com</a></cite></p>

<h3>全社会議で「ニコニコメソッドプレゼン」</h3>

<p>だいぶ昔にWeb業界界隈で話題になった(?)ニコニコメソッドプレゼンを、週一の全社会議で取り入れたところ、プレゼンのエンタメ性が増して以前よりだいぶ面白いものになりました。プレゼンを聞く側の一体感がでて面白くなったのに加え、プレゼンする側としても、今まで聞いてるんだか聞いていないんだかよくわからない状態だったのが、反応が目に見えるようになってやりやすくなりました。</p>

<p>ニコニコメソッドプレゼンとは、視聴者がスマホ等でコメントを入力して、そのコメントがニコニコ動画のようにプレゼン資料の上に流れる、視聴者参加型のプレゼンです。</p>

<p>やるとこんな感じになります(全社会議内でやっている社員の自己紹介タイム)↓</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/h0rErlGD0JM" frameborder="0" allowfullscreen></iframe>


<p>ニコニコメソッドを取り入れることになったきっかけは、全社会議への参加者のコミットメントをどうやったら上げることが出来るかどうかみたいな事を話し合った際に、</p>

<ul>
<li>発言しようにも人数が多くなって発言しづらい雰囲気ができあがってしまっている</li>
<li>海外拠点等のリモートからの参加時に、発言がしづらかったり、会議の盛り上がり具合が伝わりにくい</li>
</ul>


<p>という声があがり、その解決策として、</p>

<ul>
<li>ニコニコ動画みたいに横から匿名の突っ込みを入れるようにできたら発言の機会が増えるんじゃないか</li>
</ul>


<p>という意見が出たことによるものです。</p>

<p>ちょうど、視聴者参加型プレゼンツールを作ってみたいなと思っていたこともあり、一晩夜なべして作りました。</p>

<h3>作ったもの: Chrome機能拡張「NicoNico SPEENYA」</h3>

<p>(Chromeウェブストアでの公開はしてません)</p>

<p>全社会議では、色んなチームが進捗報告することもあり、全員で一つのプレゼン資料を編集出来るGoogle Slidesを使用して発表を行っています。</p>

<p>プレゼンのためのほかのツールを使ったり作ったりすることは、移行コストや作成コストの面で考えられなかったので、Google Slidesをそのまま使うことにして、Chrome機能拡張でその上にコメントを重ねるようなものを作りました。</p>

<p>コメントをするだけでは面白くないので、いいねボタンをつけて、押すと親指の画像が浮き上がって消えるような機能や、それを応用して任意の画像を送り込むような機能もつけてます。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/c/chimerast/20150531/20150531234517.gif" alt="f:id:chimerast:20150531234517g:plain" title="f:id:chimerast:20150531234517g:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>プログラムはGitHub上でひっそり公開しています。一般向けに機能拡張およびサーバを公開することも考えたのですが、チャンネル機能を作るモチベーションがわかないのと、セキュリティの事を考えると使う人ごとにサーバ立ててもらった方が良い気がするので、そのままにしています。</p>

<p>Forkして拡張していただいたり、面白い機能をつけてPull Requestを送っていただけるとうれしいです。</p>

<p><a href="https://github.com/chimerast/niconico-speenya">chimerast/niconico-speenya &middot; GitHub</a></p>

<h3>作るのに使ったもの</h3>

<ul>
<li><a href="http://socket.io/">Socket.IO</a></li>
<li><a href="https://developer.chrome.com/extensions/getstarted">Google Chrome機能拡張</a></li>
<li><a href="http://www.w3.org/TR/web-animations/">Web Animations API</a></li>
<li><a href="https://nodejs.org/">Node.js</a> + <a href="http://expressjs.com/">Express</a></li>
</ul>


<h4>Socket.IO</h4>

<p>ブラウザで双方向の何かをつくる場合は鉄板の選択ですね。</p>

<p>Chrome機能拡張側でSocket.IOのサーバへの接続を行い、サーバ側からの通知を待って、コメントやイメージ表示の通知があったらそれを表示するという事をやっています。</p>

<h4>Google Chrome機能拡張</h4>

<p>Chromeには、表示される全てのページへJavaScriptを挿入するような機能拡張を作るための拡張ポイントが用意されているのでそれを使いました。</p>

<p><a href="https://developer.chrome.com/extensions/content_scripts">Content Scripts - Google Chrome</a></p>

<p>これに加えて、ツールバーにボタンを置いて、コメント表示のON/OFFを切り替えられるようにしていたりします。</p>

<h4>Web Animations API</h4>

<p>あまり有名ではない機能だと思いますが、HTML5標準のアニメーションAPIです。jQuery.animate()と同じようなものだと思って良いと思います。</p>

<p>ブラウザネイティブなので、動作が軽かったりリソース消費が少なかったりするみたいです。ただし、まだドラフトなのでサポートしていないブラウザも多いです。</p>

<p>あまり依存ライブラリを増やしたくなかったのと、どんなもんなのか使ってみたかったのでアニメーションAPIとして採用しました。</p>

<h4>Node.js + Express</h4>

<p>こったことはせず、普通のAPIサーバとしての使い方をしています。Expressで待ち受けているURLにPOSTが送信されると、Socket.IOを呼び出して、Chrome機能拡張側に通知を行います。</p>

<h3>まとめ</h3>

<p>視聴者参加型のプレゼンは盛り上がります。また、プレゼンする側も面白いプレゼンを作ろうという気になります。</p>

<p>プログラムの総行数はクライアントサーバ合わせて200行ぐらいです。ありものの機能を使うとさくさくっと作れます。</p>

<h3>宣伝</h3>

<p>ユーザベースでは、2015年6月14日(日)に、<a href="http://e2d3.org/about-e2d3-2/?lang=ja">E2D3プロジェクト</a>と一緒にハッカソンを行います。</p>

<p>スマホでのデータビジュアライズ方法が、世の中で試行錯誤されている中、みんなで考えてみようというハッカソンです。</p>

<p><iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Fe2d3.connpass.com%2Fevent%2F14868%2F" title=" &amp; SPEEDA スマートデータエクスペリエンス ハッカソン (2015/06/14 10:00〜)" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="http://e2d3.connpass.com/event/14868/"> &amp; SPEEDA スマートデータエクスペリエンス ハッカソン (2015/06/14 10:00〜)</a></iframe><cite class="hatena-citation"><a href="http://e2d3.connpass.com/event/14868/">e2d3.connpass.com</a></cite></p>

<p>ネタ的に面白いと思うので是非ご参加ください。</p>

<p>E2D3プロジェクトについてはまた別で記事を書こうと思います。</p>
</div></div>(Published: Mon, 01 Jun 2015 14:32:02 +0900)<br><br>
<b>恵比寿のスタートアップエンジニアが集まる「えびスタ！」#2 を開催しました（ユーザベース、クックパッド、VASILY、エウレカ、はてな）</b><br><a href="http://tech.uzabase.com/entry/2015/05/15/170206">http://tech.uzabase.com/entry/2015/05/15/170206</a><br><a data-toggle="collapse" href="#collapse12">View / Hide 'description'</a><br><div id="collapse12" class="panel-collapse collapse"><div class="panel-body"><p><a href="http://tech.uzabase.com/entry/2015/04/10/194732">既報</a>の通り、恵比寿近辺のスタートアップエンジニアが集まる勉強会「えびスタ！」#2 を開催しました。少し遅れましたが開催レポートをお届けします。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150513/20150513145913.jpg" alt="f:id:uzabase:20150513145913j:plain" title="f:id:uzabase:20150513145913j:plain" class="hatena-fotolife" itemprop="image"></span></p>

<h1>発表資料</h1>

<p>第2回となる今回は、「大規模データの料理法」と題してユーザベース、クックパッド、VASILY、エウレカ、はてなのエンジニアが集まり、各社の事例をご紹介しました。発表内容と資料を以下にまとめます。</p>

<h2>アドベリフィケーションサービス「BrandSafe はてな」の裏側（株式会社はてな 山家 雄介）</h2>

<blockquote><p>2014年8月に株式会社はてなの初のアドテクノロジープロダクトとしてリリースされた「BrandSafe はてな」について、システムを構成するアーキテクチャや、はてな特有のデータを活用して高精度にブランド毀損サイトを判定するための技術的アプローチ、DSP上で広告インプレッションがあった全URLをベースにした、膨大なアドベリフィケーションリクエストをさばくためのインフラ的な工夫などについてお話をする予定です。</p></blockquote>

<h3>発表資料</h3>

<p><iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fdocs.google.com%2Fpresentation%2Fd%2F1_m8XTOt4Rz--aVGN-qDtrmuaGLu9eWuBA-CRAJWBKt0%2Fedit%3Fusp%3Dsharing" title="アドベリフィケーションサービス「BrandSafe はてな」の裏側" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="https://docs.google.com/presentation/d/1_m8XTOt4Rz--aVGN-qDtrmuaGLu9eWuBA-CRAJWBKt0/edit?usp=sharing">アドベリフィケーションサービス「BrandSafe はてな」の裏側</a></iframe><cite class="hatena-citation"><a href="https://docs.google.com/presentation/d/1_m8XTOt4Rz--aVGN-qDtrmuaGLu9eWuBA-CRAJWBKt0/edit?usp=sharing">docs.google.com</a></cite></p>

<h2>企業・業界データサービスSPEEDAの複雑怪奇なデータとの格闘（株式会社ユーザベース 北内啓）</h2>

<blockquote><p>急激に増加し続けるSPEEDAの企業データを扱う上での課題や取り組み、今後の展望などについて紹介します。</p></blockquote>

<h3>発表資料</h3>

<p><iframe src="https://www.slideshare.net/slideshow/embed_code/key/C8bvFGYNjwBTDy" width="427" height="356" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe> <div style="margin-bottom:5px"> <strong> <a href="https://www.slideshare.net/tau3000/speeda-47444622" title="企業・業界データサービスSPEEDAの複雑怪奇なデータとの格闘" target="_blank">企業・業界データサービスSPEEDAの複雑怪奇なデータとの格闘</a> </strong> from <strong><a href="http://www.slideshare.net/tau3000" target="_blank">Akira Kitauchi</a></strong> </div><cite class="hatena-citation"><a href="http://www.slideshare.net/tau3000/speeda-47444622">www.slideshare.net</a></cite></p>

<h2>iQONのアプリ内のデータ分析基盤の紹介や分析手法について紹介します（今村雅幸 株式会社VASILY）</h2>

<blockquote><p>iQONのアプリ内のデータ分析基盤の紹介や分析手法について紹介します</p></blockquote>

<h3>発表資料</h3>

<p><iframe allowfullscreen="true" allowtransparency="true" frameborder="0" height="596" id="talk_frame_296543" mozallowfullscreen="true" src="//speakerdeck.com/player/aa71354e8c1140278ba2ac59c4f359ae" style="border:0; padding:0; margin:0; background:transparent;" webkitallowfullscreen="true" width="710"></iframe><cite class="hatena-citation"><a href="https://speakerdeck.com/kyuns/iqon-bigquery">speakerdeck.com</a></cite></p>

<h2>ベンチャーならではRedShiftの低コスト運用（株式会社エウレカ 鉄本環）</h2>

<blockquote><p>pairsではRedShiftを用いてマーケティングデータや、アルゴリズム解析をしていますが、 これを低価格で運用しているTIPSをお話いたします。</p></blockquote>

<h3>発表資料</h3>

<p><iframe allowfullscreen="true" allowtransparency="true" frameborder="0" height="463" id="talk_frame_296950" mozallowfullscreen="true" src="//speakerdeck.com/player/864b12be51a445e28e5513e9d3dcf821" style="border:0; padding:0; margin:0; background:transparent;" webkitallowfullscreen="true" width="710"></iframe><cite class="hatena-citation"><a href="https://speakerdeck.com/tamaki0506/bentiyanaradehafalseredshiftdi-kosutoyun-yong">speakerdeck.com</a></cite></p>

<h2>リアルタイム分析サービス『たべみる』を支える高可用性アーキテクチャ（クックパッド株式会社 井上寛之）</h2>

<blockquote><p>「たべみる」は、クックパッドの検索データをウェブから分析できる法人向けのウェブサービスです。 そのアーキテクチャの特徴としてサービスのバックエンドDBとバッチの両方でRedshiftを使っていることが挙げられます。 今回は、Redshiftの可用性を高めるためのクックパッド独自のアーキテクチャについて紹介します。</p></blockquote>

<h3>発表資料</h3>

<iframe src="//www.slideshare.net/slideshow/embed_code/key/3HMWdJOMwi9CkJ" width="425" height="355" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe>


<p> <div style="margin-bottom:5px"> <strong> <a href="//www.slideshare.net/inohiro/ebi-sta" title="リアルタイム分析サービス『たべみる』を支える高可用性アーキテクチャ" target="_blank">リアルタイム分析サービス『たべみる』を支える高可用性アーキテクチャ</a> </strong> from <strong><a href="//www.slideshare.net/inohiro" target="_blank">Hiroyuki Inoue</a></strong> </div></p>

<h1>懇親会はエビスビールとピザ＋LT！</h1>

<p>懇親会ではピザと、恵比寿スタートアップということで<b>エビスビール</b>をご用意しました。希望者によるLTもとても盛り上がりました。発表いただいた皆さまありがとうございました！</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150513/20150513151035.jpg" alt="f:id:uzabase:20150513151035j:plain" title="f:id:uzabase:20150513151035j:plain" class="hatena-fotolife" itemprop="image"></span></p>

<h2>LT：GoWorker調査（大貫）</h2>

<blockquote><p>データ処理を支えるGoWorkerあたりの紹介など</p></blockquote>

<h3>発表資料</h3>

<p>（確認中）</p>

<h2>LT：E2D3プロジェクトの紹介（株式会社ユーザベース CTO たけうちひでゆき）</h2>

<blockquote><p>Excelで様々なデータ可視化を行えるようになる予定の、E2D3というオープンソースで進めているプロジェクトを紹介します。</p></blockquote>

<h3>発表資料</h3>

<p><iframe src="https://www.slideshare.net/slideshow/embed_code/key/n3gL3DWPlosXlz" width="427" height="356" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe> <div style="margin-bottom:5px"> <strong> <a href="https://www.slideshare.net/chimerast/e2d3-47364632" title="E2D3プロジェクトのご紹介@えびスタ！" target="_blank">E2D3プロジェクトのご紹介@えびスタ！</a> </strong> from <strong><a href="http://www.slideshare.net/chimerast" target="_blank">Hideyuki Takeuchi</a></strong> </div><cite class="hatena-citation"><a href="http://www.slideshare.net/chimerast/e2d3-47364632">www.slideshare.net</a></cite></p>

<h2>LT：mecab-ipadic-NEologd の効果的な使い方（LINE株式会社 佐藤敏紀）</h2>

<blockquote><p>「mecab-ipadic-NEologd」は 形態素解析エンジン MeCab のシステム辞書である IPA 辞書を拡張するオープンソースな辞書です。大きな特徴は「大量の新語・固有表現を読み仮名付きで採録されていること」と「最低でも月二回(初旬と中旬)、辞書データが更新されること」です。またライセンスは Apache License 2.0 ですので、安心して製品開発や研究にご利用いただけます。今回は「mecab-ipadic-NEologd」を実務で使う際にどうするべきかをお伝えし、使用例のデモをご紹介いたします。</p></blockquote>

<h3>発表資料</h3>

<p><iframe src="https://www.slideshare.net/slideshow/embed_code/key/xfahOOsXcA159j" width="427" height="356" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe> <div style="margin-bottom:5px"> <strong> <a href="https://www.slideshare.net/overlast/effective-mecabipadicneologdebisuta-1" title="mecab-ipadic-NEologd の効果的な使い方" target="_blank">mecab-ipadic-NEologd の効果的な使い方</a> </strong> from <strong><a href="http://www.slideshare.net/overlast" target="_blank">Toshinori Sato</a></strong> </div><cite class="hatena-citation"><a href="http://www.slideshare.net/overlast/effective-mecabipadicneologdebisuta-1">www.slideshare.net</a></cite></p>

<h1>恵比寿スタートアップを盛り上げていきます！</h1>

<p>スタートアップを追いかけている週アスPLUSによると、「スタートアップ集積地」として恵比寿が最近盛り上がってきているそうです。</p>

<p><iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Fweekly.ascii.jp%2Felem%2F000%2F000%2F334%2F334134%2F" title="バイアウトが話題のエウレカほか注目企業多数！ 押さえておきたい恵比寿スタートアップ【2015年5月】" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="http://weekly.ascii.jp/elem/000/000/334/334134/">バイアウトが話題のエウレカほか注目企業多数！ 押さえておきたい恵比寿スタートアップ【2015年5月】</a></iframe><cite class="hatena-citation"><a href="http://weekly.ascii.jp/elem/000/000/334/334134/">weekly.ascii.jp</a></cite></p>

<p>えびスタ！では、恵比寿のスタートアップやエンジニアコミュニティを盛り上げるために今後もイベントを開催してまいります。運営する株式会社ユーザベース・株式会社ニューズピックスにご興味のある方は、以下のWantedlyなどからお気軽にご連絡ください！</p>

<p><iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.wantedly.com%2Fcompanies%2Fuzabase-inc" title="株式会社ユーザベースの最新情報 - Wantedly" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="https://www.wantedly.com/companies/uzabase-inc">株式会社ユーザベースの最新情報 - Wantedly</a></iframe><cite class="hatena-citation"><a href="https://www.wantedly.com/companies/uzabase-inc">www.wantedly.com</a></cite></p>
</div></div>(Published: Fri, 15 May 2015 17:02:06 +0900)<br><br>
<b>「えびスタ！#2 ~大規模データの調理法~ ユーザベースxクックパッドxVASILYxエウレカxはてな」開催のお知らせ</b><br><a href="http://tech.uzabase.com/entry/2015/04/10/194732">http://tech.uzabase.com/entry/2015/04/10/194732</a><br><a data-toggle="collapse" href="#collapse13">View / Hide 'description'</a><br><div id="collapse13" class="panel-collapse collapse"><div class="panel-body"><p>SPEEDA/を提供する株式会社ユーザベースでは、エンジニアの技術力向上と交流を目的として「えびスタ！（恵比寿スタートアップ勉強会）」を開催しています。2015年4月23日（木）に「えびスタ #2」を開催しますのでお知らせいたします。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150410/20150410193802.png" alt="f:id:uzabase:20150410193802p:plain" title="f:id:uzabase:20150410193802p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>第2回となる今回は、クックパッド、VASILY、エウレカ、そして特別ゲストとして京都からはてなのエンジニアをお呼びして開催します。各社の事例をもとに、アドテクを支える技術やRedShiftの活用法などについてお話する予定です。</p>

<p>また後半では軽食（エビスビールとピザ！）を交えたLTや交流会も開催予定です。恵比寿のスタートアップと語り合いたい、他社エンジニアと交流したいという方はぜひお気軽にご参加いただければと思います。（LT参加者も募集しています。LTしていただける方は応募時に「LTしたい！」とコメントください。）</p>

<p>イベント詳細や申し込みについては以下の connpass ページをご覧ください。</p>

<p><iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Febista.connpass.com%2Fevent%2F13953%2F" title="えびスタ！#2 ~大規模データの調理法~ ユーザベースxクックパッドxVASILYxエウレカxはてな (2015/04/23 19:00〜)" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="http://ebista.connpass.com/event/13953/">えびスタ！#2 ~大規模データの調理法~ ユーザベースxクックパッドxVASILYxエウレカxはてな (2015/04/23 19:00〜)</a></iframe><cite class="hatena-citation"><a href="http://ebista.connpass.com/event/13953/">ebista.connpass.com</a></cite></p>
</div></div>(Published: Fri, 10 Apr 2015 19:47:32 +0900)<br><br>
<b>IntelliJ IDEA + JRebel セミナーを開催しました</b><br><a href="http://tech.uzabase.com/entry/2015/03/30/175726">http://tech.uzabase.com/entry/2015/03/30/175726</a><br><a data-toggle="collapse" href="#collapse14">View / Hide 'description'</a><br><div id="collapse14" class="panel-collapse collapse"><div class="panel-body"><p> 開発チームの文字です。</p>

<p>先週の金曜日、株式会社サムライズムの山本裕介さん（<a href="https://twitter.com/yusuke">@yusuke</a>）に弊社オフィスまで来て頂き、IntelliJ IDEA + JRebel のセミナーを開催して頂きました。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150329/20150329161416.jpg" alt="f:id:uzabase:20150329161416j:plain" title="f:id:uzabase:20150329161416j:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>弊社は SPEEDA /  ともにサーバーサイドの実装に Java を利用しています。私自身や一部メンバーは IntelliJ IDEA を使っているのですが、使い慣れた Eclipse を利用しているメンバーも多いため、今回 Eclipse から IntelliJ IDEA への移行を検討するためにセミナーを開いて頂きました（ちなみに iOS 開発を行っているメンバーは App Code を利用しています）。加えて、SPEEDA 開発チームで導入を検討している JRebel のデモも行って頂きました。</p>

<p>私が Eclipse から IntelliJ IDEA に移行したのは半年ほど前ですが、既に Eclipse に戻れなくなりつつあります。要因は幾つかあるのですが、パッと思い付くところだと以下でしょうか。</p>

<ul>
<li>全体的に動作が軽い・速い</li>
<li>デバッグ時の変数内容表示が使いやすい</li>
<li>プラグインが無くてもデフォルトで様々な言語／フレームワークのサポートがある</li>
<li>Postfix Completion が使いやすい</li>
</ul>


<p>総じて何もセットアップしなくても「痒いところに手が届く」IDE になっているのが魅力だなと感じています。Eclipse 時代には何かとプラグインを自作していましたが、IntelliJ IDEA では大抵のものは標準でサポートされています。</p>

<p>@yusuke さんのデモを見て私自身も様々な機能を知らなかったことに今更ながら気付きましたが（恥ずかしながら Chronon Debug や Live Edit・BTS 連携などは全く知りませんでした）、社内の開発メンバーも Postfix Completion を始めとした IntelliJ IDEA の様々な機能に驚きの声を上げており、本格的にチームでの導入を検討しようかという声もありました。</p>

<p>非常に勉強になるセッションでした。@yusuke さん、本当にありがとうございました！</p>
</div></div>(Published: Mon, 30 Mar 2015 17:57:26 +0900)<br><br>
<b>Preserving Code Quality and Save Everyone’s Time with SonarQube</b><br><a href="http://tech.uzabase.com/entry/2015/03/20/174914">http://tech.uzabase.com/entry/2015/03/20/174914</a><br><a data-toggle="collapse" href="#collapse15">View / Hide 'description'</a><br><div id="collapse15" class="panel-collapse collapse"><div class="panel-body"><p>Hello. I'm Jason from SPEEDA's development team</p>

<p>A developer's work (and even life) revolves around writing and testing codes. As a developer, I, like many others, take pride in my codes which are clean, elegant, and bug-free. And so we do our best to achieve this.</p>

<p>I must admit, though, that even as a seasoned developer, I do have some shortcomings. SonarQube classifies these shortcomings as the "Seven Deadly Sins" which are considered as capital sins committed by developers everyday.</p>

<ol>
<li>Bugs and potential bugs</li>
<li>Coding standards breach</li>
<li>Duplicates</li>
<li>Lack of unit tests</li>
<li>Bad distribution of complexity</li>
<li>Spaghetti design</li>
<li>Not enough / too many comments</li>
</ol>


<p>For more description you can visit the SonarQube: <a href="http://docs.sonarqube.org/display/SONAR/Developers%27+Seven+Deadly+Sins">Developers&#39; Seven Deadly Sins - SonarQube - Confluence</a></p>

<p>One way to avoid these pitfalls is through peer review. We should not be afraid to ask others to review our codes so we can be aware of our weaknesses. Similarly, we should also take the time to review other's work. This helps ensure that we deliver quality but this does not guarantee 100% error-proof codes (after all, reviewers are also humans who commit errors). They may improve 90% of the code but will still miss the remaining 10%.</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150320/20150320013622.png" alt="f:id:uzabase:20150320013622p:plain" title="f:id:uzabase:20150320013622p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>Some people claim that the practice of peer review is a waste of precious human resource. They argue that more experienced developer can contribute more to a project through other means other than reviewing their colleagues' codes. While they may have a point, in my experience, review improves everybody's coding skills because of the reviewers give correct solutions and tips. Meanwhile, the reviewee (or the developer receiving the feedback) learns from the more-experienced colleague. This exercise becomes an avenue for knowledge sharing in the company.</p>

<p>From the project management perspective, one would like to measure or quantify the developers' improvements in the peer review practice. But since we don't really count how many feedbacks a developer has for his code, we can't really give a number to the project managers.</p>

<p>But I believe that these problems can be managed through a platform to manage code quality called <b>SonarQube</b>.</p>

<h3>What is SonarQube?</h3>

<p><i>"SonarQube is the central place to manage code quality, offering visual reporting on and across projects and enabling to replay the past to follow metrics evolution."</i></p>

<p>It is open source, extensible with custom plugins (and we can even create one ourselves), we can integrate this with other systems (such as Jenkins), and supports 20+ programming language (In our case we will just use Java).</p>

<p>I've actually implemented this with our current codebase and there were, indeed, some simple misses in the codes (it might have been overlooked by the reviewers). But due to confidentiality, I chose to hide the numbers and the source codes here in this entry.</p>

<p>This is a screenshot of the dashboard of SonarQube's demo: <a href="http://nemo.sonarqube.org">SonarQube</a></p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150320/20150320013733.png" alt="f:id:uzabase:20150320013733p:plain" title="f:id:uzabase:20150320013733p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>We can see the technical debt (what the developers have to "pay" to fix the issues) is set to 82,176 days. Assuming that 1 person will work in 8 hours a day, it will take that developer to fix everything in 82,176 days. (And also assuming that it won't increase anymore). There are 14,937,000 lines of codes there, and 2,714,682 issues. Issues are categorized as Blocker, Critical, Major, Minor, Info. Depending on your company, you will need to determine how they should be dealt with.</p>

<p>In the code below, you can see SonarQube gives suggestions as to the best approach for this case. Of course, SonarQube will not always be correct since we may be following the company's coding standard. We can actually adjust the rules of SonarQube to fit our company's coding standard.</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150320/20150320013957.png" alt="f:id:uzabase:20150320013957p:plain" title="f:id:uzabase:20150320013957p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>This is another example of a code that doesn't follow JavaBean's Naming convention and the complexity of this code is quite high based from SonarQube's  calculation.</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150320/20150320014035.png" alt="f:id:uzabase:20150320014035p:plain" title="f:id:uzabase:20150320014035p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>You can also assign the technical debt tasks to your teammates (You can integrate this to your JIRA or Redmine so it creates tickets which the Project Leader could also manage)</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150320/20150320014054.png" alt="f:id:uzabase:20150320014054p:plain" title="f:id:uzabase:20150320014054p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>Here we can customized the rules SonarQube is following</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150320/20150320014111.png" alt="f:id:uzabase:20150320014111p:plain" title="f:id:uzabase:20150320014111p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>We can also see which codes got duplicated (or copy paste instead of refactoring and reusing the same code)</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150320/20150320014135.png" alt="f:id:uzabase:20150320014135p:plain" title="f:id:uzabase:20150320014135p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>And here is from another file with the same codes</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150320/20150320014147.png" alt="f:id:uzabase:20150320014147p:plain" title="f:id:uzabase:20150320014147p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>There are still tons of functionalities which SonarQube has but I haven't explored yet.</p>

<p>Regarding installation, setup is a breeze so I highly recommend you try it on your codebase.</p>

<h4>To sum up,</h4>

<p>SonarQube is not just for developers, but for everyone involved in the project:</p>

<ul>
<li>For developers, it helps them check if their code is correct and follows the correct coding standard.</li>
<li>For QA, it helps them check the test coverage of unit test (they make sure that every code is tested on unit level)</li>
<li>For Architects, it helps them check if the architecture of the system is correct, and that no codes are having a spaghetti code design.</li>
<li>For Managers, it helps them see if developers are actually improving (they can monitor if technical debt actually decreases) and can
use this for future decisions (i.e. they can delay the release of a functionality because it's technical debt is too high).</li>
</ul>


<h4>"Quality is everyone's responsibility" - Deming, W. Edwards</h4>

<hr />

<p>If you are the type of developer who takes pride in your skills and values code quality, or if you are interested in learning new and interesting technologies, then we want you!</p>

<p>You can try checking this link <a href="https://www.wantedly.com/companies/uzabase-inc">&#x682A;&#x5F0F;&#x4F1A;&#x793E;&#x30E6;&#x30FC;&#x30B6;&#x30D9;&#x30FC;&#x30B9;&#x306E;&#x6700;&#x65B0;&#x60C5;&#x5831; - Wantedly</a> and give us a contact!</p>
</div></div>(Published: Fri, 20 Mar 2015 17:49:14 +0900)<br><br>
<b> を支えるインフラのこれから― Autoscaling を導入してみよう―</b><br><a href="http://tech.uzabase.com/entry/2015/03/12/190251">http://tech.uzabase.com/entry/2015/03/12/190251</a><br><a data-toggle="collapse" href="#collapse16">View / Hide 'description'</a><br><div id="collapse16" class="panel-collapse collapse"><div class="panel-body"><p>インフラ・運用を担当しているカツです。</p>

<p>のインフラについて、今まで他の人も紹介していましたが(<a href="http://tech.uzabase.com/entry/2015/03/06/180232">『AWS CloudWatch Logs を  で試してみた話』</a>)、
今回は、現在ののインフラを紹介するのではなく、今後、のインフラに関してやろうと思っていることをいくつか紹介しようと思います。</p>

<h2>Autoscaling の導入</h2>

<p>はインフラを AWS 上で運用していますが、現在はまだ完全にクラウドの強みを発揮できていません。一定数のインスタンスを運用して、時間帯によって起動するインスタンスを手動で決定しているためです。これではスマートではありません。
今後はリソース負荷状況によって自動的にインスタンスを立ち上げられるように、Autoscalingを導入しようと考えています。</p>

<p>Autoscalingの導入はすごく簡単です。launch-configurationとauto-scaling-groupを設定すれば終わりです。コンソール画面から設定してもいいですし、コマンドでもすぐできます。</p>

<p>launch-configurationの作成：</p>

<pre class="code" data-lang="" data-unlink>aws autoscaling create-launch-configuration 
--launch-configuration-name &#34;newspicks_production_lc&#34;
--image-id &#34;awi-xxxxxxx&#34;
--security-groups &#34;ApplicationServers&#34;
--instance-type &#34;c3.xlarge&#34;
--instance-monitoring true
--no-associate-public-ip-address</pre>


<p>auto-scaling-groupの作成：</p>

<pre class="code" data-lang="" data-unlink>aws autoscaling create-auto-scaling-group
--auto-scaling-group-name &#34;newspicks_production_sg&#34;
--launch-configuration-name &#34;newspicks_production_lc&#34;
--min-size 5
--max-size 30
--desired-capacity 5
--default-cooldown 600
--availability-zones &#34;ap-northeast-1a&#34;
--load-balancer-names &#34;production&#34;
--health-check-type &#34;ELB&#34;
--health-check-grace-period &#34;120&#34;
--vpc-zone-identifier “subnet-xxxxxx”</pre>


<p>次はScaling Plansを設定します。今で考えているPlansは下記の通りです。
Dynamic Scaling：CloudWatch Alarms（cpu、メモリ、アクセス数など）
Scheduled Scaling ：毎日の 07:30、18:30 に実行する（例）
コマンド：</p>

<pre class="code" data-lang="" data-unlink>aws autoscaling put-scheduled-update-group-action --scheduled-action-name scaleup-schedule-year --auto-scaling-group-name newspicks_production_sg --recurrence &#34;30 7,18 0 0 0&#34; --desired-capacity 10</pre>


<p>ただ、Autoscalingは導入が簡単ですが、今までのデプロイ方式と監視の仕組みを変えなければなりません。</p>

<h2>デプロイについて</h2>

<p>AMIが指定されているため、デプロイ都度でAMIを作り直すのは現実的ではない</p>

<h3>解決案</h3>

<ul>
<li>Warファイルなどを踏み台サーバかS3に置く</li>
<li>Autoscalingが発生時、userdataを利用し、ファイルを持ってくる</li>
<li>CodeDeployの採用</li>
</ul>


<h2>監視について</h2>

<p>Autoscallingが発生時、起動されたインスタンスが監視対象に入れるのは間に合わない
※Newspicksはcloudwatchで監視しているため（zabbixは一部監視のみ）</p>

<h3>解決案</h3>

<ul>
<li>HyClops for Zabbixプラグインを導入</li>
<li>zabbixを廃止し、完全にCloudWatchに移行</li>
</ul>


<p>また、これからさらにのインフラ基盤の自動化を進めるため、ansibleの構築コード化の採用、chatopsによって、リリース作業の簡潔化などなど常に進めています。</p>

<p>ではエンジニアを募集しています！
各種AWSサービスを利用しながら、安定したサービス提供のための開発・運用を日々おこなっています。
興味のある方はぜひご応募待っています！</p>

<p><iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.wantedly.com%2Fprojects%2F11448" title="100年に一度のメディア変革期！世界一のニュースプラットフォームを創ろう by 株式会社ユーザベース" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="https://www.wantedly.com/projects/11448">100年に一度のメディア変革期！世界一のニュースプラットフォームを創ろう by 株式会社ユーザベース</a></iframe></p>

<p><a href="https://www.wantedly.com/projects/11448">100&#x5E74;&#x306B;&#x4E00;&#x5EA6;&#x306E;&#x30E1;&#x30C7;&#x30A3;&#x30A2;&#x5909;&#x9769;&#x671F;&#xFF01;&#x4E16;&#x754C;&#x4E00;&#x306E;&#x30CB;&#x30E5;&#x30FC;&#x30B9;&#x30D7;&#x30E9;&#x30C3;&#x30C8;&#x30D5;&#x30A9;&#x30FC;&#x30E0;&#x3092;&#x5275;&#x308D;&#x3046; - &#x682A;&#x5F0F;&#x4F1A;&#x793E;&#x30E6;&#x30FC;&#x30B6;&#x30D9;&#x30FC;&#x30B9;&#x306E;&#x6C42;&#x4EBA; - Wantedly</a></p>
</div></div>(Published: Thu, 12 Mar 2015 19:02:51 +0900)<br><br>
<b>AWS Cloudwatch Logsをで試してみた話</b><br><a href="http://tech.uzabase.com/entry/2015/03/06/180232">http://tech.uzabase.com/entry/2015/03/06/180232</a><br><a data-toggle="collapse" href="#collapse17">View / Hide 'description'</a><br><div id="collapse17" class="panel-collapse collapse"><div class="panel-body"><p>こんにちは、開発・運用を担当している木下です。<br/>
今回はAWS CloudWatch Logsを利用した運用周りの改善について社内LTした内容をベースにブログにまとめました！</p>

<p>はインフラを完全にAWS上で運用しています。</p>

<p><a href="http://aws.amazon.com/jp/solutions/case-studies/newspicks/">AWS &#x5C0E;&#x5165;&#x4E8B;&#x4F8B;: &#x682A;&#x5F0F;&#x4F1A;&#x793E;&#x30E6;&#x30FC;&#x30B6;&#x30D9;&#x30FC;&#x30B9; | &#x30A2;&#x30DE;&#x30BE;&#x30F3; &#x30A6;&#x30A7;&#x30D6; &#x30B5;&#x30FC;&#x30D3;&#x30B9;&#xFF08;AWS &#x65E5;&#x672C;&#x8A9E;&#xFF09;</a></p>

<p>監視については、APIから発生したエラーはAmazon SESを使用してメールにて通知、リソース監視はCloudWatchを利用しています。<br/>
CloudWatchは任意のメトリクス（計測値）をアップロードし、それに対して閾値を設定し、AmazonSNSを利用してエラー通知をしたり、AutoScalingを利用してインスタンスを立ち上げたりといったアクションが取れます。<br/>
AWSを利用すると、標準でEC2インスタンスのCPU使用率やネットワークトラフィック、SQSのキューサイズ、などなど必要最低限のメトリクスが自動でアップロードされます。
CloudWatchはデフォルトで提供されているメトリクスの監視だけでなく、スクリプトを作成してカスタムメトリクスをアップロードすることもできます。<br/>
では、ディスク使用率、メモリ使用率、サーバーサイドがJavaを使用しているためVMの情報などをCloudWatchにアップロードし、適宜アラームを設定して監視を行っています。</p>

<p>CloudWatchはAWSから標準で提供されているメトリクスのようなリソース監視には向いています。<br/>
ただし、システム監視は定期的に発生するリソース監視だけでは不十分です。<br/>
例えば不定期に発生するイベントの監視をするにはCloudWatchだけで提供される機能では難しく、別のログ監視のシステムを利用するのが一般的かと思います。<br/>
CloudWatchが提供しているアラーム機能は便利なため、カスタムメトリクスのアップロードスクリプトを工夫していたりもするかもしれません。</p>

<p>そこで、昨年サービスインし、12月からは東京リージョンでも利用可能となったAWS CloudWatch Logsを試してみました。</p>

<h5>インストール</h5>

<p>既存サーバーへのインストールは、下記のpythonスクリプト実行で一発完了でした。</p>

<pre class="code" data-lang="" data-unlink>wget https://s3.amazonaws.com/aws-cloudwatch/downloads/latest/awslogs-agent-setup.py
sudo python ./awslogs-agent-setup.py --region north-east-1</pre>


<p>このスクリプトで、インストール、デーモン化、対話式でログアップロードの設定までできます。<br/>
chkconfigで起動時設定に入れれば、インスタンスの起動時からログがアップロードされる設定が動きます。</p>

<h5>設定ファイル情報</h5>

<p>対話式で設定した内容は/var/awslogs/etc/awslogs.confに格納されます。</p>

<pre class="code" data-lang="" data-unlink>[/var/log/nginx/access.log]
datetime_format = %Y-%m-%d %H:%M:%S
file = /var/log/nginx/access.log
buffer_duration = 5000
log_stream_name = {hostname}
initial_position = start_of_file
log_group_name = access_log</pre>


<p>直接設定ファイルを変更して追記することもできます。<br/>
同一のLogGroup名で異なるEC2インスタンス（異なるLogStream）から情報をアップすると、LogGroup単位でフィルタリングしたりの操作ができます（後述）</p>

<p>対話式or設定ファイルに記載すると、しばらくするとAWS Console上でログが確認できるようになります。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150303/20150303013326.png" alt="f:id:uzabase:20150303013326p:plain" title="f:id:uzabase:20150303013326p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<h5>ログの保持期間</h5>

<p>CloudWatchのメトリクスは保持期間が2週間でしたが、CloudWatch LogsではLog Groupsの保持期間として1日〜10年、または有効期限なしが設定可能になりました。<br/>
やはりログをアップロードするとなると、長く保持できるのは助かります。<br/>
（ただし、後述するFilterによってアップロードされるメトリクスの保持期間は選べません）</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150303/20150303013441.png" alt="f:id:uzabase:20150303013441p:plain" title="f:id:uzabase:20150303013441p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<h5>Filterの設定</h5>

<p>このアップロードされたログからFilterを作成すると、CloudWatchにメトリクスとしてアップロードされます。</p>

<p>設定例1) ログからERRORを抜き出す<br/>
ログから単純に文言をgrepするようなFilterです。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150303/20150303014218.png" alt="f:id:uzabase:20150303014218p:plain" title="f:id:uzabase:20150303014218p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>設定例2) HTTPステータスが200で、応答時間が1秒以上のログを抜き出す<br/>
スペース区切りのログについては、パターン指定して値を抜き出すこともできます。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150303/20150303014457.png" alt="f:id:uzabase:20150303014457p:plain" title="f:id:uzabase:20150303014457p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>上記のようなFilterを作成し、右下のTest Patternボタンを押すとどのログがヒットするかも事前にテストできるので、操作はとても簡単でした。<br/>
このFilterの結果をCloudWatchメトリクスとしてアップロードすることができます。<br/>
単純なgrepの場合は、事象が発生すると1とカウントされますが、パターン指定した場合はマッチしたパターンをメトリクスとすることもできるようです。<br/>
（◯◯秒以上かかった処理時間のみをメトリクスとして記録、のような）<br/>
メトリクスからアラームを作成する部分は、通常のCloudWatchと同様です。</p>

<h5>まとめ</h5>

<p>ログから事象を発生ベースでメトリクスとして記録する部分がかなり簡易化されました。<br/>
今まで定常的なリソース監視に使用していたCloudWatchを、不定期に発生するイベントの監視としても使いやすくなりました。<br/>
設定、操作もかなり簡単なので、今まで手作りのスクリプトで監視していた部分を一部移行できそうです。<br/>
今後の改善要望としては、ログを時間でしか検索できない部分や、Filterがスペース区切りにしか対応していない部分（正規表現で後方参照したい・・・）などが改善されるとさらに使いやすくなると思います。</p>

<p>ではエンジニアを募集しています！<br/>
各種AWSサービスを利用しながら、安定したサービス提供のための開発・運用を日々おこなっています。<br/>
興味のある方はぜひご応募待っています！</p>

<p><iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.wantedly.com%2Fprojects%2F11448" title="100年に一度のメディア変革期！世界一のニュースプラットフォームを創ろう by 株式会社ユーザベース" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="https://www.wantedly.com/projects/11448">100年に一度のメディア変革期！世界一のニュースプラットフォームを創ろう by 株式会社ユーザベース</a></iframe></p>
</div></div>(Published: Fri, 06 Mar 2015 18:02:32 +0900)<br><br>
<b>情報技術との向き合い方：SPEEDA/を支える価値を生み出す技術の選定手法</b><br><a href="http://tech.uzabase.com/entry/2015/03/02/180612">http://tech.uzabase.com/entry/2015/03/02/180612</a><br><a data-toggle="collapse" href="#collapse18">View / Hide 'description'</a><br><div id="collapse18" class="panel-collapse collapse"><div class="panel-body"><p>UZABASE技術チーム竹内(@chimerast)です。</p>

<p>ちょっと時間がたってしましましたが、2月7日に<a href="http://eventdots.jp/event/309318">dots. Summit 2015</a> にて、ポエム「<a href="http://www.slideshare.net/chimerast/speedanewspicks">SPEEDA/を支える価値を生み出す技術の選定手法</a>」を発表してきたのでその内容をもう少し突っ込んで書いてみたいと思います。</p>

<p>今回は、特定の技術や知見のことは全く話さず、何のために技術があるのかという、それ以前の話をしてきました。エンジニアとして、技術を追い求めることはとても大切なことですが、目的を見誤ってしまうと独りよがりになる可能性もありますし、変な方向に技術が伸びてしまいます。</p>

<p>僕は、多くの人に使われたり影響を与える、末永い良い製品・技術を生み出すには、目的はなんなのか見極めることが重要だと思っています。製品であればその価値が生み出す世界を想像し、技術であれば問題の本質とは何なのかを探求することです。</p>

<p>発表の後、社外の人何人かからフィードバックをもらい、とても心に響いたという人や、是非資料を社内で展開させてもらいたいという話ももらいましたが、そんなの当たり前だよという人や、そんなことどうでもよいという人も多いんじゃないかと考えながら発表資料を作っていました。ただ、僕自身そしてユーザベースがとても大切にしていることなので話をさせてもらいました。</p>

<p>ブログにも全内容を書きたかったのですが、前半の価値の話はブログ向きではない気がしたので後半の技術の話について書こうと思います。前半の話は、興味があれば<a href="http://www.slideshare.net/chimerast/speedanewspicks">スライド</a>を見てください。</p>

<h2>対象読者</h2>

<ul>
<li>プログラミングを学び始めたばかりの人</li>
<li>情報科学をあまり勉強したことがない人</li>
<li>新しい技術スゲーって言ってる人</li>
</ul>


<h2>tl;dr</h2>

<ul>
<li>製品を考えるのも技術を勉強するのもその目的を見極めるのがとても大事だよ

<ul>
<li>その技術が解決しようとする問題を先に考えることで技術の理解が早くなるよ</li>
<li>複数の技術を組み合わせると具合がとても良いよ</li>
<li>色んな分野の技術を沢山見ると新しい技術の理解が早くなるよ</li>
</ul>
</li>
</ul>


<h2>よりよい価値を早く届けるために正しく技術を使う</h2>

<p>技術とはなにかについて考えるとき、「よりよい価値を早く届けるために正しく技術を使う」と考えることが僕にとってはしっくりきます。特に「正しく技術を使う」というところはいつも気にしています。</p>

<p>技術は正しい使い方をしなかったり、的外れな技術を新たに生み出しても、なにかしらモノが出来てしまうことがあります。ただ、その状態で「よりよい価値を早く届ける」という点を達成していることはまれだと思っています。</p>

<p>また、手段が目的になってしまっているのを見ると非常に残念に思います。正しい価値を早く届けるためにアジャイル手法を使うのは賛成ですが、その手法に固執しすぎてその目的がないがしろにされている例をたまに見ます。必要であればウォーターフォール気味にやるくらいの気持ちでゆるくやった方が良いと考えています。正直、サービスの基盤の設計からアジャイルでやるのはなんかおかしいと思っていて、経験上、基盤を始めにかっちり設計して作っておいたほうが、上でアジャイルやらスクラムっぽいものがくるくる綺麗にまわる気がしています。</p>

<p>正しい技術の話をするにあたって、先に新しい技術の事に少し触れます。</p>

<h3>技術パラダイム「アタラシイギジュツ」に惑わされない</h3>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/c/chimerast/20150227/20150227200112.png" alt="f:id:chimerast:20150227200112p:plain" title="f:id:chimerast:20150227200112p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>ネットを見ていたり勉強会に出て話を聞いていたりすると、常に新しい技術の話が出てきます。どこそこのサービスはこの新しい技術を使っていてすごい、みたいな話がわさわさ出てきます。</p>

<p>ただ、ここで気をつける必要があるのは、「新しい技術」だからそのサービスが多くの人に使われている(売れている)のとは違うということをちゃんと認識するべきです。「新しい技術」が「新しい価値」を生み出した結果、ユーザが増えます。「新しい価値」が間に挟まらなければユーザは増えません。</p>

<p>新しい技術だからという理由だけですぐ飛びついて使い始めてしまうのは、一番やってはダメなことです。新しい技術なんて次々と出てきます。</p>

<h3>「アタラシイギジュツ」と正しく向き合うために</h3>

<p>新しい技術と正しく向き合うためには、それがなんなのかということを考えるのが一番良いです。</p>

<p>よく言われることですが、情報技術はパラダイムを行ったり来たりしながら発展してきた歴史があります。パラダイムとまでは言わないまでも小さな流行についても行ったり来たりしながら発展していきます。</p>

<p>例えば、コンピュータの歴史は、分散と集約の歴史です。トランジスタ(真空管?)に始まり、現在のクラウドによる集約まで、分散と集約を何度も繰り返しています。</p>

<p>ここで重要なのは、それぞれの分散フェーズ、集約フェーズでは同じような考え方に基づいた技術が使われたり生まれてたりしていることです。分散フェーズだったら前の分散フェーズのことが、集約フェーズだったら前の集約フェーズの考え方がある程度通用します。</p>

<h3>情報技術の世界では歴史がよく繰り返す</h3>

<p>情報技術の世界では、よく歴史が繰り返されます(自分もまだ30代のペーペーなので歴史を話すのもなんですが)。歴史を繰り返しながら、前の歴史よりは少しずつ良くなっていきます。</p>

<p>新しい言語が生まれると別の言語での考え方が持ち込まれて同じようなものが構築されたり、新しいOSが生まれると別の似たOSの考え方が持ち込まれたりします。新しいプラットフォームが生まれると似たような周辺技術が周りに次々立ちます。</p>

<p>最近のiOSやAndroidで話題になる技術や手法を見ていると、なんか十数年前にWindowsで見たなというモノがあったり、最近話題のJavascriptのフロントエンド技術も数年前にJavaやRubyで見たことあったりよくします。IoTの話なんかも一昔前にユビキタスの人たちが言っていたことが多かったり、Dockerなんかもその基礎のコンテナ技術は元をたどれば、1980年代のchroot jailで、何度かVPSやなんやらを経た結果だったりします。Deep Learningも...。挙げればきりが無いです。</p>

<p>とにかくこの情報技術の世界は、再発見がとても多いです。ある技術が他の技術の流行・発展によって再発見が起きたり、ハードウェア性能の向上によって再発見が起きたりします。アカデミックの世界のモノが、周回遅れで現場に降りてきて流行が起きるという事もあります。</p>

<h3>技術スパイラルに向き合う</h3>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/c/chimerast/20150228/20150228233759.png" alt="f:id:chimerast:20150228233759p:plain" title="f:id:chimerast:20150228233759p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>技術はスパイラル状に発展していくととらえることが出来ます。スパイラルといっても、進行方向の技術の飛びは大きいけど、隣り合う線の飛び幅は小さいスパイラルです。かつ、重要なのは、ある分野のスパイラルに出てくるパラダイム(流行)系統の数はそんなに多くないことです。</p>

<p>技術スパイラルの進み方は、隣り合う線(同系統のパラダイム)から最も影響を受け、時間軸で直近の別系統のパラダイムからも影響を受けます。</p>

<p>歴史をよく知らない新しく情報技術に触れ始めた人が、パラダイムの移動を経験すると、なんか全然違う新しい概念が出てきたように見えてしまうことがあるのですが、進行方向の飛びが大きいだけで、過去を見ると大体その基となる技術があります。そして、その基となる技術からの差分はそんなに大きく無いです。</p>

<p>また、誰も見たり聞いたことも無いような技術がスパイラル上にいきなり出てくることはないです。必ず何かの考え方をベースにしており、全然別の学問で確立されている技術や事実が元になっていることも多いです(情報科学の分野のアルゴリズムには自然科学から入ってきたものもちらほらありますね。将棋ソフトのBonanzaなんかも面白い例だと思います)。</p>

<p>誰も見たことも聞いたこともない新しい技術は、基本詐欺かダメな技術です。</p>

<h3>技術を正しく使う・作る</h3>

<p>新しい技術というものの正体についてみたところで、技術を正しく使うとはどういうことなのか考えてみます。</p>

<p>技術は、世の中になにかしらの問題がありそれを解決する為に生まれます。逆に技術が解決しようとしている問題を知ることが出来れば、その技術が何をするものためのものなのかすんなり理解することが出来ます。</p>

<p>この関係を認識することで、自分自身が問題に直面したときに、どの技術を選択すれば良いかの基準ができます。</p>

<p>新しい技術も何か特定の問題があって生まれてくるもので、新しい技術が過去の全ての問題を解決してくれると考えるのは、一番間違った考え方です。</p>

<h3>技術に無理させない</h3>

<p>技術は基本的に特定の問題に対する解決策として生まれます。逆にその問題以外を解くのには適していない事が多いです。</p>

<p>技術は特化されたものであるほど、対象がはまれば、より良く早く問題を解決することが出来ます。そのかわりに、他の問題に適用しづらくなります。ここを勘違いして、この問題がとても早く解けたのだから、他の問題も早く解けるだろうと考えてしまうのは間違いです。</p>

<p>例えば、世の中には汎用言語と半特化型言語(DSLまではいかないやつ)があります。</p>

<p>Javaは汎用言語で、どんな問題も無難に解決し、それなりに高速に動作しますが、対象によっては他の言語で書く方が簡潔に書けたり、速度が速かったりします。</p>

<p>PHP(Hypertext Preprocessor)は汎用言語の皮を被った半特化型言語です。HTML(Hypertext Markup Language)を出力することを主目的とする言語です。ちょっとした動的なHTMLを吐き出すことなら、PHPはとても正しい選択肢です。正直、実際にのWeb版を始めに作るときにRESTful APIを叩くだけのフロントとしてPHPを使うことを僕は提案していました（外部に協力を依頼しやすいとか、デザイナと連携しやすいとかといった理由もあります）。他のエンジニアに全力で拒否されましたが。</p>

<p>ただ、多くの人がご存じの通り、PHPで大きなシステムを作ったりするのは大変です。HTMLと全然関係無いバッチを書いたりするのは狂気の沙汰だと思っています。これはPHPがHTMLに対する半特化型言語であることを考えれば当たり前のことです。</p>

<h3>技術を組み合わせることを覚える</h3>

<p>作るシステムを複数の問題に正しく分割し、それぞれの問題に対して得意な技術を割り当ると、非常に高速に開発することが出来ます。作らなければならない部分も減るので、生み出すバグも少なくなります。</p>

<p>例えば、プログラムを書いて作るものが難しいものでも、インフラの技術で簡単に解決ができるものが多々あります。RDBMSが無い、データ管理を自分で書かなければならない世界を考えてください。RDBMSは一番わかりやすい技術を組み合わせる例です。</p>

<p>また、機械学習系のライブラリはPythonがとても充実しています。それだったら、機械学習の部分はPythonで書いてJavaなりRubyから呼び出す形にすれば良いと思います。全部一つの言語でやる必要は無いです。</p>

<p>複数の技術を使うことでその学習コストはどうするんだという話を良く聞かれますが、正しく切り出された問題に正しい技術を割り当てれば、それを解決するために必要な学習コストは非常に低いです。技術のチュートリアルを読んでこれはすごいと思うことが良くあると思いますが、その感覚です。</p>

<p>逆に、適していない問題を解決する方法を学習しようとするとコストが跳ね上がります。そもそもその技術が想定していない問題を解こうとした場合です。例えば、トランザクションが必要な問題をNoSQLと呼ばれるデータベースで考えようとするととたんに難しくなります。</p>

<h3>たくさんの違う分野の技術を知ろう</h3>

<p>技術を組み合わせるためには、複数の技術のことを知り、それぞれの得意な問題を理解する必要があります。</p>

<p>一から自分の知らない技術を知ることは非常に大変に見えるかもしれませんが、先ほどの技術スパイラルの話の通り、それぞれの技術は何らかの関係があります。基礎の部分をちゃんと押さえておけば、差分を意識すると実はそんなに学習するのは大変ではありません。ある一つの言語をそれなりに極めていれば、他の言語に移るときは低いコストで移れますよね。</p>

<p>重要なのは基礎の部分をちゃんと押さえることです。それについては先ほどの通り、解決しようとしている問題を認識することが近道です。</p>

<p>また、同じような問題を解決しようとしている技術をたくさん知ってもあまり意味はありません。たいてい同じような解決法が返ってきます。もし、手続き型言語を勉強したなら、その後は関数型言語、論理型言語、もしくはDSLの作り方等、全然違う系統の言語を学ぶべきです。言語から離れてインフラの知識を身につけるのも良いかもしれません。分散処理向けの言語の考え方が身につくかもしれません。なんにせよそこで得た知識や考え方は元の手続き型言語に戻ったときにも無駄になることなく生きてきます。</p>

<p>上でも少し触れましたが、一つの分野のスパイラルに出てくる押さえておくべき技術パラダイム系統の本数は少ないです。10もあれば多い方だと思います。効率よく学ぶとそんなに苦もなくそれっぽく身につく気がします。くどいようですが、同じ系統の技術を学んでも知識の幅は広がりません。また、ざっと俯瞰する場合は深く調べ始めると泥沼にはまるので、解決しようとしている問題とその解決方法の組み合わせがわかったら次に行った方が良いかもしれません。細かい所については、基礎さえ押さえておけば類推出来ます。実際に使うときに深く調べたのでも遅くないです。</p>

<h3>技術を多く知るということ</h3>

<p>技術は多くの種類を知れば知るほど、新しいものを学習するコストがどんどん下がっていきます。スパイラルの話で書いたとおり、基本的に情報技術は組み合わせとほんの少しの差分で生まれます。ある程度知ると、この技術はあれと、これと、それから影響を受けているんだなとわかるようになります。新しい技術が出てきてもあまりビックリしなくなります。</p>

<p>また、逆を考えると、多くの種類を知れば知るほど新しい技術も生み出しやすくなります。何か問題にぶち当たったときに、技術を組み合わせて新しい解決方法を生み出すというのは良くあることです。</p>

<h2>まとめ</h2>

<p>ユーザベースでは、「ユーザの理想から始める」というルールがあります。これは、ユーザに届ける価値を考えるのが先、ただ、それを考えることで良い技術が育つ、という思いも込められています。目的を考えることで、それにふさわしい広く使われる正しい技術が生まれると考えています。</p>

<p>技術チームでは、新しいものを作るときには使ったことのない技術を使うことを推奨しています。新しい考え方に触れることで、視野が広がります。</p>

<p>ただし、<strong>使う技術が問題を解くのにふさわしいか</strong>必ず考えるという条件をつけています。新しい技術でなんか流行っているからという理由だけで、的外れな対象に対して技術を適用すると全力で叩きます。マサカリ投げます。</p>

<p>ユーザベースでは、正しく「技術」を使い、創り、「価値」を高速に創造し届けることを心がけています。</p>
</div></div>(Published: Mon, 02 Mar 2015 18:06:12 +0900)<br><br>
<b>Apache Wicketのイベントシステム徹底活用（実用サンプルもあるよ）</b><br><a href="http://tech.uzabase.com/entry/2015/02/18/180705">http://tech.uzabase.com/entry/2015/02/18/180705</a><br><a data-toggle="collapse" href="#collapse19">View / Hide 'description'</a><br><div id="collapse19" class="panel-collapse collapse"><div class="panel-body"><p>SPEEDAの開発してます矢野です。社外から参画してます。SPEEDAを書いてないときは、最近はClojureを書いています。</p>

<p>SPEEDAではApache Wicketを使っています。バージョンも順調に挙げられているので、Wicket 5から導入されたイベントシステムも、最近はかなり活用しています。イベントシステムについてはドキュメントも少なく活用方法がよくわからない、という話もあるようなので、活用方法を紹介します。</p>

<h1>まずは手始めに</h1>

<p>Wicketのあらゆるコンポーネント（つまり、Componentのサブクラス）は、イベントの送信者と受信者になることができます。
イベントの送信には、Component#send を使います。</p>

<pre class="code lang-java" data-lang="java" data-unlink><span class="synType">public</span> <span class="synType">final</span> &lt;T&gt; <span class="synType">void</span> send(IEventSink sink,
                           Broadcast type,
                           T payload)
</pre>


<p>どのコンポーネントに対してsend()を呼び出すかは、実は重要ではありません。重要なのは、引数のsinkです。イベントは、このsinkに対して送信されます。
そしてpayloadが、送信されるオブジェクトです。「イベント」と呼んで良いかと思いますが、実際にはなんでも、どんなオブジェクトでも送信できます。</p>

<p>そして、イベントを受け取ったsinkを起点にして、typeで指定した方法で、イベントがコンポーネントツリーに伝播します。</p>

<ul>
<li>Broadcast.BREADTH  幅優先</li>
<li>Broadcast.DEPTH 深さ優先</li>
<li>Broadcast.BUBBLE  遡り</li>
<li>Broadcast.EXACT 特定sink限定</li>
</ul>


<p>詳しい解説はBroadcastクラスのJavadocに書かれているのですが、英語が苦手でも、ちゃんと数値でどの順序にイベントが伝播するか書かれているので、わかりやすいと思います。</p>

<p><a href="http://ci.apache.org/projects/wicket/apidocs/6.x/org/apache/wicket/event/Broadcast.html#BREADTH">Broadcast</a></p>

<p>一番多く使うのは、コンポーネントをsinkとしてイベントを送ると、自分自身と、そのすべての子コンポーネントに、幅優先でイベントを伝播させるBREADTHでしょう。というか、ほとんどこれしか使わないように思います。特別に深さ優先が必要だったり(DEPTH)、そもそも伝播して欲しくなかったり(EXACT)するシーンだけ変えるくらい。</p>

<p>さて、イベントが伝播する途中にいるコンポーネントはすべて、伝播していくイベントを補足できます。そのためには、Componentの <code>onEvent</code> をオーバーライドします。</p>

<pre class="code lang-java" data-lang="java" data-unlink><span class="synType">public</span> <span class="synType">void</span> onEvent(IEvent&lt;?&gt; event)
</pre>


<p><code>IEvent#getPayload()</code>を使って、sendに渡したpayloadオブジェクトを取得できます。あとは、このpayloadが、処理したいオブジェクトかどうかチェックして、そうであれば処理すればいいし、そうでなければ単に捨てればいいのです。いずれにせよ、イベントは次のコンポーネントに伝播します。</p>

<h2>問題</h2>

<p>ところが、この<code>onEvent</code>が実にダサい。payloadオブジェクトの種類によって地道にチェックするしかないので、結局、次のようなコードになってしまいます。</p>

<pre class="code lang-java" data-lang="java" data-unlink><span class="synPreProc">@Override</span>
<span class="synType">public</span> <span class="synType">void</span> onEvent(IEvent&lt;?&gt; event) {
    Object payload = event.getPayload();
    <span class="synStatement">if</span> (payload <span class="synStatement">instanceof</span> MyEvent) {
        MyEvent myEvent = ((MyEvent) payload);
        <span class="synComment">// なにかmyEventを使ったすごいCoolな処理</span>
    }
}
</pre>


<p>instanceOfでクラスチェックして、キャストして…ダサさのオンパレードで大変です。でもWicketのデフォルトのイベント補足システムは、この<code>onEvent</code>しかありません！</p>

<p>ところで、イベントの送信側も受信側も自分で書いたプログラムであれば、他からイベントが来ることもないし、どのイベントpayloadかも把握できているわけですから、チェックせずにすぐにキャストしても良さそうに思えます。この戦術はうまくいきません。WicketのイベントシステムはWicketフレームワーク内部でも使われていて、各コンポーネントは、フレームワークが送信するイベントを受け取っています。それらと区別するためにも、必ずpayloadの種類をチェックする必要があります。</p>

<h2>ならば書けばよいのだ</h2>

<p>さすがにいろんなところに、こんなinstanceofとか書いてられません。
幸い、Wicketにはイベント補足システムを拡張する仕組みがあります。<code>IEventDispatcher</code>というインタフェースがその役目を担います。このインタフェースには、次のようなメソッドが一つだけ定義されています。</p>

<pre class="code lang-java" data-lang="java" data-unlink><span class="synType">void</span> dispatchEvent(Object sink,
                   IEvent&lt;?&gt; event,
                   Component component)
</pre>


<p>次のように、IEventDispatcherを実装したインスタンスをApplicationのFrameworkSettingsに追加することで、イベントがコンポーネントに届いた時に、どのようにして、どんなメソッドを呼び出すのかを細く制御できます。</p>

<pre class="code lang-java" data-lang="java" data-unlink>getFrameworkSettings().add(<span class="synStatement">new</span> MyGreatEventDispatcher());
</pre>


<p>SPEEDAでは、この機能を利用して、次のようなイベント補足メソッドをサポートしています。</p>

<ul>
<li>アノテーションを指定することで、どんな名前のメソッドであれイベント補足メソッドになれる</li>
<li>イベント補足メソッドは一つのクラスにいくつでも書くことができる</li>
<li>イベント補足メソッドはprivateメソッドでも良い</li>
<li>イベントディスパッチャは、イベント補足メソッドの引数の型を見て、送信されたpayloadの型が引数と合致するときに、そのメソッドを呼び出す</li>
<li>イベントディスパッチャは、どのクラスがどのようなイベント補足メソッドを持っているか、記憶する</li>
</ul>


<p>この独自のIEventDispatcher実装によって、SPEEDAでは、次のようにイベント補足メソッドを気軽に設定できています。</p>

<pre class="code lang-java" data-lang="java" data-unlink><span class="synPreProc">@EventHandler</span>
<span class="synType">public</span> <span class="synType">void</span> onConditionChanged(CriteriaChanged event) {
    AjaxRequestTarget target = event.getTarget();
    target.appendJavaScript(<span class="synConstant">&quot;showOverlay()&quot;</span>);
}
</pre>


<p><code>@EventHandler</code>アノテーションをつけることで、イベント補足メソッドを作ることができます。上記のメソッドは、イベントpayloadがCriteriaChangedだったときに呼び出されます。もう、ダサいinstanceofやキャストとはおさらばです。そのようなチェックはイベントディスパッチャが肩代わりして、すでに解決済みキャスト済みのオブジェクトが引数に渡されるのです。</p>

<h2>配布してます</h2>

<p>このイベントディスパッチャは、私が個人で作って使って公開していたものを、少々改造して使い回しているもので、Apache Licenseでもともと公開されていました。今回、新たにgistに公開したので、欲しい方はご自由に活用ください。ファイルは二つだけです。</p>

<ul>
<li><a href="https://gist.github.com/tyano/d953c2e27bb97b0c9d97">AnnotationEventDispatcher.java</a></li>
<li><a href="https://gist.github.com/tyano/7c2f5a216b23224fff1a">EventHandler.java</a></li>
</ul>


<h2>コンポーネントの疎結合とクラス定義のコツ</h2>

<p>Wicketはもともと、HTTPの上でありながら、仮想的なオブジェクト指向環境を作り出すことで、デスクトップアプリケーションのようにウェブアプリケーションを開発できるのがウリです。独特のコンポーネントのパッケージ技術により、コンポーネントはCSSやJavaScriptとともに「ひとまとまりとして」配布できました。</p>

<p>ただ、コンポーネントに発生する事象（イベント）をコンポーネントユーザに伝える手段にかけていて、習慣的には、<code>onSelected</code> といった、頭にonをつけたabstractメソッドを定義し、ユーザにオーバーライドしてもらうことで、ユーザに制御を移していました。いわば、ここだけは他のクラスと密結合しているのです。</p>

<p>Wicket 5によってイベントシステムが導入されて以降、実は、コンポーネントは「クラス」「HTML」「CSS」「Javascript」に加え「イベントクラス」とパッケージ化して配布することができるようになりました！例えばダイアログを閉じた時、ユーザが項目を選んだ時などなど、そのための（オーバーライド可能）メソッドを書く代わりに、専用のpayloadを送信すればいいのです。何をしたらどのようなpayloadが送信されるかをクラスの冒頭のJavadocコメント部に書いておけば、コンポーネントは外部と独立して存在することができます。つまり、疎結合です。コンポーネント利用側は、イベントハンドラを書くことで、コンポーネントの更新を受け取ることができます。</p>

<p>このような関係を実現するためには、ちょっとしたコツがあります。ノウハウあるいは定石のようなものです。</p>

<h4>コンポーネントは外部からsinkを指定できるべき</h4>

<p>コンポーネント内部で何か起こりイベントpayloadを送信するとき、どのsinkに送信するかが問題になります。これは、コンポーネント利用側が指定できるのが理想的です。コンストラクタ引数としてsinkを受け取れるのがよいと思いますが、setterメソッドでもよいでしょう。</p>

<h4>sinkが指定されてない場合はページをsinkとする</h4>

<p>sinkを指定しないのもユーザの自由です。しかしsend()の呼び出しを行うにはsinkが必要です。この場合、コンポーネントの所属するページ（getPage()で取得できます）に対して、Broadcast.BREADTHでpayloadを送信するのが良いでしょう。こうすれば、ページ上の全コンポーネントに対してpayloadが伝播します。
もちろん、sinkを指定すれば伝播の範囲が狭まるので、ページ全体に伝播させるよりパフォーマンス的に有利です。どちらを選ぶかはユーザに選ばせるべきです。</p>

<h4>コンポーネントがどのようなpayloadをいつ送信するかはドキュメント化すべき</h4>

<p>payloadの種類と送信タイミングは、各メソッドに書くより、クラスのJavadocコメント部にまとめておく方が、見やすいですし更新も楽です。</p>

<p>これらのプラクティスに沿えば、コンポーネントを疎結合にすることができます。onClickのようなメソッドを定義するのではなく、イベントpayloadの送信を行うことの利点は、受け取る側は「どこでも受け取れる」ということです。たとえばページ上の、４段くらい重なったところにあるパネルにあるボタンを押すと、ページのすぐ上に乗っているコンポーネントが合わせて変化する、という場合、onXXXXといったabstractメソッドでは、どうやってページのすぐ上にあるコンポーネントまで伝えるかわかりません。イベントなら簡単です。ページにイベントハンドラとなるメソッドを書けば済むのですから。</p>

<p>ただし、このようにイベントハンドラを多用すると、ある操作をした時にどこのメソッドが呼び出されるのかわかりにくくなる欠点があります。その面でも、この記事で紹介したAnnotationEventDispatcherを使うのが有利です。引数となるクラスは各イベント独自のものですから、あとは、IDEでそのイベントを使っているメソッドを探せばいいのです。</p>

<p>Wicketのイベントシステムは日本語の情報がほぼないので、もしかしたら活用してない人が多いかもしれません。しかし、Wicket 5以上を使っているならば、この仕組みを使わない手はありません。活用してください。</p>
</div></div>(Published: Wed, 18 Feb 2015 18:07:05 +0900)<br><br>
<b>Dockerコンテナを管理するならKubernetes</b><br><a href="http://tech.uzabase.com/entry/2015/02/13/180743">http://tech.uzabase.com/entry/2015/02/13/180743</a><br><a data-toggle="collapse" href="#collapse20">View / Hide 'description'</a><br><div id="collapse20" class="panel-collapse collapse"><div class="panel-body"><p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150212/20150212193607.png" alt="f:id:uzabase:20150212193607p:plain" title="f:id:uzabase:20150212193607p:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>SPEEDA開発チームの山岸です。</p>

<p>最近注目を集めているDockerですが、ユーザベースでも一部のチームで開発に役立てています。そのDockerのコンテナを管理するための「<a href="http://kubernetes.io/">Kubernetes</a>」というオープンソースのフレームワークがあります。<br/>
今回は社内のLTの内容を基に、Kubernetesについて簡単にご紹介したいと思います。</p>

<h3>Kubernetes とはなにか？</h3>

<p>KubernetesとはGoogleがオープンソースで公開した、Dockerコンテナのオーケストレーション及び管理するためのフレームワークです。 <br/>
Googleがこれまでサービスをコンテナで運用してきた経験を元に作られており、様々なベンダーが支持を表明しています。<br/>
Google Compute Engine、Microsoft Azure、Vagrant、CoreOSなどの様々な環境で使うことができます。</p>

<h3>なぜ Kubernetes か？</h3>

<p>Dockerによって、以下のメリットがもたらされるようになりました。</p>

<p>・信頼性の高いデプロイ<br/>
・ポータビリティ<br/>
・より簡単な構築と管理</p>

<p>これにより、1つのアプリケーションコンポーネントの再配置が容易に行えるようになりました。</p>

<p>しかし、実際の運用では複数のアプリケーションコンポーネントを連携させて、一つのサービスとして提供する必要性が出てきます。特にマイクロサービス的なサービスの構築にはこのようなアプローチが重要となります。</p>

<p>コンテナ同士の連携を行うためには、以下のような解決しなければならない問題が出てきます。</p>

<p>・コンテナ間の通信をどのように行うのか？ <br/>
・ホストが異なる場合のコンテナ間の通信をどのように行うのか？<br/>
・通信先のコンテナが障害により落ちた場合にどう対応するのか？<br/>
・各コンテナへのアクセスをどう分配するのか？</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150212/20150212195621.png" alt="f:id:uzabase:20150212195621p:plain" title="f:id:uzabase:20150212195621p:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>こういった問題は、コンテナをクラスタとして統合し、管理することでうまく解決できます。<br/>
それを行ってくれるのが、Kubernetesです。</p>

<h3>Kubernetes でできること</h3>

<p>Kubernetesでできることは大きく分けて3つあります。<br/>
それぞれ簡単にご紹介します。</p>

<h6>①コンテナを簡単に展開できる</h6>

<p>まずはじめに、Kubernetesは<strong>Kubernetes Master</strong>という全体を管理するためのサービスをまとめたノードと、
それによって管理されるコンテナをまとめた<strong>minion</strong>というノードがあります。</p>

<p>Kubernetesでは、minion上にグループ化したコンテナを<strong>Pod</strong>という単位で構築、管理します。<br/>
このPodにより、密結合したコンテナの集合を扱いやすくなります。<br/>
重要な点として、そのコンテナの集合は必ず同一ホスト上に存在しています。そして、同じマシンリソースを共有しています。</p>

<p>YAMLまたはJSONフォーマットでPodの定義を設定ファイルで保存し、Kubernetes Master上のAPIに対してコマンドを実行することでPodを作成、構築することができます。</p>

<p>また、<strong>Label</strong>をコンテナに付けて管理することができます。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150210/20150210032530.png" alt="f:id:uzabase:20150210032530p:plain" title="f:id:uzabase:20150210032530p:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>このLabelにより、コンテナを種類ごとに分類することでコンテナのグループを抽象化して、デプロイするコンテナを管理しやすくできます。</p>

<h6>②コンテナの状態をチェックできる</h6>

<p><strong>Replication Controller</strong>により指定された数だけPodのReplicaを作成できます。<br/>
また、Replication Controllerはコンテナを死活監視し、障害により落ちた場合に自動起動します。<br/>
この仕組みにより常に指定した数のコンテナが保たれるようになり、Podの並列数を管理することができます。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150210/20150210033023.png" alt="f:id:uzabase:20150210033023p:plain" title="f:id:uzabase:20150210033023p:plain" class="hatena-fotolife" itemprop="image"></span></p>


<h6>③コンテナへのアクセスを分配できる</h6>

<p><strong>Services</strong>により、設定したPodにアクセスをラウンドロビンで分配することができます。<br/>
これは複数のコンテナで構成されるロードバランサのようなものです。<br/>
これによりサービスを使う側は特定のIPやポートのみ知っていればよく、コンテナの存在を意識させないようにできます。</p>

<h6>どのように実現しているか</h6>

<p>上記のようなことをどのように実現しているかKubernetesの全体像を示しつつご説明します。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150211/20150211091900.png" alt="f:id:uzabase:20150211091900p:plain" title="f:id:uzabase:20150211091900p:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>Kubernetesの中心にはetcdという分散Key-Valueストアがおり、各ノード上のサービスがetcdの設定を常に監視しています。<br/>
何か変更が生じた場合には、etcdに対してその内容を書き込みます。そうすると協調して処理を行わなければならない別のノードのサービスがその内容を元に処理を行うといった具合です。<br/>
例えば、Replication Controllerにおけるコンテナの並列数の管理も、この仕組みの上に成り立っています。</p>

<p>詳しい内容は、KubernetesのGithubの<a href="https://github.com/GoogleCloudPlatform/kubernetes/blob/master/DESIGN.md">Kubernetes Design Overview</a>にまとまっております。</p>

<h3>まとめ</h3>

<p>Googleが長年社内で培ってきたコンテナ運用の経験が活かされていると感じます。<br/>
似たようなことを行えるフレームワークも存在しますが、まだどれも若いステージにいる状況だと思います。<br/>
しかし、今後はDockerなどのコンテナ技術を中心としたサービスの構築が伸びていくと思うので、こういったフレームワークには将来性を感じます。</p>

<p>ユーザベースでは、新しい技術に興味を持ち、共により良いシステムを作っていける仲間を募集しています。
興味を持った方は是非、<a href="https://www.wantedly.com/companies/uzabase-inc">Wantedly</a>をご覧ください。</p>
</div></div>(Published: Fri, 13 Feb 2015 18:07:43 +0900)<br><br>
<b>Quick prototyping data visualization in SPEEDA</b><br><a href="http://tech.uzabase.com/entry/2015/02/09/113059">http://tech.uzabase.com/entry/2015/02/09/113059</a><br><a data-toggle="collapse" href="#collapse21">View / Hide 'description'</a><br><div id="collapse21" class="panel-collapse collapse"><div class="panel-body"><p>Nice to meet you, my name is Jorge Granado from SPEEDA Tech Team.</p>

<p>At UZABASE we are always trying to find new ways of surprising our clients, and provide them with new analysis tools as well as better data.</p>

<p>Since early 2013 we have been using Machine Learning algorithms for gathering world business news and information (both in English and Japanese), and connecting it to our company database. That way our clients can easily find all related media information whenever they lookup a company profile. Also, since October 2014, we have added M&amp;A information to our existing data and, of course, linked the information with the mentioned database so all our information stays connected.</p>

<p>Currently listed corporation market prices are stored with a date key, and this also goes the same for news as well as M&amp;A deals. Why not create a tool where one can see all events located in a stock market price timeline to study its influence? This time we will implement a quick prototype so the analyst team can evaluate the solution and decide on it.</p>

<p><b>1. Choosing a library for client data display</b></p>

<p>One of my personal mottos for quickly developing prototypes is the famous "<a href="https://en.wikipedia.org/wiki/Reinventing_the_wheel">do not reinvent the wheel</a>" approach. So this time, we will try to find a third party library that:</p>

<ul>
<li>complies with maximum number of the requirements.</li>
<li>can be extended to fulfil all the remaining necessities.</li>
<li>has an affordable cost/performance value.</li>
</ul>


<p>Those requirements are:</p>

<ul>
<li>being able to represent two or more time-related textual (but independent) events over a time-based data series.</li>
<li>being able to display the textual data over the numerical series in a readable manner.</li>
<li>being able to enlarge/reduce the period shown to the user in an intuitive way.</li>
<li>compatible with most of the current browsers as well as old ones.</li>
</ul>


<p>As for the last requirement, when your clients are not responsible for the software they can have in their computers and they are tied to corporate rules, you want to support them as much as possible. Remember, clients first. Yes, unfortunately that means that our website should appear 90% or better even for the old IE6 whenever possible.</p>

<p>Although there are several useful framework/libraries available for combining data and time-organized information, seems like there are not so many options to accomplish most of our requirements in an out-of-the-box manner. Best candidates are:</p>

<p><a href="http://www.highcharts.com/stock/demo/flags-general">Highcharts</a>: really interesting commercial library, with support for old browsers. The annotated timeline present some problems for our project, especially regarding UI such as:</p>

<ul>
<li>event data can only be accessed over the graph, cannot be shown separately.</li>
<li>event flags appear really close to the graph, and that makes them difficult to click and read.</li>
</ul>


<center><p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150204/20150204205730.png" alt="f:id:uzabase:20150204205730p:plain" title="f:id:uzabase:20150204205730p:plain" class="hatena-fotolife" itemprop="image"></span></p></center>


<p><a href="https://developers.google.com/chart/interactive/docs/gallery/annotationchart">Google Annotation Chart</a>: part of the Google Charts library.</p>

<ul>
<li>can show only one event stream per data graph, although more than one graph can be added to the visualization.</li>
<li>events are shown in a separated table, although only one column can be shown.</li>
<li>events are not html links by default, this has to be extended.</li>
</ul>


<p>Some other interesting libraries are:</p>

<ul>
<li><a href="http://code.shutterstock.com/rickshaw/">Rickshaw</a>: no default annotation support, development is needed. Old browser support not available.</li>
<li><a href="http://c3js.org/samples/grid_x_lines.html">C3</a>: impressive library, but fails same as previous.</li>
<li><a href="http://www.simile-widgets.org/timeplot/">SIMILE widgets</a></li>
<li><a href="http://dygraphs.com/gallery/#g/annotations">Dygraphs</a> although supports annotated timelines, some development would be needed to create an intuitive and friendly visualization.</li>
</ul>


<p>So finally, Google chart has been chosen, at least for this prototype phase.</p>

<p><b>2. Creating a basic data service for first test</b></p>

<p>For the first interaction test we have created a simple JSON format which will be received in the browser to show the data. At this point, we will try to show only news headlines and we will expand the model later.</p>

<p>The JSON format is as follows:</p>

<pre class="code" data-lang="" data-unlink>  {&#34;article_list&#34;: 
    [
      {
        &#34;date&#34;: &#34;YYYY-MM-dd&#34;, 
        &#34;value&#34;: 1234, 
        &#34;headline&#34;: &#34;String with the news headline&#34;
      }, 
      ...
    ]
  }</pre>


<p>This will allow us to quickly interact with the graphic library, check the complexity for using the data and inspect the final results.</p>

<p><b>Note:</b> "value" can be empty or not, depending on that day stock price. "headline" can be empty is there is a stock price for that day, but no news.</p>

<p>At SPEEDA we use <a href="https://wicket.apache.org/">Apache Wicket</a> for the platform development. So in order to create a REST service, we will code a simple <a href="http://wicket.apache.org/guide/guide/resources.html">JSON Resource entity</a> extending AbstractResource. To be able to access the service, the final class that extends from our JSONResource will be mounted in our main application class.</p>

<p><b>Note:</b> resources do not check for user authorization by default, this will have to be implemented in our final resource class in the "getData" method.</p>

<pre class="code lang-java" data-lang="java" data-unlink><span class="synPreProc">package</span> com.uzabase.speeda.web.resource;

<span class="synPreProc">import</span> javax.servlet.http.HttpServletResponse;

<span class="synPreProc">import</span> org.apache.wicket.request.Response;
<span class="synPreProc">import</span> org.apache.wicket.request.resource.AbstractResource;
<span class="synPreProc">import</span> org.apache.wicket.request.resource.ContentDisposition;

<span class="synType">public</span> <span class="synType">abstract</span> <span class="synType">class</span> JSONResource <span class="synType">extends</span> AbstractResource {

    <span class="synType">private</span> <span class="synType">static</span> <span class="synType">final</span> <span class="synType">long</span> serialVersionUID = <span class="synConstant">1L</span>;
    <span class="synType">private</span> <span class="synType">final</span> String contentType = <span class="synConstant">&quot;application/json&quot;</span>;

    <span class="synPreProc">@Override</span>
    <span class="synType">protected</span> ResourceResponse newResourceResponse(<span class="synType">final</span> Attributes attributes) {
        <span class="synType">final</span> ResourceResponse response = <span class="synStatement">new</span> ResourceResponse();
        response.setContentType(<span class="synType">this</span>.contentType);
        response.setTextEncoding(<span class="synConstant">&quot;UTF-8&quot;</span>);

        <span class="synType">final</span> String data = getData(attributes);
        <span class="synStatement">if</span> (data == <span class="synConstant">null</span>) {
            response.setError(HttpServletResponse.SC_NOT_FOUND);
        } <span class="synStatement">else</span> {
            Long length = getLength(data);
            <span class="synStatement">if</span> (length != <span class="synConstant">null</span>) {
                response.setContentLength(length);
            }
            <span class="synStatement">if</span> (response.dataNeedsToBeWritten(attributes)) {
                response.setContentDisposition(ContentDisposition.INLINE);
                response.setWriteCallback(<span class="synStatement">new</span> WriteCallback() {
                    <span class="synPreProc">@Override</span>
                    <span class="synType">public</span> <span class="synType">void</span> writeData(<span class="synType">final</span> Attributes attributes) {
                        JSONResource.<span class="synType">this</span>.writeData(attributes.getResponse(), data);
                    }
                });
            }
        }

        <span class="synStatement">return</span> response;
    }

    <span class="synType">protected</span> <span class="synType">abstract</span> String getData(Attributes attributes);

    <span class="synType">protected</span> <span class="synType">void</span> writeData(Response response, String data) {
        response.write(data);
    }

    <span class="synType">protected</span> Long getLength(String data) {
        <span class="synStatement">return</span> (<span class="synType">long</span>) data.length();
    }
}
</pre>


<p><b>3. Data adjustements</b></p>

<p>Ok, let's add some Javascript code to the <a href="https://developers.google.com/chart/interactive/docs/gallery/annotationchart#Example">template at Google site</a> to process our JSON data:</p>

<pre class="code lang-javascript" data-lang="javascript" data-unlink>google.load(<span class="synConstant">'visualization'</span>, <span class="synConstant">'1'</span>, <span class="synIdentifier">{</span><span class="synConstant">'packages'</span>:<span class="synIdentifier">[</span><span class="synConstant">'annotationchart'</span><span class="synIdentifier">]}</span>);
google.setOnLoadCallback(drawChart);
<span class="synIdentifier">var</span> chart = <span class="synStatement">null</span>;
<span class="synIdentifier">function</span> drawChart() <span class="synIdentifier">{</span>
  <span class="synIdentifier">var</span> data = <span class="synStatement">new</span> google.visualization.DataTable();
  data.addColumn(<span class="synConstant">'date'</span>, <span class="synConstant">'Date'</span>);
  data.addColumn(<span class="synConstant">'number'</span>, <span class="synConstant">'Stock value'</span>);
  data.addColumn(<span class="synConstant">'string'</span>, <span class="synConstant">'News title'</span>);

  <span class="synIdentifier">var</span> node, date_parts, date, value, headline;
  <span class="synStatement">for</span> (i = 0 ; i &lt; myJSONObject.article_list.length;i++) <span class="synIdentifier">{</span>
    node = (myJSONObject.article_list<span class="synIdentifier">[</span>i<span class="synIdentifier">]</span>);
    date_parts = node<span class="synIdentifier">[</span><span class="synConstant">&quot;date&quot;</span><span class="synIdentifier">]</span>.split(<span class="synConstant">'-'</span>);
    date = <span class="synStatement">new</span> <span class="synType">Date</span>(parseInt(date_parts<span class="synIdentifier">[</span>0<span class="synIdentifier">]</span>), parseInt(date_parts<span class="synIdentifier">[</span>1<span class="synIdentifier">]</span>) -1, parseInt(date_parts<span class="synIdentifier">[</span>2<span class="synIdentifier">]</span>));
    value = node<span class="synIdentifier">[</span><span class="synConstant">&quot;value&quot;</span><span class="synIdentifier">]</span> == <span class="synStatement">undefined</span> ? 0 : parseFloat(node<span class="synIdentifier">[</span><span class="synConstant">&quot;value&quot;</span><span class="synIdentifier">]</span>);
    headline = node<span class="synIdentifier">[</span><span class="synConstant">&quot;headline&quot;</span><span class="synIdentifier">]</span> == <span class="synStatement">undefined</span> ? <span class="synConstant">&quot;&quot;</span> : node<span class="synIdentifier">[</span><span class="synConstant">&quot;headline&quot;</span><span class="synIdentifier">]</span>;

    <span class="synStatement">if</span> (value &gt; 0) <span class="synIdentifier">{</span>
      data.addRows(<span class="synIdentifier">[[</span>date, value, headline<span class="synIdentifier">]]</span>);
    <span class="synIdentifier">}</span>
  <span class="synIdentifier">}</span>
  chart = <span class="synStatement">new</span> google.visualization.AnnotationChart(<span class="synStatement">document</span>.getElementById(<span class="synConstant">'chart_div'</span>));

  <span class="synIdentifier">var</span> options = <span class="synIdentifier">{</span>
    displayAnnotations: <span class="synConstant">true</span>,
  <span class="synIdentifier">}</span>;
  
  chart.draw(data, options);
  google.visualization.events.addListener(chart, <span class="synConstant">'select'</span>, selectHandler);

<span class="synIdentifier">}</span>
</pre>


<p>Don't forget to add a request in the Javascript code to interact with the server and retrieve the JSON!</p>

<p>And the result...</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150204/20150204163820.png" alt="f:id:uzabase:20150204163820p:plain" title="f:id:uzabase:20150204163820p:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>Ooops! Looks like we have to order our event list, otherwise the flags over the timeline look odd...
We can easily order the returned array in the server side</p>

<pre class="code lang-java" data-lang="java" data-unlink><span class="synIdentifier">...</span>
  JSONArray entryPoints = <span class="synStatement">new</span> JSONArray();
  String[] sortedKeys = annotatedValues.keySet().toArray(<span class="synStatement">new</span> String[<span class="synConstant">0</span>]);
  Arrays.sort(sortedKeys, Collections.reverseOrder());
  <span class="synStatement">for</span> (String entry : sortedKeys) {
      entryPoints.add(annotatedValues.get(entry).asJSON());
  }
  JSONObject response = <span class="synStatement">new</span> JSONObject();
  response.put(<span class="synConstant">&quot;article_list&quot;</span>, entryPoints);

  <span class="synStatement">return</span> response.toString();
</pre>


<p>But this also can be done in the client side and save some memory in the server ;)</p>

<pre class="code lang-javascript" data-lang="javascript" data-unlink><span class="synIdentifier">var</span> ordered_array = myJSONObject.article_list.sort(<span class="synIdentifier">function</span>(a,b) <span class="synIdentifier">{</span><span class="synStatement">return</span> -1 * a<span class="synIdentifier">[</span><span class="synConstant">&quot;date&quot;</span><span class="synIdentifier">]</span>.localeCompare(b<span class="synIdentifier">[</span><span class="synConstant">&quot;date&quot;</span><span class="synIdentifier">]</span>)<span class="synIdentifier">}</span>);
</pre>




<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150204/20150204164653.png" alt="f:id:uzabase:20150204164653p:plain" title="f:id:uzabase:20150204164653p:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>Much better! :)</p>

<p><b>4. Add deals and extend timeline</b></p>

<p>Now for the remaining part, let's extend the JSON model to support deal data:</p>

<pre class="code" data-lang="" data-unlink>  {&#34;data&#34;: 
    [
      {
        &#34;date&#34;: &#34;YYYY-MM-dd&#34;, 
        &#34;value&#34;: 1234, 
        &#34;news_headline&#34;: &#34;String with the news headline&#34;,
        &#34;news_id&#34;: &#34;String with the article ID&#34;,
        &#34;deal_headline&#34;: &#34;String with the news headline&#34;,
        &#34;deal_id&#34;: &#34;String with the deal ID&#34;
      }, 
      ...
    ]
  }</pre>


<p>and modify the Javascript to process the new data</p>

<pre class="code lang-javascript" data-lang="javascript" data-unlink><span class="synIdentifier">var</span> data = <span class="synStatement">new</span> google.visualization.DataTable();
data.addColumn(<span class="synConstant">'date'</span>, <span class="synConstant">'Date'</span>);
data.addColumn(<span class="synConstant">'number'</span>, <span class="synConstant">'News'</span>);
data.addColumn(<span class="synConstant">'string'</span>, <span class="synConstant">'News title'</span>);
data.addColumn(<span class="synConstant">'string'</span>, <span class="synConstant">'News headline'</span>);
data.addColumn(<span class="synConstant">'number'</span>, <span class="synConstant">'Deal'</span>);
data.addColumn(<span class="synConstant">'string'</span>, <span class="synConstant">'Deal title'</span>);
data.addColumn(<span class="synConstant">'string'</span>, <span class="synConstant">'Deal headline'</span>);

<span class="synIdentifier">var</span> ordered_array = myJSONObject.article_list.sort(<span class="synIdentifier">function</span>(a,b) <span class="synIdentifier">{</span><span class="synStatement">return</span> -1 * a<span class="synIdentifier">[</span><span class="synConstant">&quot;date&quot;</span><span class="synIdentifier">]</span>.localeCompare(b<span class="synIdentifier">[</span><span class="synConstant">&quot;date&quot;</span><span class="synIdentifier">]</span>)<span class="synIdentifier">}</span>);
<span class="synIdentifier">var</span> node, date_parts,date, value, headline_news, title_news, headline_deal, title_deal;
<span class="synStatement">for</span> (i = 0 ; i &lt; ordered_array.length;i++) <span class="synIdentifier">{</span>
  node = (ordered_array<span class="synIdentifier">[</span>i<span class="synIdentifier">]</span>);
  date_parts = node<span class="synIdentifier">[</span><span class="synConstant">&quot;date&quot;</span><span class="synIdentifier">]</span>.split(<span class="synConstant">'-'</span>);
  date = <span class="synStatement">new</span> <span class="synType">Date</span>(parseInt(date_parts<span class="synIdentifier">[</span>0<span class="synIdentifier">]</span>), parseInt(date_parts<span class="synIdentifier">[</span>1<span class="synIdentifier">]</span>) -1, parseInt(date_parts<span class="synIdentifier">[</span>2<span class="synIdentifier">]</span>));
  value = node<span class="synIdentifier">[</span><span class="synConstant">&quot;value&quot;</span><span class="synIdentifier">]</span> == <span class="synStatement">undefined</span> ? 0 : parseFloat(node<span class="synIdentifier">[</span><span class="synConstant">&quot;value&quot;</span><span class="synIdentifier">]</span>);
  headline_news = node<span class="synIdentifier">[</span><span class="synConstant">&quot;news_headline&quot;</span><span class="synIdentifier">]</span> == <span class="synStatement">undefined</span> ? <span class="synConstant">&quot;&quot;</span> : node<span class="synIdentifier">[</span><span class="synConstant">&quot;news_headline&quot;</span><span class="synIdentifier">]</span>;
  title_news = node<span class="synIdentifier">[</span><span class="synConstant">&quot;news_headline&quot;</span><span class="synIdentifier">]</span> == <span class="synStatement">undefined</span> ? <span class="synConstant">&quot;&quot;</span> : <span class="synConstant">&quot;News&quot;</span>;
  headline_deal = node<span class="synIdentifier">[</span><span class="synConstant">&quot;deal_headline&quot;</span><span class="synIdentifier">]</span> == <span class="synStatement">undefined</span> ? <span class="synConstant">&quot;&quot;</span> : node<span class="synIdentifier">[</span><span class="synConstant">&quot;deal_headline&quot;</span><span class="synIdentifier">]</span>;
  title_deal = node<span class="synIdentifier">[</span><span class="synConstant">&quot;deal_headline&quot;</span><span class="synIdentifier">]</span> == <span class="synStatement">undefined</span> ? <span class="synConstant">&quot;&quot;</span> : <span class="synConstant">&quot;Deal&quot;</span>;
  
  <span class="synStatement">if</span> (value &gt; 0) <span class="synIdentifier">{</span>
    data.addRows(<span class="synIdentifier">[[</span>date, value, title_news, headline_news, value, title_deal, headline_deal<span class="synIdentifier">]]</span>);
  <span class="synIdentifier">}</span>
<span class="synIdentifier">}</span>
</pre>


<p>What we are doing is adding a new graph over the first one (with the same values) and then attach the deal flags to it. Not the perfect solution, but this way we can see both news (blue) and deals (red). And it is good enough for a prototype.</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150204/20150204170601.png" alt="f:id:uzabase:20150204170601p:plain" title="f:id:uzabase:20150204170601p:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>Looks like most of our data is somewhat recent. To tell the library to show only the last 6 months at the beginning there is a useful option:</p>

<pre class="code lang-javascript" data-lang="javascript" data-unlink><span class="synIdentifier">var</span> d = <span class="synStatement">new</span> <span class="synType">Date</span>();
d.setMonth(d.getMonth() - 6);

<span class="synIdentifier">var</span> options = <span class="synIdentifier">{</span>
  displayAnnotations: <span class="synConstant">true</span>,
  zoomStartTime: d
<span class="synIdentifier">}</span>;
</pre>


<p>And then it looks much more useful :)</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150204/20150204170828.png" alt="f:id:uzabase:20150204170828p:plain" title="f:id:uzabase:20150204170828p:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>Finally, we put our Javascript code in a blank Wicket page and the prototype is ready to be shown!</p>

<p>There is still some pending job:</p>

<ul>
<li>a market selector (as public companies may appear in more than one stock market).</li>
<li>a data filter (to be able to shown either "news" or "deals", or both).</li>
<li>a function to capture the clicks in the data table and open the article body (using google.visualization.events.addListener).</li>
</ul>


<p>but as a prototype is good enough to be shown at the next department meeting.</p>

<p>＼(＾▽＾*) お疲れ様でした！</p>
</div></div>(Published: Mon, 09 Feb 2015 11:30:59 +0900)<br><br>
<b> クラッシュしないアプリ制作の鉄則</b><br><a href="http://tech.uzabase.com/entry/2015/02/05/120046">http://tech.uzabase.com/entry/2015/02/05/120046</a><br><a data-toggle="collapse" href="#collapse22">View / Hide 'description'</a><br><div id="collapse22" class="panel-collapse collapse"><div class="panel-body"><p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150204/20150204153129.jpg" alt="f:id:uzabase:20150204153129j:plain" title="f:id:uzabase:20150204153129j:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>サービスの開発を行っている大川です。<br /></p>

<p>本日はのスマホアプリがどんな設計になっているかを紹介します。社内LTネタを元にしています。<br /></p>

<p>階段の部分はどうやってるの？（<a href="http://tech.uzabase.com/entry/2014/08/newspicksui.html">『のUIデザイン』</a>）<br />
文字が読みやすいように工夫しているの？<br />
などいろいろと観点はあるとは思いますが、まずは全体として絶対に守っている「竜骨」とも言うべきコアの設計についてお話しします。どのアプリでも必ず守るべき鉄則となります。</p>

<p>鉄則とは端的に言うと、<br />
<b>ビジネスロジックをView, ViewControllerに密結合させない</b><br />
ということです。<br /></p>

<p>まず大前提として、下記の3レイヤーに分けた設計を行います。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150131/20150131232251.jpg" alt="f:id:uzabase:20150131232251j:plain" title="f:id:uzabase:20150131232251j:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>プレゼンテーション層は、ユーザーの操作に従ってViewのコントロールを行います。<br />
ビジネス層は、データそのものや、データの取り扱い責務を担います。Viewへのデータ変更通知も行います。<b>Viewのいかなる変更もビジネス層には影響しません。</b>iPhone / iPad などのデバイスにも依存しない領域です。<br />
データアクセス層は、サーバーのAPIに問い合わせを行ったり、ローカルストレージ（PreferenceやSQLite、WeakCacheなど）にアクセスします。<br /></p>

<p>スマホアプリの最大の特徴は、タッチスクリーンで操作が行われると言うことです。プレゼンテーション層のView, ViewControllerはめまぐるしく生成、消滅を繰り返します。0.5秒も経たずに画面を遷移することもしばしばです。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150201/20150201114808.jpg" alt="f:id:uzabase:20150201114808j:plain" title="f:id:uzabase:20150201114808j:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>ビジネス層のServiceがViewControllerのインスタンスをがっちり握っているとしたらどうなるでしょう。<br />
例えばTechnologyカテゴリのニュース一覧をとってこようとしたとき、サーバーに問い合わせに行って帰ってきたときには、ユーザーはもうTechnologyカテゴリを閉じていて、経済カテゴリを見ているかもしれません。つまり、Callback先のTechnologyカテゴリのViewが既に解放されてしまっているということです。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150131/20150131234158.jpg" alt="f:id:uzabase:20150131234158j:plain" title="f:id:uzabase:20150131234158j:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>メモリ解放が行われた場所にそのままCallbackすれば、必ず<b>クラッシュ</b>します。1度アプリがクラッシュすると、<b>84%のユーザーが離脱する</b>というデータもあるようです。<br />
これは大変な問題です。なんとかしなくてはいけません。<br />
ここで、GoFのデザインパターンのうちの <i>"Observer Pattern"</i> が活躍します。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150131/20150131234902.jpg" alt="f:id:uzabase:20150131234902j:plain" title="f:id:uzabase:20150131234902j:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>Observer Patternを使えば、<b>通知の受取人がいなければそのまま無視するだけ</b>という構造をつくりだすことができます。<br />
iOSではNSNotification、AndroidではBroadcastReceiverのような仕組みを使うと良いでしょう。</p>

<p>また、<b>1つの要求に対して1つの返事を返す、という構造にしなくて良くなる</b>ため、せっかちなユーザーの操作に影響されてシステム全体が遅くなってしまう問題を回避することができます。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150201/20150201001326.jpg" alt="f:id:uzabase:20150201001326j:plain" title="f:id:uzabase:20150201001326j:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>プレゼンテーション層とビジネス層はインスタンスの寿命が全然違うので、<b>Observer Patternによる極めて疎な結合をさせるように心がけるべし</b>、という言い方もできます。
ちなみにViewが解放されるときに必ずObserver解除をしないと、それがクラッシュ要因になってしまいます。</p>

<p>以上が、スマホアプリでは<b>ビジネスロジックをView, ViewControllerに密結合させない</b>という鉄則でした。</p>

<p>さて、もSPEEDAも積極的にエンジニア採用活動をしております。Uzabaseに遊びにきて、詳しい話がききたい方はこちらから！ ↓</p>

<p><iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.wantedly.com%2Fprojects%2F11504" title="100年に一度のメディア変革期！世界一のニュースプラットフォームを創ろう by 株式会社ユーザベース" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"><a href="https://www.wantedly.com/projects/11504">100年に一度のメディア変革期！世界一のニュースプラットフォームを創ろう by 株式会社ユーザベース</a></iframe></p>

<p><a href="https://www.wantedly.com/projects/11504">100&#x5E74;&#x306B;&#x4E00;&#x5EA6;&#x306E;&#x30E1;&#x30C7;&#x30A3;&#x30A2;&#x5909;&#x9769;&#x671F;&#xFF01;&#x4E16;&#x754C;&#x4E00;&#x306E;&#x30CB;&#x30E5;&#x30FC;&#x30B9;&#x30D7;&#x30E9;&#x30C3;&#x30C8;&#x30D5;&#x30A9;&#x30FC;&#x30E0;&#x3092;&#x5275;&#x308D;&#x3046; - &#x682A;&#x5F0F;&#x4F1A;&#x793E;&#x30E6;&#x30FC;&#x30B6;&#x30D9;&#x30FC;&#x30B9;&#x306E;&#x6C42;&#x4EBA; - Wantedly</a></p>
</div></div>(Published: Thu, 05 Feb 2015 12:00:46 +0900)<br><br>
<b>簡単シンプルなSQLライブラリ『JDBI』</b><br><a href="http://tech.uzabase.com/entry/2015/02/04/170408">http://tech.uzabase.com/entry/2015/02/04/170408</a><br><a data-toggle="collapse" href="#collapse23">View / Hide 'description'</a><br><div id="collapse23" class="panel-collapse collapse"><div class="panel-body"><p>技術チームインターンの前田です。</p>

<p>アプリケーションを開発していると、データベースと連携する必要が出てくる場合が多いかと思います。</p>

<p>この記事では、JavaプログラムからRDBMSを利用する際に便利なライブラリを紹介します。</p>

<p>このライブラリは、私が取り組んだ業務でも使用したもので、JDBIと呼ばれています。</p>

<p><b>JDBIとは</b></p>

<ul>
<li><p>Javaプログラム↔RDBMS間の連携に便利なSQLライブラリです。</p></li>
<li><p>JDBIはJDBCの上に構築されているもので、JDBCのAPIの使い勝手の悪さをカバーしてくれます。</p></li>
</ul>


<p><b>JDBIの便利な点</b></p>

<ul>
<li><p>JDBIを利用することで、簡単にプログラムのロジックとSQL文を分離することが出来ます。</p></li>
<li><p>プログラム中のオブジェクトとRDBMSのレコード間の対応付けを行う、所謂O/Rマッパーとしても機能します。</p></li>
<li><p>O/Rマッピングの設定に、設定ファイルを使用しません。</p></li>
</ul>


<p>似たような機能を持つフレームワークとしてHibernate、MyBatisなどが挙げられますが、これらはO/Rマッピングのための各種ファイル(~.xml等)の設定が必要であったり、それらを自動設定するためにもツールの使用が必要であったりで、利用がやや複雑な印象を受けます。</p>

<p>JDBIであれば、そのような設定ファイルや複雑な設定が不要で、シンプルなJavaコードのみで簡単に動作させることができます。</p>

<p>以下、簡単にその使用例を紹介します。</p>

<p>例えば、次のようなクラスがあったとします。</p>

<pre class="code lang-java" data-lang="java" data-unlink><span class="synType">public</span> <span class="synType">class</span> Company {
    <span class="synType">private</span> String name;
    <span class="synType">private</span> <span class="synType">int</span> num;
    
    <span class="synComment">// アクセサメソッドは省略</span>
}
</pre>


<p>上記のオブジェクトに対応するテーブルを作成することにします。</p>

<pre class="code lang-sql" data-lang="sql" data-unlink><span class="synStatement">CREATE</span> <span class="synSpecial">TABLE</span> `company` (
  `name` <span class="synType">varchar</span>(<span class="synConstant">20</span>) ,
  `number_of_employees` int(<span class="synConstant">11</span>)
) 
</pre>


<p>このとき、Daoは以下のようになります（JDBIではDaoにはインターフェースを使用します）。
この例では、オブジェクトが保持するフィールドの値をDBに挿入するSQL文と、
nameの値から対応するnum_of_employeesを取得するSQL文を書いています。</p>

<pre class="code lang-java" data-lang="java" data-unlink><span class="synType">public</span> <span class="synType">interface</span> CompanyDao {
    <span class="synPreProc">@SqlQuery</span>(<span class="synConstant">&quot;SELECT number_of_employees from company WHERE name = :name&quot;</span>)
    <span class="synType">int</span> findByName(<span class="synPreProc">@Bind</span>(<span class="synConstant">&quot;name&quot;</span>) String n);

    <span class="synPreProc">@SqlUpdate</span>(<span class="synConstant">&quot;INSERT INTO company(name,number_of_employees) values(:name,:num)&quot;</span>)
    <span class="synType">void</span> insert(<span class="synPreProc">@BindBean</span> Company d);
}
</pre>


<p>それぞれの処理を詳しく見ていきます。</p>

<p>@SqlQuery はデータを取得するSQL文を表し、@SqlUpdate はデータを更新するSQL文を表しています。
findByNameメソッドで使用している@Bindアノテーションは、プレースホルダに入るパラメータを指定するために使用します。
この場合だと、引数で与えられたString型のnに格納されている値がSQL文内の「:name」に対応付けられます。
メソッドの戻り値には、取得するデータの型を指定します。
例えば、上記のfindByNameメソッドはString型のパラメータを元にint型のデータを取得したいので、戻り値はint型です。</p>

<p>insertメソッドには、引数にとったJavaオブジェクトをRDBMSに挿入する処理が書かれています。
@BindBeanアノテーションが付けられているオブジェクトに対して、プレースホルダの「:◯◯」という記述の◯◯に対応するgetterが呼び出されることによって、プレースホルダへの対応付けが行われます。
この場合だと、Company型のdのgetName()とgetNum()メソッドが呼び出されます。</p>

<p>ここでは動作の説明を書きましたが、このような説明がなくても上記のコードを見ればすぐに動作イメージが掴めるような記述方式になっていると思います。</p>

<p>実際にDaoを使用してSQL文を実行するクラスを次に示します。</p>

<pre class="code lang-java" data-lang="java" data-unlink><span class="synType">public</span> <span class="synType">class</span> Test {
    <span class="synType">public</span> <span class="synType">static</span> <span class="synType">void</span> main(String[] args) {
        Company company = <span class="synStatement">new</span> Company(<span class="synConstant">&quot;hoge&quot;</span>, <span class="synConstant">10</span>);
        DBI dbi = <span class="synStatement">new</span> DBI(<span class="synConstant">&quot;JDBC接続URL&quot;</span>, <span class="synConstant">&quot;ユーザ名&quot;</span>, <span class="synConstant">&quot;パスワード&quot;</span>);
        CompanyDao dao = dbi.onDemand(CompanyDao.<span class="synType">class</span>);
        dao.insert(company);
        System.out.println(dao.findByName(<span class="synConstant">&quot;hoge&quot;</span>));
    }
}
</pre>


<p>上記のコードでは、「10」とコンソール出力します。</p>

<p>このように、JDBIではシンプル且つ簡単にデータベースとJavaプログラムを連携することができます。</p>

<p>ここではオブジェクト→レコードのマッピングを行いましたが、もちろんレコード→オブジェクトへのマッピングも可能です。
また、トランザクション機能などの基本的な機能も備えています。</p>

<p>現在では様々なO/Rマッピングフレームワークが存在し、状況や好みによってどれを選択するかは変わってくるかと思いますが、このライブラリもその選択肢の一つになり得るものだと思います。</p>
</div></div>(Published: Wed, 04 Feb 2015 17:04:08 +0900)<br><br>
<b>Cool Hinemos!　Hinemos5.0にとっても期待している運用エンジニア</b><br><a href="http://tech.uzabase.com/entry/2015/01/29/102935">http://tech.uzabase.com/entry/2015/01/29/102935</a><br><a data-toggle="collapse" href="#collapse24">View / Hide 'description'</a><br><div id="collapse24" class="panel-collapse collapse"><div class="panel-body"><p>初めまして、UZABASEインフラチームの小林です。<br />
弊社インフラチームは5名（1名海外留学中）で構成されていて、ざっくり言うと、先進技術検証・導入を主担当とするメンバーと、新規リリース対応・運用改善を主担当にするメンバーの2チームに分かれています。
（実際には、主担当と副担当がそれぞれクロスしているので、満遍なく業務に携わっていますが。）</br>
基本やりたい事を自由に認めてもらえる環境なので、UZABASEに所属しながら海外留学できる環境でもあります。</br>
で、僕はSPEEDAの運用管理を主な生業としてます。<br />
<br /></p>

<h5>早速なんですが、Hinemos ver 5.0 が5月に出ます！</h5>

<p>新機能等の詳細は、
<a href="http://www.slideshare.net/Hinemos/hinemos-world2014a1-1hinemos50"><span style="color: #2196f3">【HinemosWorld2014】A1-1_Hinemos5.0 ロードマップ</span></a>
を参照していただきたいですが、
なんと機能追加だけでなく、<a href="https://twitter.com/hinemos_info/status/540408380070694914"><span style="color: #2196f3">公式キャラクター</span></a>も出来た模様です。<br /></p>

<iframe src="//www.slideshare.net/slideshow/embed_code/42782990" width="425" height="355" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe>


<p> <div style="margin-bottom:5px"> <strong> <a href="//www.slideshare.net/Hinemos/hinemos-world2014a1-1hinemos50" title="【HinemosWorld2014】A1-1_Hinemos5.0 ロードマップ" target="_blank">【HinemosWorld2014】A1-1_Hinemos5.0 ロードマップ</a> </strong> from <strong><a href="//www.slideshare.net/Hinemos" target="_blank">Hinemos</a></strong> </div>
<br />
<span style="color: #1464b3"><b>☆公式キャラクターのモニタちゃん</b></span><span style="font-size: 80%">　(Hinemos公式Twitterより拝借)</span></p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150128/20150128110015.png" alt="f:id:uzabase:20150128110015p:plain" title="f:id:uzabase:20150128110015p:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p><br />
<br />
Hinemosを公開してから10周年（ver1は2005年8月に公開されました）という事で、気合入ってますね！！
<br />
<br />
で、弊社では、SPEEDAの運用でHinemos3.2.1を使用しています。<br />
2010年9月に発表されたので、もうだいぶ古いバージョン使っている事になります。
ちなみに、Hinemosは「verx.x」までをメジャーバージョン、「verx.x.x」までをマイナーバージョンとしているので、
3.2.1 → 5.0 には3つのメジャーバージョンアップが必要になる事になります。</p>

<p>そもそも、Hinemosとは監視管理、ジョブ管理、性能管理を行う機能を備えているOSS製品ですが、
UZABASEでは、ジョブ管理で使用しています。（監視管理はNagiosを使用中）</p>

<p>で、ジョブ監視をする以上は、使用頻度が高いのですが、Hinemos3.2.1では不便な点がちらほら目立ってきました。</p>

<ol>
<li><p>Windowsでしか動かない（OS依存）<br />
でもって、Windows8端末だとうまく動かないのが出てきたり、そもそもMacとか使っている開発者も増えてきていて、
今の弊社の環境で不都合が多くなってきました。</p></li>
<li><p>動作が重い<br />
今使っているHinemos3.2.1はとても重いんです・・・
最初にジョブ履歴の画面を開くのに数分かかるので、即時障害対応するために常時開きっぱなし、
ジョブを登録・修正する時も数分待つので、ドキドキが止まりません。（ようやく慣れましたが。）</p></li>
</ol>


<p>なので、そろそろバージョンアップしたいと思っていて、現在最新版の4.1まで上げるとどうなるか、リリースノートから弊社環境ですごく使えそうな部分だけでも抜粋してみると、</p>

<ul>
<li>Hinemos エージェント通信機構の改善（Webサービス化）</li>
<li>WebサービスAPI完全対応</li>
<li>編集ロック</br>
　　ジョブ定義の編集に排他機構を組み込みました。</li>
<li>日跨ぎジョブ対応</br>
　　日跨ぎで実行されるジョブが動作するようになりました。</li>
<li>カレンダパターン</br>
　　祝日のパターンなどを複数のカレンダで共有できるようになりました。</li>
<li>大幅な性能改善（3.2→4.0→4.1でそれぞれ性能改善が図られているそうです。）</li>
</ul>


<p>とこれだけでもすごく期待大です。
<br /><br /></p>

<p>じゃあ、わざわざHinemos5にしなくても良いんじゃない？と思ってHinemos5.0 ロードマップのスライドをみてみると、
（以下の画像は上のスライドから抜粋です。）</p>

<h4>Webブラウザ対応！！<span style="font-size: 80%">(らしい)</span></h4>

<p><span style="color: #ff5252"><b>→Windows依存からの開放！！</b></span></p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150128/20150128120358.png" alt="f:id:uzabase:20150128120358p:plain" title="f:id:uzabase:20150128120358p:plain" class="hatena-fotolife" itemprop="image"></span></p>


<h4>今まで以上のサクサク動作！<span style="font-size: 80%">(らしい)</span></h4>

<p><span style="color: #ff5252"><b>→Hinemos開きっぱなしからの開放！！</b></span></p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150128/20150128120417.png" alt="f:id:uzabase:20150128120417p:plain" title="f:id:uzabase:20150128120417p:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>と、とてもワクワクする文言が踊っています！（当然それ以外にもおもしろそうな機能がたくさんあります。）</p></p>
</br></br></p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150127/20150127225141.png" alt="f:id:uzabase:20150127225141p:plain" title="f:id:uzabase:20150127225141p:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150128/20150128115510.png" alt="f:id:uzabase:20150128115510p:plain" title="f:id:uzabase:20150128115510p:plain" class="hatena-fotolife" itemprop="image"></span></p>




<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150127/20150127225233.png" alt="f:id:uzabase:20150127225233p:plain" title="f:id:uzabase:20150127225233p:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150128/20150128115502.png" alt="f:id:uzabase:20150128115502p:plain" title="f:id:uzabase:20150128115502p:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>これはHinemos5で決まりでしょ！
というわけで、今から発表が待ちどおしいです！！</br>
ただ、いきなり使うと人柱になっちゃったりするのかな？という不安や、現在ジョブ検知機能も一部Nagiosで動いているからそっちの修正するの辛いなぁと思っているのは心の内に秘めておきます。。。</br>
</br>
</br>
さて、そんなUZABASEを一緒に支えてくれるエンジニアを募集しています！気軽にオフィスに遊びに来てください。</br>
見学、応募は<a href="https://www.wantedly.com/companies/uzabase-inc">Wantedly</a>からお願いします！</p>
</div></div>(Published: Thu, 29 Jan 2015 10:29:35 +0900)<br><br>
<b>はじめてのビジュアライゼーション ～Tableau, Highchart.js触ってみた～</b><br><a href="http://tech.uzabase.com/entry/2015/01/22/102741">http://tech.uzabase.com/entry/2015/01/22/102741</a><br><a data-toggle="collapse" href="#collapse25">View / Hide 'description'</a><br><div id="collapse25" class="panel-collapse collapse"><div class="panel-body"><p>ユーザベースで<a href="http://www.uzabase.com/speeda/">SPEEDA</a>の開発を担当しています。
外間です。</p>

<p>ビジュアライゼーションのニーズが高まり続ける中、
先日僕もビジュアライゼーションで有名な、あの<a href="http://www.tableau.com/ja-jp/">Tableau</a>のセミナーに参加してきました。</p>

<h6>Tableau</h6>

<p>Tableauとは簡単に言えば、データを視覚化し分析を助けるBIツールです。
主に以下のような特徴があります。</p>

<ul>
<li>インメモリで動作が軽い</li>
<li>様々なデータソースに対応（約40種）</li>
</ul>


<p>また、作成した資料を自由に組み替えてダッシュボードにまとめ、Web上に公開するといったこともできます。
<a href="http://www.tableau.com/public/">Tableau Public</a>というサイトには、ユーザーが公開しているダッシュボードが集められていてかなり遊べます。</p>

<p>セミナーでは実際にTableau Desktopを使って、基本的な操作方法を学びました。<br/>
僕も試しにSPEEDAが持っている企業データを投入して、世界地図上に企業の売上高を円グラフで表示してみたところ、簡単にできました。<br/>
Tableau Publicからピックアップすると、このようなイメージです。<br/>
<a href="http://public.tableausoftware.com/shared/4F7DHJRKK?">Which Mobile OS Dominates in Europe?</a></p>

<p>インメモリで軽いのですが、SPEEDAのように大量データを実際に使える形で分析するとなると、だいぶハイスペックなマシンでないと動かないんじゃないか。。
という懸念はありますね。</p>

<p>当初は無料トライアル版を使って、SPEEDAの様々なデータを多角的に見てみたかったんですが、
そうこうしている間にトライアル期間である2週間があっという間に過ぎてしまいました。。</p>

<p>とはいえ、今できるビジュアライズの手法としてどのようなものがあるのか
この機会にいろいろと触りたい気持ちはあります。</p>

<p>ビジュアライゼーションと言えば<a href="http://ja.d3js.node.ws/">D3.js</a>！<br/>
ですが、D3.jsは当ブログでも過去に複数の方が触れているので、今回は別のライブラリに触れたいと思います。</p>

<h6>Highchart.js</h6>

<p><a href="http://www.highcharts.com/">Highchart.js</a>とは、グラフを描画するためのJSライブラリです。<br/>
2009年にリリースされておりご存知の方も多いかと思いますが、僕は触ったことが無かったのでこの機会に触ってみたいと思います。</p>

<p>Highchart.jsは主に以下のような特徴があります。</p>

<ul>
<li>グラフの美しさと豊富さ</li>
<li>JSファイルを1つ読み込むだけで使える手軽さ</li>
</ul>


<p>実際に公式サイトのデモ画面を見てみるとかなりの種類のグラフが用意されていることが分かります。<a href="http://www.highcharts.com/demo/">デモ</a></p>

<p>実際に僕も簡単なグラフを作成してみました。<br/>
右下のグラフはたったこれだけのコードだけで書けてしまいます。（シンプルなので説明は省きます）</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150121/20150121125202.png" alt="f:id:uzabase:20150121125202p:plain" title="f:id:uzabase:20150121125202p:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p><a href="http://www.uzabase.com/speeda/">SPEEDA</a>では別の手法を用いてグラフを表示していますが、さらに多種多様な見せ方を要求された場合、使えそうです。</p>

<p>今回はここまでですが、実際にデータを投入して様々な表示パターンを試したい好奇心に掻き立てられたので、時間を見つけてやってみようと思います。</p>

<p>貴重なデータを最大限に活かすためにも、
効果的な見せ方とその手法を学び、ニーズに応えられるよう準備しておきたいものです。</p>

<p>ユーザベースでは、新しい技術に興味を持ち、一緒に探究してより良いシステムを作っていける仲間を募集しています。
一緒にデータビジュアライズに挑戦したい！という方は、ぜひ一度<a href="https://www.wantedly.com/companies/uzabase-inc">Wantedly</a>をご覧ください。</p>
</div></div>(Published: Thu, 22 Jan 2015 10:27:41 +0900)<br><br>
<b>世界一ハッピーでワクワクする会社を目指して ～SPEEDA, を生んだ企業文化～</b><br><a href="http://tech.uzabase.com/entry/2015/01/15/102658">http://tech.uzabase.com/entry/2015/01/15/102658</a><br><a data-toggle="collapse" href="#collapse26">View / Hide 'description'</a><br><div id="collapse26" class="panel-collapse collapse"><div class="panel-body"><div style="background: white;"><span style="font-weight: normal;">SPEEDA開発チームの中島です。</span></div>
<div style="background: white;"> </div>
<div style="background: white;">UZABASEでは、現在SPEEDA/という2つの経済に特化したサービスを展開しており、どちらも自社開発をしています。</div>
<div style="background: white;">今日は、UZABASEが何を目指し、何を大事にしているか、働き方や開発スタイルなども含め紹介したいと思います。</div>
<div style="background: white;"> </div>
<h3 style="background: white;"><strong>UZABASEが目指すもの：ミッション</strong></h3>
<div style="background: white;"><br /> 「世界一の経済メディアを作る」</div>
<div style="background: white;"> </div>
<div style="background: white;">UZABASEのメンバーそれぞれで多様なイメージがあると思いますが、私が考える「世界一の経済メディア」とは、世界中のビジネスパーソンが何らかの経済情報を取得する際、まずUZABASEにアクセスする、という状態です。</div>
<div style="background: white;">より具体的に言うと、</div>
<div style="background: white;">『世界中のあらゆるビジネス情報の整理やコンテンツの自社作成を行い、UZABASEのプロダクト全てがシームレスに横連携され、知見のある専門家が常に傍にいるかのようなイノベーティブな経済プラットフォームを「人×システム」の力で展開し、世界のデファクトスタンダードであること』</div>
<div style="background: white;">を目指しています。</div>
<div style="background: white;"><br /> 実際にSPEEDA事業においては、世界中で利用されるサービスへと成長させるべく、昨年から海外進出を開始し加速させています。</div>
<div style="background: white;"> </div>
<h3 style="background: white;"><strong>UZABASEが大事にしているもの：7つのルール</strong></h3>
<div style="background: white;"><br /> ミッションを実現するため、私達が何を大事にし、どのような想いを持って働いているかについて話をします。</div>
<div style="background: white;"> </div>
<div style="background: white;">UZABASEには出社時間や服装、出社義務などの決まったルールはなく全てが自由です。私自身、会社にスーツで出社したことは、ほとんどありません。ただし、唯一守らなければならない原則として「7つのルール」があります。</div>
<div style="background: white;"> </div>
<div style="background: white;">創業から3年間ぐらいは全くルールがありませんでしたが、社員が増えていく中で、各自の見えている景色の違いなどから、少しずつすれ違いが生じることも出てきたため、UZABASE全員が統一してもつ価値観を整備し、行動指針のようなものを策定したものが「7つのルール」です。</div>
<div style="background: white;"> </div>
<div style="background: white;">仕事をする上で、何らかの行動・意思決定をする際、判断に迷った際などは、この7つのルールに立ち返り、反しないようにする、ということを決めています。7つのルールをベースに議論ができれば、意見の食い違いがあったとしても必ずいい方向に向かうと私たちは信じています。</div>
<div style="background: white;"> </div>
<div style="background: white;">　【7つのルール】</div>
<div style="background: white;">　　1. 自由主義で行こう</div>
<div style="background: white;">　　2. 創造性がなければ意味がない</div>
<div style="background: white;">　　3. ユーザーの理想から始める</div>
<div style="background: white;">　　4. スピードで驚かす</div>
<div style="background: white;">　　5. 迷ったら挑戦する道を選ぶ</div>
<div style="background: white;">　　6. 渦中の友を助ける</div>
<div style="background: white;">　　7. 異能は才能</div>
<div style="background: white;">　　※詳細は<a href="http://www.uzabase.com/company/#company-sec2">http://www.uzabase.com/company/#company-sec2</a></div>
<div style="background: white;"> </div>
<div style="background: white;">7つのルールがどう実践されているのか、実例も含め3つ紹介したいと思います。</div>
<div style="background: white;"> </div>
<div style="background: white;"><strong>■自由主義で行こう</strong></div>
<div style="background: white;">自由な環境の下でこそクリエイティブな発想が生まれ、かつ最高のパフォーマンスが出せる、と私たちは信じているので、出社義務や時間、服装に決まりはなく、働き方や開発スタイルも自分たちがベストだと思うやり方を実践することが可能です。</div>
<div style="background: white;"> </div>
<div style="background: white;">マーケットのニーズや競合情報、会社の状況など、守秘義務やプライバシーに関わるところ以外は全て情報共有されており、その情報を元に現場の人間がオーナーシップを持って意思決定できるようになっています。</div>
<div style="background: white;"> </div>
<div style="background: white;">重要なことは自分を律すること、コミットに対して結果責任を持ってベストエフォートすること、高速でPDCAを回していくことです。</div>
<div style="background: white;">それができていれば、どうやりたいかの手法に関しては完全に自分たちのやりたい方法で実践できます。</div>
<div style="background: white;"> </div>
<div style="background: white;">開発スタイルを例にあげると、完全にアジャイルな手法でプロジェクトを進めているチームもあれば、アジャイルやウォーターフォールなど、プロジェクトによってスタイルを変更しているチームなど、チームによってやり方は様々です。</div>
<div style="background: white;"> </div>
<div style="background: white;"><strong>■創造性がなければ意味がない</strong></div>
<div style="background: white;">Work smarter, More creativeというSPEEDAのキャッチコピーにも表れていますが、労働集約型にならないよう、システムでできることは全てシステムの力で解決し、人の手でしかできないより付加価値の高い部分を人の力でやろうという思想のもと、システムでできる範囲を広げていくため、クリエイティブな発想を日々の働き方やプロダクトに反映しています。</div>
<div style="background: white;"> </div>
<div style="background: white;">システムの力でイノベーションを起こすためには技術力を磨くことも重要なので、技術チーム全体の技術力の底上げを図る一環として、外部の有識者を招待して「技術勉強会」を定期的に開催しています。また、イノベーションを起こす役割としては、難題の解決や新しいビジネスの種を創造する「イノベーションチーム」を組織するなど、技術力のある会社となるべく様々な取り組みをしています。</div>
<div style="background: white;"> </div>
<div style="background: white;">また、UZABASEでは年に1回Think Beyond Meetingというイベントを開催しています。</div>
<div style="background: white;">このイベントは創業の2008年から続いており、社員全員が参加し、任意のチーム編成でアイディアを考えて発表する場で、有用な提案は実践されます。</div>
<div style="background: white;">テーマは、会社のミッションと合致していて会社を少しでもよりよくするものであれば何でもよく、新事業やコミュニケーション活性化のアイディア、日々のオペレーション改善案など、毎年創造性溢れる様々な発表があります。</div>
<div style="background: white;">これは、私たちがイノベーティブな会社でありたい、という思いで続けているイベントの一つで、より異なるバックグラウンドを持った才能が組み合わさり、創造性にあふれるアイディアが生まれる土壌となっています。</div>
<div style="background: white;"> </div>
<div style="background: white;"><strong>■異能は才能</strong></div>
<div style="background: white;">技術チームの日々の業務においては、よりクリエイティブな発想をプロダクトに反映するべく、異なる才能、異なる国、異なる文化的背景、異なる嗜好を持つ人材を組み合わせてチーム編成をしています。</div>
<div style="background: white;"> </div>
<div style="background: white;">例えば、私のSPEEDA開発チームには、フィリピン人、スペイン人、大企業出身の人、ベンチャー出身の人など、様々なバックグラウンドの人がいます。</div>
<div style="background: white;">私自身、UZABASEに入る前はオーストラリアへの留学や、梨農園で働いたことがあるなど、ジョインした当時ITは全くの未経験でした。</div>
<div style="background: white;"> </div>
<div style="background: white;">国が違うと言語の問題などもあり、短期的にはコミニケーションコストが高くなることもありますが、様々な意見が交差することにより、中長期的にみるとイノベーティブな仕組み・プロダクトが発生しやすい環境であると感じています。</div>
<div style="background: white;"> </div>
<div style="background: white;"> </div>
<h3 style="background: white;"><strong>UZABASEが大事にしているもの：みんながハッピーでいられる会社</strong></h3>
<div style="background: white;"><br /> 私は創業の2008年からUZABASEに在籍していますが、最初の頃に代表の梅田が話していた言葉で強く印象に残っているものがあります。</div>
<div style="background: white;"> </div>
<div style="background: white;">「仕事だけの人生ってつまらないよね。プライベートも大事にして、仕事とプライベートを高次元でバランスさせて、互いが原動力となり両輪がしっかりとまわっていく、そんな状態が理想だし、それを実現させるために起業したんだ。だから、生産性の向上をひたすら追及し、みなが高いパフォーマンスを発揮することによって世界一休みが多い会社にしたい。」</div>
<div style="background: white;"> </div>
<div style="background: white;">この言葉のように、私たちは、仕事だけではなくプライベートも充実させることを重視して働いています。それは、仕事をがんばった結果家庭が崩壊した、なんて悲しい状況を生み出す会社でありたくないし、社員みんながハッピーでいられる会社でありたいからです。なので、例えば家族や自分の大切な人が病気になるなど何かあった場合は、そちらを最優先にしよう、そして周りのメンバーで全力でフォローしよう（渦中の友を助ける）という文化が根付いています。</div>
<div style="background: white;"> </div>
<div style="background: white;">仕事とプライベートを両立させることは簡単なことではありませんが、それを目指し、挑戦し続けていく会社でありたい。</div>
<div style="background: white;"> </div>
<div style="background: white;">こうしたミッション、バリューに共感し、イノベーティブで世界中の人々に利用されるサービスを作っていく事にワクワクする人、ぜひ一緒に働きましょう。興味を持った方は<a href="https://www.wantedly.com/companies/uzabase-inc">Wantedly</a>からご応募ください！ </div></div></div>(Published: Thu, 15 Jan 2015 10:26:58 +0900)<br><br>
<b>SPEEDAに導入して分かった、CDNの劇的な効果</b><br><a href="http://tech.uzabase.com/entry/2014_10_01_archive.html_1">http://tech.uzabase.com/entry/2014_10_01_archive.html_1</a><br><a data-toggle="collapse" href="#collapse27">View / Hide 'description'</a><br><div id="collapse27" class="panel-collapse collapse"><div class="panel-body"><p><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21.8400001525879px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: #ffffff;">インフラチームの金屋です。</span><br style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21.8400001525879px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;" /><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21.8400001525879px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: #ffffff;">ユーザベースのインフラを担当しています。</span><br style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21.8400001525879px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;" /><br style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21.8400001525879px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;" /><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21.8400001525879px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: #ffffff;">今回は身近に利用しているけど、使っていることに気付かない</span><br style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21.8400001525879px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;" /><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21.8400001525879px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: #ffffff;">インターネットの影の立役者であるＣＤＮについて書きます。</span></p>
<p> </p>
<h2>CDNとは？</h2>
<div style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21.8400001525879px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;"><em style="background-color: #f3f3f3;">Contents      Delivery   Network</em></div>
<div style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21.8400001525879px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;"><em style="background-color: #f3f3f3;">コンテンツを  配信する  ネットワーク</em></div>
<div style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21.8400001525879px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;"> </div>
<p>簡単に言うと、次の機能を持っています</p>
<ul>
<li>Webコンテンツ(サイト、画像、動画等)を</li>
<li>全世界のインターネットへ配信する</li>
<li>専用に整備された高速ネットワーク</li>
</ul>
<p> </p>
<h2>CDNは何のためにあるのか？</h2>
<p>地理的・物理的に遠隔地からのアクセスをキャッシュ、経路最適化で高速化するのが目的です。</p>
<p> </p>
<p>（イメージ）<br />[通常]　日本 &lt;=======10秒=======&gt; 米国<br />[CDN]　日本 &lt;==CDN(2秒)==&gt; 米国　500%高速化</p>
<p> </p>
<h2>なんで遠隔地だと遅くなるのか？</h2>
<p>インターネット上のWebサイトへのアクセスの流れは</p>
<ol>
<li>www.abc.com を名前解決してグローバルIPに変換</li>
<li>グローバルIP で接続する</li>
<li>ルーターがパケットを中継して、宛先のグローバルIP(サーバ)まで届ける</li>
</ol>
<p>一般的に遠いほど、中継点（ホップ）が多く、通信に時間（コスト）が掛かり、遅延します。</p>
<p>日本から近いサイト(Yahoo Japan)と遠いサイト(米Yahoo) で比べてみます。</p>
<p> </p>
<p><strong>近いサイト(Yahoo Japan)へのping応答</strong></p>
<p><br />C:\&gt;ping www.yahoo.co.jpwww.g.yahoo.co.jp [182.22.70.251]に ping を送信しています32 バイトのデータ:182.22.70.251 からの応答:バイト数 =32 時間 =8ms TTL=53182.22.70.251 からの応答: バイト数 =32 時間 =7ms TTL=53182.22.70.251 からの応答: バイト数 =32 時間 =7ms TTL=53182.22.70.251 からの応答: バイト数 =32 時間 =7ms TTL=53182.22.70.251 の ping 統計:    パケット数: 送信 = 4、受信 = 4、損失 = 0 (0% の損失)、 <em><strong>ラウンド トリップの概算時間 (ミリ秒):  最小 = 7ms、最大 = 8ms、平均 = 7ms</strong></em></p>
<p> </p>
<p><strong>遠いサイト(米Yahoo)へのping応答</strong></p>
<p><br />C:\&gt;ping www.yahoo.com<br />fd-fp3.wg1.b.yahoo.com [106.10.139.246]に ping を送信しています 32 バイトのデータ:106.10.139.246 からの応答: バイト数 =32 時間 =72ms TTL=49106.10.139.246 からの応答: バイト数 =32 時間 =72ms TTL=49106.10.139.246 からの応答: バイト数 =32 時間 =72ms TTL=49106.10.139.246 からの応答: バイト数 =32 時間 =72ms TTL=49<br />106.10.139.246 の ping 統計:    パケット数: 送信 = 4、受信 = 4、損失 = 0 (0% の損失)、 <em><strong>ラウンド トリップの概算時間 (ミリ秒):  最小 = 72ms、最大 = 72ms、平均 = 72ms</strong></em><br /><br />※ラウンドトリップ：通信の往復にかかる時間遠いサイトの方が約10倍時間が掛かっています。<br /><br /></p>
<p>実際の経路を比べてみましょう。</p>
<p> </p>
<p><strong>近いサイト(Yahoo Japan)の経路→11回経由</strong></p>
<p> C:\&gt;tracert www.yahoo.co.jp<br />　　www.g.yahoo.co.jp [182.22.39.242] へのルートをトレースしています経由するホップ数は最大 30 です:<br /> 1     1 ms     2 ms     1 ms  10.10.5.126<br />  2     1 ms     1 ms     1 ms  10.0.0.254<br />  3     3 ms     3 ms     3 ms  106.162.241.131<br /> 4     3 ms     3 ms     3 ms  106.162.241.161<br /> 5     4 ms     3 ms     4 ms  sjkBBAR001-2.bb.kddi.ne.jp [106.162.241.141]<br /> 6     7 ms     7 ms     6 ms  sjkBBAC06.bb.kddi.ne.jp [182.248.174.1]<br /> 7    11 ms     3 ms     4 ms  otejbb206.int-gw.kddi.ne.jp [210.234.225.5]<br /> 8     4 ms     4 ms     4 ms  cm-ote257.int-gw.kddi.ne.jp [118.155.197.52]<br /> 9     5 ms     4 ms     4 ms  125.29.25.94<br /> 10     7 ms     7 ms     7 ms  118.151.224.242<br /> 11     7 ms     7 ms    13 ms  182.22.34.86<br /> 12    10 ms    10 ms     8 ms  f4.top.vip.ssk.yahoo.co.jp [182.22.39.242]<br /><br /></p>
<p><strong>※全て日本国内</strong>      　　　　　　　　　　</p>
<p> <strong>遠いサイト(米Yahoo)の経路→19回経由</strong></p>
<p>C:\&gt;tracert www.yahoo.com</p>
<p>fd-fp3.wg1.b.yahoo.com [106.10.139.246] へのルートをトレースしています経由するホップ数は最大 30 です:</p>
<p>1     1 ms    &lt;1 ms     1 ms  10.10.5.126 2     1 ms     1 ms     1 ms  10.0.0.254</p>
<p>3     3 ms     4 ms     3 ms  106.162.241.131</p>
<p>4     3 ms     3 ms     4 ms  106.162.241.161</p>
<p>5     4 ms     3 ms     4 ms  sjkBBAR001-2.bb.kddi.ne.jp [106.162.241.141]</p>
<p>6     8 ms     4 ms     8 ms  sjkBBAC06.bb.kddi.ne.jp [182.248.174.1]</p>
<p>7     6 ms     4 ms     3 ms  otejbb206.int-gw.kddi.ne.jp [210.234.225.85]</p>
<p>8    10 ms    17 ms    17 ms  ix-ote212.int-gw.kddi.ne.jp [106.187.6.134]</p>
<p>9    15 ms    17 ms     4 ms  Vlan527.ihar1.OVC-Tokyo.as6453.net [116.0.90.65]</p>
<p>10     4 ms    19 ms    13 ms  Port-channel2.ihar2.OVC-Tokyo.as6453.net [116.0.91.1]</p>
<p>11     5 ms     4 ms     4 ms  if-3-1-0-11.tcore1.TV2-Tokyo.as6453.net [180.87.180.21]</p>
<p> </p>
<p><strong>※１～12：日本国内でラウンドトリップが少ない</strong></p>
<p> </p>
<p>12     *        *        *     要求がタイムアウトしました。</p>
<p>13    70 ms    75 ms    70 ms  if-6-2.tcore1.SVW-Singapore.as6453.net [180.87.12.109]</p>
<p>14    70 ms    71 ms    70 ms  if-2-2.tcore2.SVW-Singapore.as6453.net [180.87.12.2]</p>
<p>15    77 ms    81 ms    82 ms  180.87.15.122</p>
<p>16    71 ms    91 ms    71 ms  ae-5.msr1.sg3.yahoo.com [203.84.209.87]</p>
<p>17    78 ms    78 ms    77 ms  ae-2.clr2-a-gdc.sg3.yahoo.com [106.10.128.5]</p>
<p>18    71 ms    71 ms    71 ms  et-18-25.fab3-1-gdc.sg3.yahoo.com [106.10.128.25] 19    88 ms    88 ms    88 ms  po-11.bas1-1-prd.sg3.yahoo.com [106.10.128.69]</p>
<p>20    73 ms    72 ms    72 ms  ir1.fp.vip.sg3.yahoo.com [106.10.139.246]</p>
<p> </p>
<p><strong>※13～20：日本国外でラウンドトリップが多い　　　　　　　　　</strong></p>
<p><strong>（地理的・物理的に遠く、相手先のネットワーク環境に依存）</strong></p>
<p><strong>→この遅延をキャッシュと経路最適化で高速化し、解消する</strong></p>
<p> </p>
<h2 style="margin: 0px 0px 1em; position: relative; font-style: normal; font-weight: bold; font-variant: normal; font-stretch: normal; font-size: 18px; line-height: normal; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; color: #000000; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">通常経路とCDNの概念図</h2>
<p><img class="hatena-fotolife" title="f:id:uzabase:20150114195558p:plain" src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150114/20150114195558.png" alt="f:id:uzabase:20150114195558p:plain" /></p>
<ul style="padding: 0px 2.5em; margin: 0.5em 0px; line-height: 21.8400001525879px; color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">
<li style="padding: 0px; margin: 0px 0px 0.25em; text-indent: 0px;">通常経路だと、遅延が大きくなる（経由が多く、各国の通信環境に依存）</li>
<li style="padding: 0px; margin: 0px 0px 0.25em; text-indent: 0px;">ＣＤＮだと、エッジサーバのキャッシュと最適経路で安定した高速ネットワークで遅延が小さい</li>
</ul>
<p> </p>
<h2 style="margin: 0px 0px 1em; position: relative; font-style: normal; font-weight: bold; font-variant: normal; font-stretch: normal; font-size: 18px; line-height: normal; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; color: #000000; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">CDN経由でのアクセス概念図</h2>
<p><img class="hatena-fotolife" title="f:id:uzabase:20150114195710p:plain" src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150114/20150114195710.png" alt="f:id:uzabase:20150114195710p:plain" /></p>
<ul style="padding: 0px 2.5em; margin: 0.5em 0px; line-height: 21.8400001525879px; color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">
<li style="padding: 0px; margin: 0px 0px 0.25em; text-indent: 0px;">日本国内のPCから、米国に存在するホスト「abc.com」へアクセスすることを想定</li>
<li style="padding: 0px; margin: 0px 0px 0.25em; text-indent: 0px;">エッジサーバが応答することで、高速化＋ホスト負荷軽減のメリットもある</li>
</ul>
<div style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21.8400001525879px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;"> </div>
<div style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21.8400001525879px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">
<h2 style="margin: 0px 0px 1em; position: relative; font-style: normal; font-weight: bold; font-variant: normal; font-stretch: normal; font-size: 18px; line-height: normal; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; color: #000000;">改めてCDNとは？</h2>
<div>
<div><em style="background-color: #f3f3f3;">Contents      Delivery   Network</em></div>
<div><em style="background-color: #f3f3f3;">コンテンツを  配信する  ネットワーク</em></div>
</div>
<div> </div>
<div>
<div>これまでの内容を合わせると、次のように言うことができます。</div>
<div>
<ul style="padding: 0px 2.5em; margin: 0.5em 0px; line-height: 1.4;">
<li style="padding: 0px; margin: 0px 0px 0.25em; text-indent: 0px;"><strong>Webコンテンツ(サイト、画像、動画等)</strong>を</li>
<li style="padding: 0px; margin: 0px 0px 0.25em; text-indent: 0px;"><strong>世界中に分散配置されたエッジサーバのキャッシュ</strong>を利用して</li>
<li style="padding: 0px; margin: 0px 0px 0.25em; text-indent: 0px;">専用に<strong>経路最適化された高速なネットワーク網</strong>を通じて</li>
<li style="padding: 0px; margin: 0px 0px 0.25em; text-indent: 0px;">全世界のインターネットへの<strong>配信を高速化</strong>する仕組み</li>
</ul>
<div> </div>
</div>
</div>
</div>
<div style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21.8400001525879px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">
<h2 style="margin: 0px 0px 1em; position: relative; font-style: normal; font-weight: bold; font-variant: normal; font-stretch: normal; font-size: 18px; line-height: normal; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; color: #000000;">SPEEDAでの効果</h2>
</div>
<div style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21.8400001525879px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">当社サービスのSPEEDAで検証した結果が下記の通りです。</div>
<div style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 21.8400001525879px; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;">
<p><img class="hatena-fotolife" title="f:id:uzabase:20150114195814p:plain" src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150114/20150114195814.png" alt="f:id:uzabase:20150114195814p:plain" /></p>
<ul>
<li>どの地域でも200%以上高速化されている（日本国内も含めて）</li>
<li>特に中国(右端)が顕著</li>
<ul>
<li>中国特有の環境が影響</li>
<ul>
<li>金盾(グレートファイアウォール)という中国国内の情報検閲システムや、 南北問題（中国国内でもアクセスが遅い）などでネットワーク遅延が大きい</li>
</ul>
</ul>
</ul>
<p> </p>
<p> </p>
<h2>CDN導入後の一般的な変更点・注意点</h2>
<ul>
<li>アクセス元IPアドレスがエッジサーバのIPになる</li>
<ul>
<li>本来のリモートホストはHTTPヘッダで付与</li>
<ul>
<li>「X-forwarded-for」や「Origin-IP」など</li>
</ul>
<li>Webサーバでのアクセス制限やプログラム側での処理に注意</li>
</ul>
<li>静的ファイルがキャッシュされる</li>
<ul>
<li>ファイル名に日付を付けるなど、ユニーク化しないとキャッシュ有効期限まで反映されない等の問題が発生する可能性がある</li>
</ul>
</ul>
<p> </p>
<h2>まとめ</h2>
<p>以上、一般的なCDNの効果と仕組みを説明しました。</p>
<p>もちろんメリットだけでなく費用やアプリケーション改修も発生するので、</p>
<p>しっかりと検証して、費用対効果を見極めることが重要です。</p>
</div></div></div>(Published: Fri, 26 Dec 2014 19:59:00 +0900)<br><br>
<b>第1回 えびスタ！ ~ 恵比寿スタートアップ勉強会 ~  レポート</b><br><a href="http://tech.uzabase.com/entry/2014/12/1.html">http://tech.uzabase.com/entry/2014/12/1.html</a><br><a data-toggle="collapse" href="#collapse28">View / Hide 'description'</a><br><div id="collapse28" class="panel-collapse collapse"><div class="panel-body"><p>先日12月18日、恵比寿にある UZABASE 新オフィスにてエンジニア向け勉強会「えびスタ！ 」第 1 回を開催させて頂きました。</p>

<p> 移転したばかりの新オフィスで初めて開催する勉強会ということで不安な点もありましたが、50 人という定員枠に対してなんと 50 人オーバー近い参加登録を頂き、盛況のうちにイベントを終えることが出来ました。参加者の皆さん、ありがとうございました！</p>

<p> 本記事では当日の様子をレポートしたいと思います。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150114/20150114193254.jpg" alt="f:id:uzabase:20150114193254j:plain" title="f:id:uzabase:20150114193254j:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>今回のアジェンダは以下のとおりです。
前半はクックパッド、Retty、VASILY、 UZABASE から 4 名のエンジニアによるプレゼンテーション。後半は皆でわいわいエビスビール（恵比寿だけに）やピザをつまみながらの QA セッション + 懇親会でした！</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150114/20150114193427.png" alt="f:id:uzabase:20150114193427p:plain" title="f:id:uzabase:20150114193427p:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>&lt;プレゼンテーション></p>

<p> 1.マイクロサービスアーキテクチャについて     小野 大器 様（クックパッド）</p>

<div style="width: 65%">
<script async class="speakerdeck-embed" data-id="9cccdbb069500132d347425d7b9918bb" data-ratio="1.33333333333333" src="//speakerdeck.com/assets/embed.js"></script></div>


<p> クックパッドからは小野様に、クックパッドが何故マイクロサービスアーキテクチャを採用したかということと、実際に行っている取組みについてご紹介頂きました。</p>

<p> クックパッドがマイクロサービスアーキテクチャを採用するにあたった経緯として</p>

<p>  ・ビジネスの変化（ブラウザからモバイルへの変遷といった環境の変化）
 ・巨大化するモノリシックなアプリではテストやデプロイに時間がかかり過ぎる</p>

<p> などの理由を挙げられていました。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150114/20150114193459.jpg" alt="f:id:uzabase:20150114193459j:plain" title="f:id:uzabase:20150114193459j:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>えびスタ以前から「最近マイクロサービス気になる…！」という声を周りで聞いていたので、そのような方にとってはとても勉強になるセッションだったのはないでしょうか。</p>

<p> 2.Dev が AWS と出会って DevOps を目指した話  梅田 昌太 様（Retty）</p>

<p> Retty からは 梅田様に、サービスの成長とユーザーの増加に伴う問題にへの対応と今後、そしてアプリケーションエンジニア出身の DevOps として AWS とどう関わっているのかについてお話頂きました。</p>

<p> ユニークユーザーが 10 万人以下のサービス黎明期から 200 万~ 400 万人の人気サービスにまで成長していく過程で 、インフラアーキテクチャをどのように変化させて対応していったのかついて取り上げていらっしゃいました。</p>

<iframe src="//www.slideshare.net/slideshow/embed_code/42827917" width="425" height="355" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe>


<p> <div style="margin-bottom:5px"> <strong> <a href="//www.slideshare.net/shotaumeda1/devawsdev-ops" title="Devがawsと出会ってdev opsを目指した話" target="_blank">Devがawsと出会ってdev opsを目指した話</a> </strong> from <strong><a href="//www.slideshare.net/shotaumeda1" target="_blank">Shota Umeda</a></strong> </div></p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150114/20150114194230.jpg" alt="f:id:uzabase:20150114194230j:plain" title="f:id:uzabase:20150114194230j:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>またインフラで利用されている ElasticBeanstalk についての詳しい説明もされていました。
ElasticBeanstalk は AWS から無料で提供されている アプリケーション管理サービスです。AWS内のアプリケーションに対してデプロイの詳細を自動的に設定してくれます。
参加者には ElasticBeanstalk を利用されている方はほとんどいなかったのですが、このセッションを聞いて気になったという方も多かったのではないでしょうか。</p>

<p>3.プッシュ通知大戦争  今村 雅幸 様（VASILY）</p>

<p> VASILY からは今村様に、iQON で行われているアプリのプッシュ通知に対しての取り組みをご紹介頂きました。(ちなみに VASILY さんは UZABASE と同じビルの 1 フロア下のご近所さんです）</p>

<p> プッシュ通知のメリットとそれに付随する課題にはじまり、代表的な ASP サービスの比較から、自前でプッシュ通知サービスを実装するにあたりおこなった様々な工夫（配信の最適化・スケーラビリティーの確保の仕方・通知の分析など）まで、プッシュ通知まわりでのノウハウについてお話頂きました。</p>

<p> テスト配信における秘話などタメになる話が満載でした。</p>

<div style="width: 65%"><script async class="speakerdeck-embed" data-id="0555bea0692d0132d347425d7b9918bb" data-ratio="1.33333333333333" src="//speakerdeck.com/assets/embed.js"></script></div>




<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150114/20150114194709.jpg" alt="f:id:uzabase:20150114194709j:plain" title="f:id:uzabase:20150114194709j:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>4. を支える技術と怖い話  文字 拓郎（UZABASE）</p>

<p> 弊社からは 3 ヶ月前に  チームに join したばかりの文字が、急成長を続けるサービスの裏側がどのようなアーキテクチャで構成されており、どのような工夫を行っているのか、実際にあった事件なども交えてご紹介。</p>

<p> 今までにあった怖い話として、荒ぶる Redis、暴走する Phantom JS、互換性肥満などといった事件の原因及び、解決策としてどのような工夫を行ってきたのかについてお話しました。</p>

<div style="width: 65%">
<script async class="speakerdeck-embed" data-id="ea4cc40068f40132fd470a025a0ea166" data-ratio="1.33333333333333" src="//speakerdeck.com/assets/embed.js"></script></div>


<p>プレゼンテーションのあとはエビスビールとピザを頂きながら、しばし休憩を挟んで、後半の QA セッションへ。</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150114/20150114194930.jpg" alt="f:id:uzabase:20150114194930j:plain" title="f:id:uzabase:20150114194930j:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>&lt;QAセッション></p>

<p> QA セッションでは本日登壇された 4 名によるカジュアルな質疑応答が行われました。ガリガリにテック寄りの質疑応答が行われたわけではなく、ゆるい雰囲気の中で、ビール片手に冗談を交えながらの進行でした。
質問は、会場にいる参加者全員に対して、スマートフォンを用いて 4 択のアンケートで回答をとり、その結果をスクリーンに表示して共有する、という形で行われました。弊社杉浦恒例のリアルタイム参加型です！</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150114/20150114194942.jpg" alt="f:id:uzabase:20150114194942j:plain" title="f:id:uzabase:20150114194942j:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>登壇者の方には代表して、各自選んだ回答に対しての意見や、なぜその回答を選んだのか、などのお話をしていただきました。ユーモラスな回答も多かったのですが、時には登壇者の方の熱いお話を聞くこともできました。</p>

<p> 質問内容は、好きなエディタは何かという質問から、普段聞きづらいような攻めた質問まで様々で、エンジニアジョークが飛び交うセッションでした。登壇者の意見を聞いて、他のエディタや他の言語に浮気してみようかな、なんて思った方もいたかもしれませんね。</p>

<p> また、登壇者以外の参加者がアンケートページで入力したコメントもスクリーンに表示されるようになっていて、そのコメントに対しての笑いも起こり、会場全体で盛り上がっていました。</p>

<p> その後は同じ会場内で懇親会を行いました。参加者の方と主催企業エンジニアの垣根なく、皆様思い思いに交流されていました。
集合写真を撮れなかったのが心残りです…</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150114/20150114195026.jpg" alt="f:id:uzabase:20150114195026j:plain" title="f:id:uzabase:20150114195026j:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150114/20150114195039.jpg" alt="f:id:uzabase:20150114195039j:plain" title="f:id:uzabase:20150114195039j:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p><span itemscope itemtype="http://schema.org/Photograph"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20150114/20150114195049.jpg" alt="f:id:uzabase:20150114195049j:plain" title="f:id:uzabase:20150114195049j:plain" class="hatena-fotolife" itemprop="image"></span></p>


<p>幸いなことに「次回はいつですか」というお声も多数頂けたので、是非次回も開催したいと思います！恵比寿オフィス引っ越し後まもなくの勉強会で到らないところも多々ありましたが、次回の勉強会では今回の反省を活かしてより良いものにしたいと思います！</p>

<p> みなさまご参加ありがとうございました！</p>
</div></div>(Published: Wed, 24 Dec 2014 19:51:11 +0900)<br><br>
<b>オフショア開発 @ Framgia Vietnam</b><br><a href="http://tech.uzabase.com/entry/2014/12/framgia-vietnam.html">http://tech.uzabase.com/entry/2014/12/framgia-vietnam.html</a><br><a data-toggle="collapse" href="#collapse29">View / Hide 'description'</a><br><div id="collapse29" class="panel-collapse collapse"><div class="panel-body"><p><span style="background-color: white; color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">SPEEDA QAチームの藤田です。</span><br /><span style="background-color: white; color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;"><br /></span><span style="background-color: white; color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">オフショアでのテスト自動化PJ立ち上げのため</span><span style="color: #666666; font-family: Trebuchet MS, Trebuchet, Verdana, sans-serif;"><span style="font-size: 13px; line-height: 18.4799995422363px;">に11月中旬より1か月間　<a href="http://framgia.com/jp/">Framgia Vietnam</a> に来ています。</span></span><br /><span style="color: #666666; font-family: Trebuchet MS, Trebuchet, Verdana, sans-serif;"><span style="font-size: 13px; line-height: 18.4799995422363px;"><br /></span></span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">Framgia さんには、以前からUzabaseの社内システムの開発を依頼していましたが、今回は</span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">社内システムだけでなくSPEEDAの自動テストコードを実装いただくべく一緒にベトナムで仕事しております。</span><br /><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;"><br /></span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">せっかくなのでちょっと今までの投稿とは異色ですが、Framgiaさんとのオフショア開発についてまとめようと思います。</span><br /><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">今後オフショアを考えてる方には参考になる？とうれしいです。</span><br /><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;"><br /></span><strong style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">信頼できるオフショアパートナー　</strong><strong style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">ベトナムのFramgiaさん</strong><strong style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">。</strong><br /><strong style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;"><br /></strong><span style="color: #666666; font-family: Trebuchet MS, Trebuchet, Verdana, sans-serif;"><span style="font-size: 13px; line-height: 18.4799995422363px;">「なぜFramgiaさんと一緒に開発するのか？」という理由はいろいろありると思うのですが、</span></span><br /><span style="color: #666666; font-family: Trebuchet MS, Trebuchet, Verdana, sans-serif;"><span style="font-size: 13px; line-height: 18.4799995422363px;">ベトナムという国としての特性とFramgiaさんの会社としての魅力が大きいと感じています。</span></span><br /><span style="color: #666666; font-family: Trebuchet MS, Trebuchet, Verdana, sans-serif;"><span style="font-size: 13px; line-height: 18.4799995422363px;">オフショア開発を進める</span></span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">ポイントとなるベトナムの</span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">基本情報。</span></p>
<ul>
<li><span style="color: #666666; font-family: Trebuchet MS, Trebuchet, Verdana, sans-serif;"><span style="font-size: 13px; line-height: 18.4799995422363px;">物価、<span style="line-height: 18.4799995422363px;">労働コスト</span>が日本の3~4分の1</span></span></li>
<li><span style="color: #666666; font-family: Trebuchet MS, Trebuchet, Verdana, sans-serif;"><span style="font-size: 13px; line-height: 18.4799995422363px;">平均年齢が若い（27~28才）</span></span></li>
<li><span style="color: #666666; font-family: Trebuchet MS, Trebuchet, Verdana, sans-serif;"><span style="font-size: 13px; line-height: 18.4799995422363px;">親日</span></span></li>
<li><span style="color: #666666; font-family: Trebuchet MS, Trebuchet, Verdana, sans-serif;"><span style="font-size: 13px; line-height: 18.4799995422363px;">IT業種はとても人気がある</span></span></li>
<li><span style="color: #666666; font-family: Trebuchet MS, Trebuchet, Verdana, sans-serif;"><span style="font-size: 13px; line-height: 18.4799995422363px;">みんなポジティブで明るく、面倒みの良い</span></span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">国民性</span></li>
</ul>
<p><br /><span style="color: #666666; font-family: Trebuchet MS, Trebuchet, Verdana, sans-serif;"><span style="font-size: 13px; line-height: 18.4799995422363px;">Framgiaさんの場合、平均年齢が27才以下らしく、実際に170人くらいの社員みなさんが若くパワーあふれる感じです。</span></span><br /><span style="color: #666666; font-family: Trebuchet MS, Trebuchet, Verdana, sans-serif;"><span style="font-size: 13px; line-height: 18.4799995422363px;">優秀な学生のリクルートには力を入れているとのことで、国費留学で海外で学んだ超エリートもいるとのこと。</span></span><br /><span style="color: #666666; font-family: Trebuchet MS, Trebuchet, Verdana, sans-serif;"><span style="font-size: 13px; line-height: 18.4799995422363px;">Framgiaさんではラボ型開発を推進しています。</span></span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">ラボ型は、契約した期間で担当メンバーを確保することができ優秀なエンジニアを常に確保することができます。</span><br /><span style="color: #666666; font-family: Trebuchet MS, Trebuchet, Verdana, sans-serif;"><span style="font-size: 13px; line-height: 18.4799995422363px;"><br /></span></span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">日本と2Hの時差のあるベトナムでは、日本に合わせてみなさん1日は基本的に以下のスケジュールで仕事しています。</span><br /><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">稼動時間が同じなので、いつでもオンラインでチャットや会議をできます。</span><br /><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px; text-decoration: underline;">AM 7:45 全社の朝礼</span><br /><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">朝は、日本のクライアントに合わせて早いです。</span><br /><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">毎日1人ずつモーニングスピーチを英語でし、</span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">最後は日本のあいさつの練習を全社で実施。</span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">やる気UP！</span><br /><span style="color: #666666; font-family: Trebuchet MS, Trebuchet, Verdana, sans-serif;"><span style="font-size: 13px; line-height: 18.4799995422363px;"><br /></span></span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;"><span style="text-decoration: underline;">AM 8:00 チームの朝会</span></span><br /><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">どのチームも、</span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">最後は「モー・ハイ・バー　</span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">わっしょい！」の掛け声で終了。みんな同じ時間に朝会をするので掛け声が社内のそこら中から聞こえます。</span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">やる気UP！2回目。</span><br /><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;"><br /></span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;"><span style="text-decoration: underline;">AM 8:10~PM17:00? 開発集中</span></span><br /><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">チームは席が近く、いつでもコミュニケーションはその場ですぐできるのでミーティングが少なく仕事に集中できる時間が長い。</span><br /><br /><span style="color: #666666; font-family: Trebuchet MS, Trebuchet, Verdana, sans-serif;"><span style="font-size: 13px; line-height: 18.4799995422363px;">モチベーションやチームビルディングはどこでも大きな課題ですが、ここではそんな悩みないのでは？と思えるくらいに</span></span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">みなさん明るく仲良しで、とても仕事に集中しやすい会社の文化があります。</span><br /><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;"><br /></span><span style="color: #666666; font-family: Trebuchet MS, Trebuchet, Verdana, sans-serif;"><span style="font-size: 13px; line-height: 18.4799995422363px;">もちろん技術力UPにも熱心で、チーム対応Hackathon、コードコンテストなどのイベントが企画されていたり、トレーニングルームが用意されておりプロジェクトに携わるメンバーが必要スキルを短期で習得できる体制ができています。</span></span><br /><span style="color: #666666; font-family: Trebuchet MS, Trebuchet, Verdana, sans-serif;"><span style="font-size: 13px; line-height: 18.4799995422363px;"><br /></span></span><span style="color: #666666; font-family: Trebuchet MS, Trebuchet, Verdana, sans-serif;"><span style="font-size: 13px; line-height: 18.4799995422363px;">ということで、長期で一緒に仕事をしこれからのオフショア開発の可能性をほぼ毎日感じ、更にベトナムとFramgiaが好きになってしまいました。（暖かいし、食べ物もめっちゃおいしいし。。。）</span></span><br /><br /></p>
<div>
<p><strong style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">立上げはやっぱりオンサイト！</strong></p>
<p><span style="color: #666666; font-family: Trebuchet MS, Trebuchet, Verdana, sans-serif;"><span style="font-size: 13px; line-height: 18.4799995422363px;">私は、春からオフショア開発に参加しましたが、</span></span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">今までを振り返って思うのはやはりコミュニケーションが難しいという部分です。</span></p>
<p><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">テスト自動化PJの立ち上げでは、</span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">メンバーが自分たちで開発環境をつくり、コードを書いていけるように、</span></p>
<p><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">「コンセプトを共有 ＞ 必要最小限のドキュメントを作成</span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;"> </span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">＞</span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;"> </span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">実際に一緒にやってみる」</span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">を</span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">繰り返しました。</span></p>
<p><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">その中でよりワークしそうなフローを一緒に相談したり、躓いている部分を共有しました。</span></p>
<p><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">割とスムーズに自動テストの実装を依頼できる体制ができたのも、</span><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;">オンサイトだったからこそ。</span></p>
<p><span style="color: #666666; font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; font-size: 13px; line-height: 18.4799995422363px;"><br /></span><span style="color: #666666; font-family: Trebuchet MS, Trebuchet, Verdana, sans-serif;"><span style="font-size: 13px; line-height: 18.4799995422363px;">また、ベトナムでFramgiaメンバーと仕事がしたい！！</span></span></p>
<p><span style="color: #666666; font-family: Trebuchet MS, Trebuchet, Verdana, sans-serif;"><span style="font-size: 13px; line-height: 18.4799995422363px;"> </span></span></p>
<div align="center"><img class="hatena-fotolife" title="f:id:uzabase:20141218135804j:plain" src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20141218/20141218135804.jpg" alt="f:id:uzabase:20141218135804j:plain" width="340" /></div>
<div align="center">
<p class="separator" style="margin: 0px; clear: both;"><span style="color: #444444; font-size: small;">自動化を手伝ってくれたFramgiaエンジニア Ngocさん</span></p>
</div>
<div align="center">with　社内<span data-blogger-escaped-style="font-family: 'Trebuchet MS', Trebuchet, Verdana, sans-serif; line-height: 18.4799995422363px; text-align: start;">Hackathonの告知ポスター！</span></div>
</div></div></div>(Published: Thu, 18 Dec 2014 10:12:00 +0900)<br><br>
<b>(iOS)の設計思想</b><br><a href="http://tech.uzabase.com/entry/2014/12/newspicksios.html">http://tech.uzabase.com/entry/2014/12/newspicksios.html</a><br><a data-toggle="collapse" href="#collapse30">View / Hide 'description'</a><br><div id="collapse30" class="panel-collapse collapse"><div class="panel-body"><div class="p1"><span class="s1">チーム<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%F3">インターン</a>生の保田です。</span></div>
<div class="p1"><span class="s1">主に<a class="keyword" href="http://d.hatena.ne.jp/keyword/iOS">iOS</a>アプリ開発のお手伝いをしております。</span></div>
<div class="p1"><span class="s1"><a class="keyword" href="http://d.hatena.ne.jp/keyword/iOS">iOS</a>アプリを作っていて悩ましいな、と思うのが、同じ機能を持つが<a class="keyword" href="http://d.hatena.ne.jp/keyword/iPad">iPad</a>と<a class="keyword" href="http://d.hatena.ne.jp/keyword/iPhone">iPhone</a>で見た目が違うページをどう設計していくか、ということです。</span></div>
<div class="p2"> </div>
<div class="p1"><span class="s1">ちょうど僕が関わった、の特徴的な機能である「ニュース中間ページ」をどのように設計したかについてお届けいたします。</span></div>
<div class="p1"><span class="s1"> </span></div>
<div class="separator" style="clear: both; text-align: center;"> </div>
<div class="separator" style="clear: both; text-align: center;">
<div style="float: left; margin: 20px;"><img class="hatena-fotolife" title="f:id:uzabase:20141217174422p:plain" src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20141217/20141217174422.png" alt="f:id:uzabase:20141217174422p:plain" width="160" /></div>
<div style="float: left; margin: 20px;"><img class="hatena-fotolife" title="f:id:uzabase:20141217175413p:plain" src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20141217/20141217175413.png" alt="f:id:uzabase:20141217175413p:plain" width="161" /></div>
<div style="float: left; margin: 20px;"><img class="hatena-fotolife" title="f:id:uzabase:20141217175439p:plain" src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20141217/20141217175439.png" alt="f:id:uzabase:20141217175439p:plain" width="161" /></div>
<br /><a style="margin-left: 1em; margin-right: 1em;" href="http://2.bp.blogspot.com/-sxXL_6Wgn9A/VImrYJlVnsI/AAAAAAAABlc/jwacUFuriAo/s1600/blog_sreen_2.PNG"><br /><br /></a></div>
<div class="p1"><br />
<div class="p1"><span class="s1">上でニュースをみるとき、上図の左から右の流れで画面を切り替えます。</span></div>
<div class="p1">この中の真ん中の画面（ニュース中間ページ）の設計についてご説明していきます。</div>
<div class="p1"><span class="s1"> </span></div>
<div class="p1"><span class="s1"> </span></div>
<div class="p1"><span class="s1"><strong>Season1. 単一仕様時代</strong></span></div>
<div class="p1"><span class="s1"><strong> </strong></span></div>
<div class="p1"><span class="s1">当初は、次のような単純な仕様でした</span> <span class="s1">。</span></div>
<div class="p1"><span class="s1"> - 「フォローしているユーザー」セクションで、コメントを表示</span></div>
<div class="p1"> </div>
<div class="p1"><span class="s1"> - 「その他のユーザー」セクションで、コメントを表示</span></div>
<div class="separator" style="clear: both; text-align: center;"><br />
<p><img class="hatena-fotolife" title="f:id:uzabase:20141217175927p:plain" src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20141217/20141217175927.png" alt="f:id:uzabase:20141217175927p:plain" width="196" /></p>
</div>
<br /><br />ただし、並び順に関してはサーバー側で『時系列順』『Like順』でソートされたものを受信して、そのまま表示していました。<br />
<div class="p2"> </div>
<div class="p1"><span class="s1">当時は次のようなクラス図になっていました(<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BD%A5%C3%A5%C9">メソッド</a>は省略)。</span></div>
<div class="separator" style="clear: both; text-align: center;">
<p><img class="hatena-fotolife" title="f:id:uzabase:20141217180037p:plain" src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20141217/20141217180037.png" alt="f:id:uzabase:20141217180037p:plain" width="352" /></p>
</div>
<div class="p1"><span class="s1"> </span></div>
<br />
<div class="p1"><span class="s1">Controllerには<a class="keyword" href="http://d.hatena.ne.jp/keyword/iPhone">iPhone</a>, <a class="keyword" href="http://d.hatena.ne.jp/keyword/iPad">iPad</a>で共通の処理が双方に書かれていたため、メンテナンス性が低いものになっていました。</span>また、NewsTableViewにはコメントが表示されるのですが、コメントの有無の判定、データの保持などの処理も行っており、ViewとLogicが切り分けられていない典型的な<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A5%F3%A5%C1%A5%D1%A5%BF%A1%BC%A5%F3">アンチパターン</a>になってしまっていました。</div>
<div class="p1"><span class="s1"> </span></div>
<div class="p1"><span class="s1"> </span></div>
<div class="p1"> </div>
<div class="p1"><span class="s1"><strong>Season2. 人気コメントの誕生</strong></span></div>
<div class="p1"><span class="s1"><strong> </strong></span></div>
<div class="p1"> </div>
<div class="p1"><span class="s1">次に、人気ニュース一覧からニュース中間ページに遷移した場合、Likeがたくさん付いているコメントを「人気コメント」というセクションで上位に表示するという仕様が産声を上げました。</span></div>
<div class="separator" style="clear: both; text-align: center;">
<p><img class="hatena-fotolife" title="f:id:uzabase:20141217180055p:plain" src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20141217/20141217180055.png" alt="f:id:uzabase:20141217180055p:plain" width="227" /></p>
</div>
<br />
<div class="separator" style="clear: both; text-align: center;"> </div>
<div class="separator" style="clear: both; text-align: center;"> </div>
<div class="p1"><span class="s1">仕様を整理すると、下記のようになります。</span></div>
<div class="separator" style="clear: both; text-align: center;">
<p><img class="hatena-fotolife" title="f:id:uzabase:20141217180124p:plain" src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20141217/20141217180124.png" alt="f:id:uzabase:20141217180124p:plain" width="517" /></p>
</div>
<div class="p1"> </div>
<div class="p1"><span class="s1">そこで、以下のような設計に変更しました。</span></div>
<br />
<div class="separator" style="clear: both; text-align: center;">
<p><img class="hatena-fotolife" title="f:id:uzabase:20141217180143p:plain" src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20141217/20141217180143.png" alt="f:id:uzabase:20141217180143p:plain" width="632" /></p>
</div>
<div class="separator" style="clear: both; text-align: center;"> </div>
<div class="p1"><span class="s1">Commentsというクラスを作成し、NewsTableViewから表示するコメントの表示内容、コメントのソートなどを切り離しました。これで、ViewからLogicを少し切り離すことができました。</span></div>
<div class="separator" style="clear: both; text-align: center;"> </div>
<div class="p1"><span class="s1">CommentsWithTrendingCommentsは</span><span class="s2">Comments</span><span class="s1">を継承した、人気コメントを表示するためのクラスです。NewsTableViewがどうCommentsを生成すれば良いか知っていて、それをControllerが知っているという設計です。実装の詳細を知らないと使えないクラスはイケてません。</span></div>
<div class="p1"><span class="s1"> </span></div>
<div class="p1"><span class="s1"> </span></div>
<div class="p1"> </div>
<div class="p1"><span class="s1"><strong>Season3. 検索機能の実装と、連載企画のスタート</strong></span></div>
<div class="p1"><span class="s1"><strong> </strong></span></div>
<div class="p1"> </div>
<div class="p1"><span class="s1">オリジナル連載企画がはじまり、中間ページに以下のようなページが仲間入りしました。</span></div>
<div class="p1"><span class="s1"> </span></div>
<div class="separator" style="clear: both; text-align: center;">
<p><img class="hatena-fotolife" title="f:id:uzabase:20141217180204p:plain" src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20141217/20141217180204.png" alt="f:id:uzabase:20141217180204p:plain" width="235" /></p>
</div>
<div class="p1"> </div>
<div class="page" title="Page 4">
<div class="layoutArea">
<div class="column"><span style="font-family: MS;">上のほうに連載名が書いていたり、「記事に登場するユーザー」というカテゴ リが追加されたりしました。 </span><br /><span style="font-family: MS;">また、検索機能が追加され、コメント検索の結果から遷移すると「ヒットした コメント」というカテゴリを表示することとなりました。 </span><br /><span style="font-family: MS;">仕様を整理すると、下記になります。</span><br />
<div class="separator" style="clear: both; text-align: center;">
<p><img class="hatena-fotolife" title="f:id:uzabase:20141217180427p:plain" src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20141217/20141217180427.png" alt="f:id:uzabase:20141217180427p:plain" width="563" /></p>
</div>
<div class="separator" style="clear: both; text-align: center;"> </div>
<div class="page" title="Page 5">
<div class="layoutArea">
<div class="column">
<pre><span style="font-family: MS;">それに伴い大幅な設計変更を行い、以下の様な設計になりました。</span><span style="font-family: 'MS'; font-size: 9.000000pt;"><br /></span></pre>
<div class="separator" style="clear: both; text-align: center;">
<p><img class="hatena-fotolife" title="f:id:uzabase:20141218143953p:plain" src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20141218/20141218143953.png" alt="f:id:uzabase:20141218143953p:plain" width="529" /></p>
</div>
<br />
<div class="separator" style="clear: both; text-align: center;">
<p><img class="hatena-fotolife" title="f:id:uzabase:20141217180515p:plain" src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20141217/20141217180515.png" alt="f:id:uzabase:20141217180515p:plain" width="604" /></p>
</div>
<div class="separator" style="clear: both; text-align: center;"> </div>
<div class="page" title="Page 6">
<div class="layoutArea">
<div class="column"><span style="font-family: MS;">大工事です。<br />5個しか無かったクラスが </span><span style="font-family: Century;">20 </span><span style="font-family: MS;">個近くになりました。緑色のクラスが実際に呼び出されるクラスです。<br />共通部分は </span><span style="font-family: Century;">Abstract </span><span style="font-family: MS;">に集約し、コメントのロジックは </span><span style="font-family: Century;">PickerCommentsCategorizeLogic </span><span style="font-family: MS;">が責務を持 ち 、 データは</span><span style="font-family: Century;">CategorizedComments </span><span style="font-family: MS;">で授受されそのまま表示すると正しいセクションが表示されます。<br />また、</span><span style="font-family: Century;">Factory Method </span><span style="font-family: MS;">パターンを導入したことによって呼び出し側は </span><span style="font-family: Century;">Abstract </span><span style="font-family: MS;">など実装の詳細は一切知りません。 しかし、まだ改善の余地があります。『</span><span style="font-family: Century;">AbstractNewsSummaryController</span><span style="font-family: MS;">』の 親クラスが </span><span style="font-family: Century;"><a class="keyword" href="http://d.hatena.ne.jp/keyword/iPad">iPad</a>, <a class="keyword" href="http://d.hatena.ne.jp/keyword/iPhone">iPhone</a> </span><span style="font-family: MS;">によって分かれてしまっていて、全く同じ処理が </span><span style="font-family: Century;"><a class="keyword" href="http://d.hatena.ne.jp/keyword/iPhone">iPhone</a>, <a class="keyword" href="http://d.hatena.ne.jp/keyword/iPad">iPad</a> </span><span style="font-family: MS;">のそれぞれに書かれてしまっています。 </span></div>
</div>
</div>
<div class="page" title="Page 6"><br />
<div class="layoutArea"><br />
<div class="column"><br /><span style="font-family: Century;"><strong>Season4. </strong></span><span style="font-family: MS;"><strong>更なるリファクタリング</strong><br /><br /></span><span style="font-family: Century;">Season3 </span><span style="font-family: MS;">で残ってしまった重複コードを削除すべく、リファクタリングを<br />行いました。</span><span style="font-family: Century;"><a class="keyword" href="http://d.hatena.ne.jp/keyword/iPad">iPad</a> </span><span style="font-family: MS;">だけが継承している </span><span style="font-family: Century;">TransitionController </span><span style="font-family: MS;">は、</span><span style="font-family: Century;">Controller<br /></span><span style="font-family: MS;">の遷移方法に関する責務を持っていました。これをを </span><span style="font-family: Century;">Helper </span><span style="font-family: MS;">として存在さ<br />せ、標準の </span><span style="font-family: Century;">UIViewController </span><span style="font-family: MS;">を継承できるようにしました。</span><span style="font-family: 'MS'; font-size: 9.000000pt;"><br /></span><br /><br />
<div class="separator" style="clear: both; text-align: center;"><br />
<p><img class="hatena-fotolife" title="f:id:uzabase:20141217180544p:plain" src="http://cdn-ak.f.st-hatena.com/images/fotolife/u/uzabase/20141217/20141217180544.png" alt="f:id:uzabase:20141217180544p:plain" /></p>
</div>
<br /><span style="font-family: MS;">こうすることで共通部分を抽象クラスへ追いやることができ、具象クラスの重</span><span style="font-family: MS;">複コードが撲滅できました。</span></div>
<br />
<div class="page" title="Page 7"><br />
<div class="layoutArea"><br />
<div class="column"><br /><span style="font-family: MS;">ここで、</span><span style="font-family: Century;">season3</span><span style="font-family: MS;">で</span><span style="font-family: Century;">Factory Method </span><span style="font-family: MS;">パターンを導入していたため、呼び出し側では全くコードの変更が必要ありませんでした。</span><span style="font-family: Century;"><a class="keyword" href="http://d.hatena.ne.jp/keyword/GoF">GoF</a> </span><span style="font-family: MS;">さまさまです。</span></div>
</div>
<br /><span style="font-family: MS;"><strong>まとめ</strong></span><br /><br />
<div class="page" title="Page 7"><br />
<div class="layoutArea"><br />
<div class="column"><br /><span style="font-family: Century;"> </span><span style="font-family: MS;">では、同じ機能をもつが</span> <span style="font-family: Century;"><a class="keyword" href="http://d.hatena.ne.jp/keyword/iPad">iPad</a> </span><span style="font-family: MS;">と </span><span style="font-family: Century;"><a class="keyword" href="http://d.hatena.ne.jp/keyword/iPhone">iPhone</a> </span><span style="font-family: MS;">で見た目が違うページを、下記のような戦略でメンテナンス性の高い設計で実装しています。<br /><br /></span><span style="font-family: ArialUnicodeMS;">- </span><span style="font-family: Century;">View, Logic, Controller </span><span style="font-family: MS;">を切り分ける</span><br /><br /><span style="font-family: ArialUnicodeMS;">- </span><span style="font-family: MS;">具象クラスに点在する共通処理を抽象クラスに追いやる</span><br /><br /><span style="font-family: Century;">- Factory Method </span><span style="font-family: MS;">パターンで<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>の生成方法を隠すことにより、後々</span><span style="font-family: MS;">の変更に強くする</span><br /><br /><span style="font-family: MS;">サービスローンチ時に、様々な試行錯誤を行いながら徐々にサービスを成長さ</span><span style="font-family: MS;">せる過程で、負債コードをためてしまうのは致し方ないことです。しかし、適</span><span style="font-family: MS;">切な手順で設計を変更すれば必ずコードは綺麗になります!</span><br /><br />
<div class="page" title="Page 7"><br />
<div class="layoutArea"><br />
<div class="column"><br /><span style="font-family: MS;"><br /></span><span style="font-family: Century;"> </span><span style="font-family: MS;">では更なるグロースに向けて、一緒に戦ってくれるエンジニアを募集しております!</span><br /><br /><span style="font-family: MS;"><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%F3">インターン</a>生でも設計から携わらせていただけるのでとても勉強になります!<br /></span><br /><br /><span style="font-family: MS;">興味をお持ちいただいた方は </span><span style="color: #e75454; font-family: ArialUnicodeMS;"><a href="https://www.wantedly.com/projects/11448">Wantedly</a> </span><span style="font-family: MS;">などからご応募ください!!</span></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="separator" style="clear: both; text-align: center;"> </div>
<pre><span style="font-family: 'MS'; font-size: 9.000000pt;"> </span></pre>
</div>
</div>
</div>
</div></div></div>(Published: Tue, 16 Dec 2014 11:12:00 +0900)<br><br>
</div>
</body>
</html>